var ScholarlyWebAnnotator =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"swac": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonpScholarlyWebAnnotator"] = window["webpackJsonpScholarlyWebAnnotator"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push([0,"vendor"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-SG\": \"./node_modules/moment/locale/en-SG.js\",\n\t\"./en-SG.js\": \"./node_modules/moment/locale/en-SG.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-us\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./ga\": \"./node_modules/moment/locale/ga.js\",\n\t\"./ga.js\": \"./node_modules/moment/locale/ga.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"./node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"./node_modules/moment/locale/gu.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it-ch\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it-ch.js\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ku\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ku.js\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"./node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"./node_modules/moment/locale/mt.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"./node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"./node_modules/moment/locale/tg.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./node_modules/moment/locale_sync_^\\.\\/.*$?");

/***/ }),

/***/ "./node_modules/n3/lib sync recursive ^\\.\\/N3.*$":
/*!*********************************************!*\
  !*** ./node_modules/n3/lib sync ^\.\/N3.*$ ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var map = {\n\t\"./N3Lexer\": \"./node_modules/n3/lib/N3Lexer.js\",\n\t\"./N3Lexer.js\": \"./node_modules/n3/lib/N3Lexer.js\",\n\t\"./N3Parser\": \"./node_modules/n3/lib/N3Parser.js\",\n\t\"./N3Parser.js\": \"./node_modules/n3/lib/N3Parser.js\",\n\t\"./N3Store\": \"./node_modules/n3/lib/N3Store.js\",\n\t\"./N3Store.js\": \"./node_modules/n3/lib/N3Store.js\",\n\t\"./N3StreamParser\": \"./node_modules/n3/lib/N3StreamParser.js\",\n\t\"./N3StreamParser.js\": \"./node_modules/n3/lib/N3StreamParser.js\",\n\t\"./N3StreamWriter\": \"./node_modules/n3/lib/N3StreamWriter.js\",\n\t\"./N3StreamWriter.js\": \"./node_modules/n3/lib/N3StreamWriter.js\",\n\t\"./N3Util\": \"./node_modules/n3/lib/N3Util.js\",\n\t\"./N3Util.js\": \"./node_modules/n3/lib/N3Util.js\",\n\t\"./N3Writer\": \"./node_modules/n3/lib/N3Writer.js\",\n\t\"./N3Writer.js\": \"./node_modules/n3/lib/N3Writer.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/n3/lib sync recursive ^\\\\.\\\\/N3.*$\";\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./node_modules/n3/lib_sync_^\\.\\/N3.*$?");

/***/ }),

/***/ "./src/api/AnnotationAPI.js":
/*!**********************************!*\
  !*** ./src/api/AnnotationAPI.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n\nvar AnnotationAPI = {\n  annotationServer: null,\n  userDetails: null,\n  permissions: {\n    accessStatus: \"private\" // default setting is private\n\n  },\n  serverNotSet: function serverNotSet() {\n    return Error(\"No annotation server configured.\");\n  },\n  setServerAddress: function setServerAddress(apiURL) {\n    AnnotationAPI.annotationServer = apiURL;\n  },\n  getServerAddress: function getServerAddress() {\n    return AnnotationAPI.annotationServer;\n  },\n  checkServerAvailable: function checkServerAvailable(callback) {\n    fetch(AnnotationAPI.annotationServer, {}).then(function (response) {\n      return response.json(); //}).then((data) => {\n    }).then(function () {\n      return callback(true); //}).catch((error) => {\n    }).catch(function () {\n      return callback(false);\n    });\n  },\n  setUserDetails: function setUserDetails(userDetails) {\n    AnnotationAPI.userDetails = userDetails;\n  },\n  setPermissions: function setPermissions(permissions) {\n    if (permissions.hasOwnProperty(\"accessStatus\")) {\n      if (![\"private\", \"shared\", \"public\"].includes(permissions.accessStatus)) {\n        return Error(\"Invalid accessStatus option. Must be 'private', 'shared' or 'public'\");\n      }\n\n      AnnotationAPI.permissions.accessStatus = permissions.accessStatus;\n    }\n  },\n  getPermissions: function getPermissions() {\n    return AnnotationAPI.permissions;\n  },\n  removeUserDetails: function removeUserDetails() {\n    AnnotationAPI.userDetails = null;\n  },\n  makeRequest: function makeRequest(url, options, callback) {\n    if (!AnnotationAPI.annotationServer) callback(AnnotationAPI.serverNotSet(), null);\n    var status = null;\n    options.cache = \"no-cache\";\n    options.mode = \"cors\";\n\n    if (AnnotationAPI.userDetails) {\n      AnnotationAPI.addAuthorization(options);\n    }\n\n    fetch(url, options).then(function (response) {\n      status = response.status;\n\n      if (status === 204) {\n        return {};\n      }\n\n      return response.json();\n    }).then(function (data) {\n      if (status === 403 && AnnotationAPI.userDetails && AnnotationAPI.userDetails.token) {\n        // token expired, remove token\n        delete AnnotationAPI.userDetails.token;\n        localStorage.setItem(\"userDetails\", JSON.stringify(AnnotationAPI.userDetails));\n      }\n\n      if (status >= 400 && status < 500) {\n        var error = {\n          status: status,\n          message: data.message\n        };\n        return callback(error, null);\n      }\n\n      return callback(null, data);\n    }).catch(function (error) {\n      //console.error(url, error.toString());\n      return callback(error, null);\n    });\n  },\n  addAuthorization: function addAuthorization(options) {\n    if (!options.hasOwnProperty(\"headers\")) {\n      options.headers = {};\n    }\n\n    var authorizationString = \"\";\n\n    if (AnnotationAPI.userDetails.token) {\n      authorizationString = AnnotationAPI.userDetails.token + \":unused\";\n    } else {\n      authorizationString = AnnotationAPI.userDetails.username + \":\" + AnnotationAPI.userDetails.password;\n    }\n\n    options.headers[\"Authorization\"] = \"Basic \" + btoa(authorizationString);\n  },\n  saveAnnotation: function saveAnnotation(annotation, permission, callback) {\n    // default is POSTing a new annotation\n    var url = AnnotationAPI.annotationServer + \"/annotations\";\n    var method = \"POST\"; // if annotation already has an id, it's an update, so PUT\n\n    if (annotation.id) {\n      url = AnnotationAPI.annotationServer + \"/annotations/\" + annotation.id;\n      method = \"PUT\";\n    }\n\n    url = url + \"?access_status=\" + permission;\n    var options = {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(annotation)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getAnnotationById: function getAnnotationById(annotationId, callback) {\n    var url = AnnotationAPI.annotationServer + \"/annotations/\" + annotationId;\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getAnnotations: function getAnnotations(callback) {\n    var url = AnnotationAPI.annotationServer + \"/annotations\";\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getAnnotationsByTarget: function getAnnotationsByTarget(targetId, accessStatus, callback) {\n    if (typeof targetId !== \"string\") {\n      var error = new TypeError(\"resource ID should be string\");\n      return callback(error, null);\n    }\n\n    var url = AnnotationAPI.annotationServer + \"/annotations\" + \"?\" + \"target_id=\" + targetId + \"&access_status=\" + accessStatus.join(\",\") + \"&include_permissions=true\";\n    var options = {\n      headers: {\n        \"Prefer\": \"return=representation;include='http://www.w3.org/ns/oa#PreferContainedDescriptions'\"\n      },\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getAnnotationsByTargets: function getAnnotationsByTargets(targetIds, accessStatus, callback) {\n    var annotations = [];\n    var ids = [];\n    targetIds.forEach(function (targetId, targetIndex) {\n      AnnotationAPI.getAnnotationsByTarget(targetId, accessStatus, function (error, annotationContainer) {\n        if (error) return callback(error, null);\n        var items = [];\n\n        if (annotationContainer.first && annotationContainer.first.hasOwnProperty(\"items\")) {\n          items = annotationContainer.first.items;\n        }\n\n        items.forEach(function (annotation, index) {\n          if (ids.indexOf(annotation.id) === -1) {\n            ids.push(annotation.id);\n            annotations.push(annotation);\n          }\n\n          if (index === items.length - 1 && targetIndex === targetIds.length - 1) {\n            return callback(null, annotations);\n          }\n        });\n\n        if (annotationContainer.total === 0) {\n          if (targetIndex === targetIds.length - 1) {\n            return callback(null, annotations);\n          }\n        }\n      });\n    });\n  },\n  deleteAnnotation: function deleteAnnotation(annotation, callback) {\n    if (!annotation.id) {\n      var error = Error(\"annotation MUST have an id property\");\n      callback(error, null);\n    }\n\n    var url = AnnotationAPI.annotationServer + \"/annotations/\" + annotation.id;\n    var options = {\n      method: \"DELETE\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  deleteAnnotationById: function deleteAnnotationById(annotationId, callback) {\n    var url = AnnotationAPI.annotationServer + \"/annotations/\" + annotationId;\n    var options = {\n      method: \"DELETE\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getCollections: function getCollections(callback) {\n    var url = AnnotationAPI.annotationServer + \"/collections\";\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getCollection: function getCollection(collectionId, callback) {\n    var url = AnnotationAPI.annotationServer + \"/collections/\" + collectionId;\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  getCollectionPage: function getCollectionPage(pageURL, callback) {\n    //let url = AnnotationAPI.annotationServer + '/pages/' + pageId;\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(pageURL, options, function (error, data) {\n      if (error) {\n        return callback(error, null);\n      }\n\n      var items = [];\n\n      if (data && data.first && data.first instanceof Object && data.first.items) {\n        items = data.first.items;\n      }\n\n      return callback(error, items);\n    });\n  },\n  saveCollection: function saveCollection(collection, callback) {\n    var url = AnnotationAPI.annotationServer + \"/collections\";\n    var method = \"POST\"; // if annotation already has an id, it's an update, so PUT\n\n    if (collection.id) {\n      url = AnnotationAPI.annotationServer + \"/collections/\" + collection.id;\n      method = \"PUT\";\n    }\n\n    var options = {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(collection)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  deleteCollection: function deleteCollection(collection, callback) {\n    if (!collection.id) {\n      var error = Error(\"collection MUST have an id property\");\n      callback(error, null);\n    }\n\n    var url = AnnotationAPI.annotationServer + \"/collections/\" + collection.id;\n    var options = {\n      method: \"DELETE\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  addAnnotation: function addAnnotation(collectionId, annotation, callback) {\n    var url = AnnotationAPI.annotationServer + \"/collections/\" + collectionId + \"/annotations/\";\n    var options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(annotation)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  removeAnnotation: function removeAnnotation(collectionId, annotationId, callback) {\n    var url = AnnotationAPI.annotationServer + \"/collections/\" + collectionId + \"/annotations/\" + annotationId;\n    var options = {\n      method: \"DELETE\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  registerUser: function registerUser(userDetails, callback) {\n    var url = AnnotationAPI.annotationServer + \"/users\";\n    var options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userDetails)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, authorizationData) {\n      if (!error) {\n        userDetails.user_id = authorizationData.user.user_id;\n        userDetails.token = authorizationData.user.token;\n        AnnotationAPI.setUserDetails(userDetails);\n      }\n\n      return callback(error, authorizationData);\n    });\n  },\n  loginUser: function loginUser(userDetails, callback) {\n    AnnotationAPI.setUserDetails(userDetails);\n    var url = AnnotationAPI.annotationServer + \"/login\";\n    var options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userDetails)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, authorizationData) {\n      if (!error) {\n        userDetails.user_id = authorizationData.user.user_id;\n        userDetails.token = authorizationData.user.token;\n        AnnotationAPI.setUserDetails(userDetails);\n      }\n\n      return callback(error, authorizationData);\n    });\n  },\n  logoutUser: function logoutUser(callback) {\n    var url = AnnotationAPI.annotationServer + \"/logout\";\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      AnnotationAPI.removeUserDetails();\n      return callback(error, data);\n    });\n  },\n  deleteUser: function deleteUser(userDetails, callback) {\n    var url = AnnotationAPI.annotationServer + \"/users\";\n    var options = {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": \"Basic \" + btoa(userDetails.username + \":\" + userDetails.password)\n      }\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      AnnotationAPI.removeUserDetails();\n      return callback(error, data);\n    });\n  },\n  checkResource: function checkResource(resourceId, callback) {\n    var url = AnnotationAPI.annotationServer + \"/resources/\" + resourceId;\n    var options = {\n      method: \"GET\"\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  },\n  registerResource: function registerResource(resourceMap, callback) {\n    var url = AnnotationAPI.annotationServer + \"/resources\";\n    var options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(resourceMap)\n    };\n    AnnotationAPI.makeRequest(url, options, function (error, data) {\n      return callback(error, data);\n    });\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnnotationAPI);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/api/AnnotationAPI.js?");

/***/ }),

/***/ "./src/components/AnnotationClient.jsx":
/*!*********************************************!*\
  !*** ./src/components/AnnotationClient.jsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AnnotationClient; });\n/* harmony import */ var _ViewSelector_jsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ViewSelector.jsx */ \"./src/components/ViewSelector.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _annotation_AnnotationViewer_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./annotation/AnnotationViewer.jsx */ \"./src/components/annotation/AnnotationViewer.jsx\");\n/* harmony import */ var _collection_CollectionViewer_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection/CollectionViewer.jsx */ \"./src/components/collection/CollectionViewer.jsx\");\n/* harmony import */ var _resource_ResourceViewer_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resource/ResourceViewer.jsx */ \"./src/components/resource/ResourceViewer.jsx\");\n/* harmony import */ var _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../util/AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var _LoginBox__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./LoginBox */ \"./src/components/LoginBox.jsx\");\n/*\n * annotate-rdfa.js allows user to select RDFA-labeled text fragments\n * in RDFa enriched HTML documents.\n *\n */\n// TO DO: deal with elements that have multiple types\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\n\n //import '../css/swa.css';\n\nvar AnnotationClient =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnnotationClient, _React$Component);\n\n  function AnnotationClient(props) {\n    var _this;\n\n    _classCallCheck(this, AnnotationClient);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnnotationClient).call(this, props));\n    _this.state = {\n      user: null,\n      view: \"annotations\",\n      serverAvailable: false,\n      accessStatus: _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].accessStatus //accessStatus: [\"private\", \"public\"],\n\n    };\n    return _this;\n  }\n\n  _createClass(AnnotationClient, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].bind('login-succeeded', this.setUser.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].bind('register-succeeded', this.setUser.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].bind('logout-user', this.setUser.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].bind('server-status-change', this.setServerAvailable.bind(this));\n    }\n  }, {\n    key: \"setServerAvailable\",\n    value: function setServerAvailable(serverAvailable) {\n      this.setState({\n        serverAvailable: serverAvailable\n      });\n    }\n  }, {\n    key: \"setUser\",\n    value: function setUser(user) {\n      this.setState({\n        user: user\n      });\n    }\n  }, {\n    key: \"handleAccessPreferenceChange\",\n    value: function handleAccessPreferenceChange(event) {\n      var level = event.target.value;\n      var accessStatus = this.state.accessStatus;\n\n      if (!accessStatus.includes(level)) {\n        accessStatus.push(level);\n      } else {\n        accessStatus.splice(accessStatus.indexOf(level), 1);\n      }\n\n      this.setState({\n        accessStatus: accessStatus\n      });\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setAccessStatus(accessStatus);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var component = this;\n      var annotationViewer = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_annotation_AnnotationViewer_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        currentUser: this.state.user,\n        config: this.props.config\n      });\n      var collectionViewer = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_collection_CollectionViewer_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n        currentUser: this.state.user,\n        config: this.props.config\n      });\n      /*\n      let resourceViewer = null;\n      */\n\n      var resourceViewer = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_resource_ResourceViewer_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n        currentUser: this.state.user,\n        config: this.props.config\n      }); //let itemTypes = [\"annotations\", \"resources\"];\n\n      var itemTypes = [\"annotations\", \"collections\", \"resources\"];\n      var viewer;\n      var viewerTabContents = itemTypes.map(function (itemType) {\n        if (itemType === \"annotations\") viewer = annotationViewer;\n        if (itemType === \"collections\") viewer = collectionViewer;\n        if (itemType === \"resources\") viewer = resourceViewer;\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n          key: itemType + '__tab_content',\n          id: itemType,\n          className: _this2.state.view === itemType ? 'tab-pane active' : 'tab-pane'\n        }, viewer);\n      });\n      var accessPreferences = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"access-preferences\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", null, \"Show:\"), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"label\", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"input\", {\n        type: \"checkbox\",\n        value: \"private\",\n        checked: this.state.accessStatus.includes(\"private\"),\n        onChange: this.handleAccessPreferenceChange.bind(this)\n      }), \"Private annotations\")), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"label\", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"input\", {\n        type: \"checkbox\",\n        value: \"public\",\n        checked: this.state.accessStatus.includes(\"public\"),\n        onChange: this.handleAccessPreferenceChange.bind(this)\n      }), \"Public annotations\")));\n      var viewerTabs = itemTypes.map(function (itemType) {\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"li\", {\n          key: itemType + '__tab_option',\n          className: \"nav-item viewer-tab \"\n        }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"a\", {\n          \"data-toggle\": \"tab\",\n          href: '#' + itemType,\n          className: component.state.view === itemType ? 'nav-link active' : 'nav-link'\n        }, itemType));\n      });\n      var indicator = \"led-red\";\n\n      if (this.state.serverAvailable) {\n        indicator = \"led-green\";\n      }\n\n      var serverAvailable = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: indicator\n      });\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"annotationClient\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"h1\", {\n        className: \"col\"\n      }, \"Annotator\"), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"col-auto\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_LoginBox__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n        user: this.state.user\n      }))), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"server-status row\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"col\"\n      }, \"Annotation server status:\"), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"col-auto\"\n      }, serverAvailable)), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"ul\", {\n        className: \"nav nav-tabs nav-fill viewer-tabs\"\n      }, viewerTabs), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"tab-content\"\n      }, accessPreferences, viewerTabContents)));\n    }\n  }]);\n\n  return AnnotationClient;\n}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/AnnotationClient.jsx?");

/***/ }),

/***/ "./src/components/FlexModal.jsx":
/*!**************************************!*\
  !*** ./src/components/FlexModal.jsx ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\nvar FlexModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FlexModal, _React$Component);\n\n  function FlexModal(props) {\n    var _this;\n\n    _classCallCheck(this, FlexModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FlexModal).call(this, props));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(FlexModal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.findDOMNode(this)).modal({\n        keyboard: true\n      });\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.findDOMNode(this)).modal('show');\n      jquery__WEBPACK_IMPORTED_MODULE_2___default()(react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.findDOMNode(this)).on('hidden.bs.modal', this.props.handleHideModal);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        id: this.props.elementId,\n        className: \"modal fade\",\n        role: \"dialog\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"modal-dialog modal-lg flex-modal\",\n        role: \"document\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"modal-content\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"modal-header\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", {\n        className: \"modal-title\"\n      }, this.props.title), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        type: \"button\",\n        className: \"close\",\n        \"data-dismiss\": \"modal\",\n        \"aria-label\": \"Close\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        \"aria-hidden\": \"true\"\n      }, \"\\xD7\"))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"modal-body\"\n      }, this.props.children), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"modal-footer\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        onClick: this.props.confirmAction,\n        \"data-dismiss\": \"modal\"\n      }, this.props.confirmLabel), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        \"data-dismiss\": \"modal\"\n      }, \"Cancel\")))));\n    }\n  }]);\n\n  return FlexModal;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FlexModal);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/FlexModal.jsx?");

/***/ }),

/***/ "./src/components/LoginBox.jsx":
/*!*************************************!*\
  !*** ./src/components/LoginBox.jsx ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _FlexModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FlexModal */ \"./src/components/FlexModal.jsx\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../flux/AnnotationActions */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar LoginBox =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LoginBox, _React$Component);\n\n  function LoginBox(props) {\n    var _this;\n\n    _classCallCheck(this, LoginBox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginBox).call(this, props));\n    _this.state = {\n      selectedAction: \"login\",\n      username: \"\",\n      password: \"\",\n      warning: \"\",\n      showLoginModal: false,\n      user: null,\n      loggedIn: false,\n      loginButtonLabel: \"Login\"\n    };\n    return _this;\n  }\n\n  _createClass(LoginBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('login-succeeded', this.loginSuccess.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('register-succeeded', this.loginSuccess.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('login-failed', this.loginFailed.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind('register-failed', this.loginFailed.bind(this));\n    }\n  }, {\n    key: \"handleLogin\",\n    value: function handleLogin() {\n      if (!this.state.loggedIn) {\n        this.setState({\n          showLoginModal: true\n        });\n      } else {\n        this.setState({\n          user: null,\n          loggedIn: false,\n          loginButtonLabel: \"Login\"\n        });\n        _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].logoutUser();\n        localStorage.removeItem(\"userDetails\");\n      }\n    }\n  }, {\n    key: \"loginSuccess\",\n    value: function loginSuccess(userDetails) {\n      this.setState({\n        user: userDetails,\n        loggedIn: true,\n        loginButtonLabel: \"Logout \" + userDetails.username,\n        warning: null\n      });\n      localStorage.setItem(\"userDetails\", JSON.stringify(userDetails));\n      this.hideLoginForm();\n    }\n  }, {\n    key: \"loginFailed\",\n    value: function loginFailed(error) {\n      this.setState({\n        warning: error.message\n      });\n    }\n  }, {\n    key: \"showLoginForm\",\n    value: function showLoginForm() {\n      this.setState({\n        showLoginModal: true\n      });\n    }\n  }, {\n    key: \"hideLoginForm\",\n    value: function hideLoginForm() {\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('#login__modal').modal('hide'); //TODO ugly, but without this the static backdrop won't disappear!\n\n      this.setState({\n        showLoginModal: false\n      });\n    }\n  }, {\n    key: \"handlePasswordChange\",\n    value: function handlePasswordChange(e) {\n      this.setState({\n        password: e.target.value\n      });\n    }\n  }, {\n    key: \"handleUsernameChange\",\n    value: function handleUsernameChange(e) {\n      this.setState({\n        username: e.target.value\n      });\n    }\n  }, {\n    key: \"handleActionChange\",\n    value: function handleActionChange(e) {\n      this.setState({\n        selectedAction: e.target.value\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      e.preventDefault();\n      var userDetails = {\n        username: this.state.username,\n        password: this.state.password\n      };\n\n      if (this.state.selectedAction === \"register\") {\n        _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].registerUser(userDetails);\n      } else {\n        _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].loginUser(userDetails);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.showModal = this.state.showLoginModal;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-light\",\n        onClick: this.handleLogin.bind(this)\n      }, this.state.loginButtonLabel), this.showModal ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FlexModal__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        elementId: \"login__modal\",\n        handleHideModal: this.hideLoginForm.bind(this),\n        title: \"Login or Register\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"container-fluid\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-12 text-right\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"btn-group btn-group-toggle\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: this.state.selectedAction === \"login\" ? \"btn btn-primary active\" : \"btn btn-primary\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"radio\",\n        value: \"login\",\n        checked: this.state.selectedAction === \"login\",\n        onChange: this.handleActionChange.bind(this)\n      }), \" Login\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: this.state.selectedAction === \"register\" ? \"btn btn-primary active\" : \"btn btn-primary\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"radio\",\n        value: \"register\",\n        checked: this.state.selectedAction === \"register\",\n        onChange: this.handleActionChange.bind(this)\n      }), \" Register\")))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"form\", {\n        className: \"loginForm\",\n        onSubmit: this.handleSubmit.bind(this)\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        htmlFor: \"loginBoxUsername\"\n      }, \"Username\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        id: \"loginBoxUsername\",\n        type: \"text\",\n        placeholder: \"username\",\n        value: this.state.username,\n        onChange: this.handleUsernameChange.bind(this),\n        className: this.state.warning ? \"form-control is-invalid\" : \"form-control\"\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"invalid-feedback\"\n      }, this.state.warning)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        htmlFor: \"loginBoxPassword\"\n      }, \"Password\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        id: \"loginBoxPassword\",\n        type: \"password\",\n        placeholder: \"password\",\n        value: this.state.password,\n        onChange: this.handlePasswordChange.bind(this),\n        className: this.state.warning ? \"form-control is-invalid\" : \"form-control\"\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"invalid-feedback\"\n      }, this.state.warning))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-12\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", {\n        className: \"text-right\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        value: this.state.selectedAction === \"login\" ? \"Login\" : \"Register\"\n      }))))))) : null);\n    }\n  }]);\n\n  return LoginBox;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (LoginBox);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/LoginBox.jsx?");

/***/ }),

/***/ "./src/components/ViewSelector.jsx":
/*!*****************************************!*\
  !*** ./src/components/ViewSelector.jsx ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ViewSelector; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../util/AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\n\n\nvar ViewSelector =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ViewSelector, _React$Component);\n\n  function ViewSelector(props) {\n    var _this;\n\n    _classCallCheck(this, ViewSelector);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ViewSelector).call(this, props));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.modes = [\"annotations\", \"collections\", \"resources\"];\n    _this.state = {\n      currentMode: \"annotations\"\n    };\n    return _this;\n  }\n\n  _createClass(ViewSelector, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      console.log(event.target.value);\n      this.setState({\n        currentMode: event.target.value\n      });\n      this.props.handleViewChange(event.target.value);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var modes = this.modes.map(function (mode) {\n        var modeId = \"view-selector-\" + mode;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"option\", {\n          key: modeId,\n          value: mode\n        }, mode);\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"ViewSelector\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"select\", {\n        value: this.state.currentMode,\n        onChange: this.handleChange\n      }, modes));\n    }\n  }]);\n\n  return ViewSelector;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/ViewSelector.jsx?");

/***/ }),

/***/ "./src/components/annotation/Annotation.jsx":
/*!**************************************************!*\
  !*** ./src/components/annotation/Annotation.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../flux/AnnotationStore.js */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_CollectionStore_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../flux/CollectionStore.js */ \"./src/flux/CollectionStore.js\");\n/* harmony import */ var _FlexModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../FlexModal */ \"./src/components/FlexModal.jsx\");\n/* harmony import */ var _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../../util/AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/* harmony import */ var _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../../util/SelectionUtil.js */ \"./src/util/SelectionUtil.js\");\n/* harmony import */ var _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../../util/TargetUtil.js */ \"./src/util/TargetUtil.js\");\n/* harmony import */ var _util_TimeUtil__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../util/TimeUtil */ \"./src/util/TimeUtil.js\");\n/* harmony import */ var _util_RDFaUtil__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../util/RDFaUtil */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _util_FRBRooUtil__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../util/FRBRooUtil */ \"./src/util/FRBRooUtil.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Annotation =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Annotation, _React$Component);\n\n  function Annotation(props) {\n    var _this;\n\n    _classCallCheck(this, Annotation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Annotation).call(this, props));\n    _this.state = {\n      highlighted: false\n    };\n    return _this;\n  }\n\n  _createClass(Annotation, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        targetDOMElements: _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mapTargetsToDOMElements(this.props.annotation)\n      });\n    }\n  }, {\n    key: \"canEdit\",\n    value: function canEdit() {\n      return this.props.currentUser && this.props.currentUser.username === this.props.annotation.creator ? true : false;\n    }\n  }, {\n    key: \"canDelete\",\n    value: function canDelete() {\n      return this.props.currentUser && this.props.currentUser.username === this.props.annotation.creator ? true : false;\n    }\n  }, {\n    key: \"canCopy\",\n    value: function canCopy() {\n      return this.props.currentUser ? true : false;\n      var allowed = true; // TODO: implement permission check (what should permission check be?)\n\n      return allowed;\n    }\n  }, {\n    key: \"editAnnotationTarget\",\n    value: function editAnnotationTarget(annotation) {// ask for adding, changing or removing target\n      // if target is resource, allow new resource selection\n      // if target is annotation, allow new annotation selection\n      // TODO: implement changing target\n    }\n  }, {\n    key: \"editAnnotationBody\",\n    value: function editAnnotationBody(annotation) {\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].edit(annotation);\n    }\n  }, {\n    key: \"copyAnnotation\",\n    value: function copyAnnotation(annotation) {\n      var confirm = window.confirm(\"Are you sure you want to copy this annotation?\");\n\n      if (confirm) {\n        _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].copyAnnotation(annotation);\n      }\n    }\n  }, {\n    key: \"deleteAnnotation\",\n    value: function deleteAnnotation(annotation) {\n      var confirm = window.confirm(\"Are you sure you want to delete this annotation?\");\n\n      if (confirm) {\n        _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].delete(annotation);\n      }\n    }\n  }, {\n    key: \"toggleHighlight\",\n    value: function toggleHighlight() {\n      _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toggleHighlight(this.state.targetDOMElements, this.state.highlighted);\n      this.setState({\n        highlighted: this.state.highlighted ? false : true\n      });\n    }\n  }, {\n    key: \"computeClass\",\n    value: function computeClass() {\n      var className = 'list-group-item';\n      if (this.state.highlighted) className += ' active';\n      return className;\n    }\n  }, {\n    key: \"onMouseOverHandler\",\n    value: function onMouseOverHandler(crumb) {\n      crumb.node.style.border += \" 1px solid red\";\n    }\n  }, {\n    key: \"onMouseOutHandler\",\n    value: function onMouseOutHandler(crumb) {\n      var index = crumb.node.style.border.indexOf(\" 1px solid red\");\n      crumb.node.style.border = crumb.node.style.border.substr(0, index);\n    }\n  }, {\n    key: \"createResourceTarget\",\n    value: function createResourceTarget(target, source, targetCount) {\n      var _this2 = this;\n\n      var component = this;\n      var text = \"\";\n\n      if (target.type === \"Text\") {\n        text = _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getTargetText(target, source);\n      } else if (target.type === \"Image\") {\n        var selector = _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getTargetMediaFragment(target);\n        var rect = selector.rect;\n        var topLeft = selector.rect.x + ',' + selector.rect.y;\n        var bottomRight = selector.rect.x + selector.rect.w + ',' + (selector.rect.y + selector.rect.h);\n        text = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, '[' + topLeft + ' - ' + bottomRight + ']');\n      } else if (target.type === \"Video\") {\n        var _selector = _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getTargetMediaFragment(target);\n\n        var segment = _selector.interval;\n        text = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, '[' + _util_TimeUtil__WEBPACK_IMPORTED_MODULE_8__[\"default\"].formatTime(segment.start) + ' - ' + _util_TimeUtil__WEBPACK_IMPORTED_MODULE_8__[\"default\"].formatTime(segment.end) + ']');\n      } //console.log(\"createResourceTarget - text:\", text);\n      //console.log(\"source:\", source);\n\n\n      if (text.length > 40) {\n        text = text.substr(0, 37) + \"...\";\n      } //console.log(\"Annotation - source:\", source);\n\n\n      var breadcrumbs = _util_RDFaUtil__WEBPACK_IMPORTED_MODULE_9__[\"default\"].createBreadcrumbTrail(source.data.rdfaResource); //console.log(\"Annotation - breadcrumbs:\", breadcrumbs);\n\n      var breadcrumbLabels = breadcrumbs.map(function (crumb, index) {\n        var next = \" > \";\n        if (!index) next = \"\";\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          key: \"crumb\" + index,\n          onMouseOver: component.onMouseOverHandler.bind(_this2, crumb),\n          onMouseOut: component.onMouseOutHandler.bind(_this2, crumb)\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          title: crumb.property\n        }, next), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-info\",\n          title: \"Identifier: \" + crumb.id\n        }, crumb.type), \"\\xA0\");\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: targetCount\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"breadcrumbs\"\n      }, breadcrumbLabels), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"badge badge-warning\"\n      }, \"Target content\"), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"annotation-text\"\n      }, text));\n    }\n  }, {\n    key: \"createExternalTarget\",\n    value: function createExternalTarget(target, source, targetCount) {\n      var text = \"\"; //console.log(target);\n      //console.log(\"createExternalTarget - source:\", source);\n\n      if (target.type === \"Text\") {\n        text = _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getTargetText(target, source);\n      }\n\n      var breadcrumbs = _util_FRBRooUtil__WEBPACK_IMPORTED_MODULE_10__[\"default\"].createBreadcrumbTrail(_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex, target.source); //console.log(\"breadcrumbs:\", breadcrumbs);\n\n      var breadcrumbLabels = breadcrumbs.map(function (crumb, index) {\n        var next = \" > \";\n        if (!index) next = \"\";\n        var crumbType = crumb.type[0].substr(crumb.type[0].indexOf(\"#\") + 1);\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          key: \"crumb\" + index\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          title: crumb.property\n        }, next), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-secondary\",\n          title: \"Identifier: \" + crumb.id\n        }, crumbType), \"\\xA0\");\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: targetCount\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"breadcrumbs\"\n      }, breadcrumbLabels), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"badge badge-warning\"\n      }, \"Target content\"), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"annotation-text\"\n      }, text));\n    }\n  }, {\n    key: \"createAnnotationTarget\",\n    value: function createAnnotationTarget(target, source) {\n      var body = _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].extractBodies(source.data)[0];\n      var label = body.type;\n      var text = body.value;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: targetCount\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"badge badge-success\"\n      }, label), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"annotation-text\"\n      }, text));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var component = this;\n      var annotation = component.props.annotation;\n      var bodyCount = 0;\n      var timestamp = new Date(annotation.created).toLocaleString();\n      var bodies = _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].extractBodies(annotation).map(function (body) {\n        bodyCount++;\n        var bodyText = body.value; //if (bodyText.length > 100) {\n        //    bodyText = bodyText.substr(0, 97) + \"...\";\n        //}\n        //\n        //data-toggle=\"popover\"\n        //data-trigger=\"hover\"\n        //data-content={body.value}\n        //data-placement=\"top\"\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          key: bodyCount\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-success\"\n        }, body.purpose), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"annotation-text\"\n        }, bodyText));\n      });\n      var targetCount = 0; //console.log(\"annotation:\", annotation);\n\n      var targets = _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].extractTargets(annotation).map(function (target) {\n        //console.log(\"target:\", target);\n        try {\n          targetCount++; //console.log(target);\n\n          var source = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].lookupIdentifier(_util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].extractTargetIdentifier(target)); //console.log(\"Annotation render - source:\", source);\n\n          var text = \"\";\n          var label;\n\n          if (source.type === \"external\") {\n            //console.log(\"createExternalTarget\");\n            return _this3.createExternalTarget(target, source, targetCount);\n          }\n\n          if (source.type === \"resource\") {\n            //console.log(\"type: resource\");\n            //console.log(\"source:\", source);\n            return _this3.createResourceTarget(target, source, targetCount);\n          } else if (source.type === \"annotation\") {\n            return _this3.createAnnotationTarget(target, source);\n          } else if (source.type === undefined) {\n            console.error(\"source.type is not defined, showing content of annotation target and associated indexed source\", target, source);\n          }\n        } catch (error) {\n          // filter out annotation targets that result in errors;\n          //console.log(\"ERROR in annotation target:\", target)\n          return undefined;\n        }\n      }).filter(function (target) {\n        return target !== undefined;\n      });\n\n      var renderEditBody = function renderEditBody() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-primary\",\n          onClick: function onClick() {\n            component.editAnnotationBody(annotation);\n          }\n        }, \"edit body\");\n      };\n\n      var renderEditTarget = function renderEditTarget() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-warning\",\n          onClick: function onClick() {\n            component.editAnnotationTarget(annotation);\n          }\n        }, \"edit target\");\n      };\n\n      var renderDelete = function renderDelete() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-danger\",\n          onClick: function onClick() {\n            component.deleteAnnotation(annotation);\n          }\n        }, \"delete\");\n      };\n\n      var renderCopy = function renderCopy() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-success\",\n          onClick: function onClick() {\n            component.copyAnnotation(annotation);\n          }\n        }, \"copy\");\n      };\n\n      var makeOptions = function makeOptions() {\n        var editBody = component.canEdit() ? renderEditBody() : \"\";\n        var editTarget = component.canEdit() ? renderEditTarget() : \"\";\n        var del = component.canDelete() ? renderDelete() : \"\";\n        var copy = component.canCopy() ? renderCopy() : \"\";\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, editBody, \" \", editTarget, \" \", del, \" \", copy);\n      };\n\n      var options = makeOptions();\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n        className: component.computeClass(),\n        title: annotation.id\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        onClick: component.toggleHighlight.bind(this)\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"abbr\", null, timestamp, \"\\xA0 (created by: \", annotation.creator, \")\"), targets, bodies, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null)), options);\n    }\n  }]);\n\n  return Annotation;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Annotation);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/Annotation.jsx?");

/***/ }),

/***/ "./src/components/annotation/AnnotationCreator.jsx":
/*!*********************************************************!*\
  !*** ./src/components/annotation/AnnotationCreator.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _TargetCreator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TargetCreator */ \"./src/components/annotation/TargetCreator.jsx\");\n/* harmony import */ var _BodyCreator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BodyCreator */ \"./src/components/annotation/BodyCreator.jsx\");\n/* harmony import */ var _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../util/TargetUtil.js */ \"./src/util/TargetUtil.js\");\n/* harmony import */ var _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../util/AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/* harmony import */ var _FlexModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../FlexModal */ \"./src/components/FlexModal.jsx\");\n/* harmony import */ var _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../flux/AnnotationActions */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\n\n\n\n\n\n\n\nvar AnnotationCreator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnnotationCreator, _React$Component);\n\n  function AnnotationCreator(props) {\n    var _this;\n\n    _classCallCheck(this, AnnotationCreator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnnotationCreator).call(this, props));\n    _this.selectTargets = _this.selectTargets.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onHide = _this.onHide.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      permission: \"private\",\n      showModal: null,\n      annotations: [],\n      selectedTargets: [],\n      createdBodies: {},\n      create: null\n    };\n    return _this;\n  }\n\n  _createClass(AnnotationCreator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_8__[\"default\"].bind('loaded-annotations', this.setAnnotations.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_8__[\"default\"].bind('create-annotation', this.createAnnotation.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_8__[\"default\"].bind('edit-annotation', this.editAnnotationBody.bind(this));\n    }\n  }, {\n    key: \"setAnnotations\",\n    value: function setAnnotations(annotations) {\n      this.setState({\n        annotations: annotations\n      });\n    }\n  }, {\n    key: \"onHide\",\n    value: function onHide() {\n      jquery__WEBPACK_IMPORTED_MODULE_7___default()('#annotation__modal').modal('hide'); //TODO ugly, but without this the static backdrop won't disappear!\n    }\n  }, {\n    key: \"selectTargets\",\n    value: function selectTargets() {\n      var candidates = _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCandidates(this.state.annotations, this.props.config.defaults.target); //console.log(\"selectTarget - candidates:\", candidates);\n\n      this.setState({\n        editAnnotation: null,\n        candidates: candidates,\n        showModal: true,\n        create: \"target\",\n        createdBodies: {}\n      });\n    }\n  }, {\n    key: \"hideAnnotationForm\",\n    value: function hideAnnotationForm() {\n      jquery__WEBPACK_IMPORTED_MODULE_7___default()('#annotation__modal').modal('hide'); //TODO ugly, but without this the static backdrop won't disappear!\n\n      this.setState({\n        showModal: false,\n        selectedTargets: [],\n        createdBodies: {}\n      });\n    }\n  }, {\n    key: \"editAnnotationBody\",\n    value: function editAnnotationBody(annotation) {\n      this.setState({\n        editAnnotation: annotation,\n        createdBodies: this.categorizeBodies(annotation.body),\n        showModal: true,\n        create: \"body\"\n      });\n    }\n  }, {\n    key: \"addMotivations\",\n    value: function addMotivations() {\n      this.setState({\n        showModal: true,\n        create: \"body\"\n      });\n    }\n  }, {\n    key: \"addTargets\",\n    value: function addTargets() {\n      this.setState({\n        showModal: true,\n        create: \"target\"\n      });\n    }\n  }, {\n    key: \"setTargets\",\n    value: function setTargets(selectedTargets) {\n      this.setState({\n        selectedTargets: selectedTargets\n      });\n    }\n  }, {\n    key: \"setBodies\",\n    value: function setBodies(createdBodies) {\n      this.setState({\n        createdBodies: createdBodies\n      });\n    }\n  }, {\n    key: \"createAnnotation\",\n    value: function createAnnotation(annotationTargets) {\n      var annotation = _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].generateW3CAnnotation(annotationTargets, this.props.currentUser.username);\n      annotation.body = this.listBodies(this.state.createdBodies);\n      this.editAnnotationBody(annotation);\n    }\n  }, {\n    key: \"gatherDataAndSave\",\n    value: function gatherDataAndSave() {\n      var component = this;\n\n      if (this.state.editAnnotation) {\n        var annotation = this.state.editAnnotation;\n      } else {\n        var annotation = _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].generateW3CAnnotation(this.state.selectedTargets, this.props.currentUser.username);\n      }\n\n      var bodies = this.listBodies(this.state.createdBodies);\n\n      if (bodies.length === 0) {\n        alert(\"Cannot save annotation without content. Please add at least one motivation.\");\n      } else {\n        annotation.body = bodies;\n        _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_6__[\"default\"].save(annotation);\n        this.hideAnnotationForm();\n      }\n    }\n  }, {\n    key: \"handlePermissionChange\",\n    value: function handlePermissionChange(event) {\n      this.setState({\n        permission: event.target.value\n      });\n      _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_6__[\"default\"].setPermission(event.target.value);\n    }\n  }, {\n    key: \"listBodies\",\n    value: function listBodies(createdBodies) {\n      var bodies = [];\n      Object.keys(createdBodies).forEach(function (bodyType) {\n        bodies = bodies.concat(createdBodies[bodyType]);\n      });\n      return bodies;\n    }\n  }, {\n    key: \"categorizeBodies\",\n    value: function categorizeBodies(bodies) {\n      var createdBodies = {};\n      bodies.forEach(function (body) {\n        if (!createdBodies[body.type]) createdBodies[body.type] = [];\n        createdBodies[body.type].push(body);\n      });\n      return createdBodies;\n    }\n  }, {\n    key: \"hasTarget\",\n    value: function hasTarget() {\n      return this.state.selectedTargets.length > 0 || this.state.editAnnotation !== null;\n    }\n  }, {\n    key: \"hasBody\",\n    value: function hasBody() {\n      var bodies = this.listBodies(this.state.createdBodies);\n      return bodies.length > 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var targetCreator = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_TargetCreator__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        selectedTargets: this.state.selectedTargets,\n        addMotivations: this.addMotivations.bind(this),\n        setTargets: this.setTargets.bind(this),\n        candidates: this.state.candidates,\n        annotations: this.state.annotations,\n        defaultTargets: this.props.config.defaults.target,\n        permission: this.state.permission\n      });\n      var bodyCreator = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_BodyCreator__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        createdBodies: this.state.createdBodies,\n        addTargets: this.addTargets.bind(this),\n        setBodies: this.setBodies.bind(this),\n        currentUser: this.props.currentUser,\n        annotationTasks: this.props.config.annotationTasks,\n        services: this.props.config.services,\n        hideAnnotationForm: this.onHide.bind(this),\n        permission: this.state.permission\n      });\n      var canSave = this.hasTarget() && this.hasBody();\n      var creatorButtons = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"creator-view-buttons col-12\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        disabled: !this.state.candidates,\n        onClick: this.addTargets.bind(this)\n      }, \"Show targets\"), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        disabled: this.state.selectedTargets.length === 0,\n        onClick: this.addMotivations.bind(this)\n      }, \"Show content\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"permission-switch \"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", null, \"Private\"), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"radio\",\n        value: \"private\",\n        checked: this.state.permission === \"private\",\n        onChange: this.handlePermissionChange.bind(this)\n      }), \"\\xA0 \\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"radio\",\n        value: \"public\",\n        checked: this.state.permission === \"public\",\n        onChange: this.handlePermissionChange.bind(this)\n      }), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", null, \"Public\"))));\n      var creator = this.state.create === \"target\" ? targetCreator : bodyCreator;\n      var titleLabel = this.state.create === \"target\" ? \"targets\" : \"content\";\n      var title = \"Add one or more annotation \" + titleLabel;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, this.props.currentUser ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-light\",\n        onClick: this.selectTargets.bind(this)\n      }, \"Make annotation\") : null, this.state.showModal ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FlexModal__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n        elementId: \"annotation__modal\",\n        handleHideModal: this.hideAnnotationForm.bind(this),\n        confirmLabel: \"Save\",\n        confirmAction: this.gatherDataAndSave.bind(this),\n        title: title\n      }, creatorButtons, creator) : null);\n    }\n  }]);\n\n  return AnnotationCreator;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnnotationCreator);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/AnnotationCreator.jsx?");

/***/ }),

/***/ "./src/components/annotation/AnnotationList.jsx":
/*!******************************************************!*\
  !*** ./src/components/annotation/AnnotationList.jsx ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../flux/AnnotationActions */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var _Annotation_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Annotation.jsx */ \"./src/components/annotation/Annotation.jsx\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar AnnotationList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnnotationList, _React$Component);\n\n  function AnnotationList(props) {\n    var _this;\n\n    _classCallCheck(this, AnnotationList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnnotationList).call(this, props));\n    _this.state = {\n      annotations: []\n    };\n    return _this;\n  }\n\n  _createClass(AnnotationList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind('loaded-annotations', this.setAnnotations.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind('load-annotations', this.loadAnnotations.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind('changed-target', this.loadAnnotations.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind('deleted-annotation', this.loadAnnotations.bind(this));\n    }\n  }, {\n    key: \"loadAnnotations\",\n    value: function loadAnnotations() {\n      _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_2__[\"default\"].loadAnnotations();\n    }\n  }, {\n    key: \"setAnnotations\",\n    value: function setAnnotations(annotations) {\n      this.setState({\n        annotations: annotations\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var annotationItems = null;\n      var component = this;\n\n      if (this.state.annotations) {\n        annotationItems = this.state.annotations.map(function (annotation) {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Annotation_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n            annotation: annotation,\n            key: annotation.id,\n            currentUser: component.props.currentUser\n          });\n        });\n      }\n\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()(function () {\n        jquery__WEBPACK_IMPORTED_MODULE_4___default()(\"[data-toggle=popover]\").popover();\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"annotationList\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, \"Stored Annotations\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"list-group annotation-scroll-list\"\n      }, annotationItems));\n    }\n  }]);\n\n  return AnnotationList;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnnotationList);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/AnnotationList.jsx?");

/***/ }),

/***/ "./src/components/annotation/AnnotationViewer.jsx":
/*!********************************************************!*\
  !*** ./src/components/annotation/AnnotationViewer.jsx ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AnnotationViewer; });\n/* harmony import */ var _AnnotationCreator_jsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AnnotationCreator.jsx */ \"./src/components/annotation/AnnotationCreator.jsx\");\n/* harmony import */ var _AnnotationList_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AnnotationList.jsx */ \"./src/components/annotation/AnnotationList.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../util/AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/*\n * annotate-rdfa.js allows user to select RDFA-labeled text fragments\n * in RDFa enriched HTML documents.\n *\n */\n// TO DO: deal with elements that have multiple types\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\nvar AnnotationViewer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnnotationViewer, _React$Component);\n\n  function AnnotationViewer(props) {\n    var _this;\n\n    _classCallCheck(this, AnnotationViewer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnnotationViewer).call(this, props));\n    _this.state = {\n      view: \"annotations\"\n    };\n    return _this;\n  }\n\n  _createClass(AnnotationViewer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"annotationViewer\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_AnnotationCreator_jsx__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n        currentUser: this.props.currentUser,\n        config: this.props.config\n      }), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_AnnotationList_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        currentUser: this.props.currentUser,\n        config: this.props.config\n      }));\n    }\n  }]);\n\n  return AnnotationViewer;\n}(react__WEBPACK_IMPORTED_MODULE_2___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/AnnotationViewer.jsx?");

/***/ }),

/***/ "./src/components/annotation/BodyCreator.jsx":
/*!***************************************************!*\
  !*** ./src/components/annotation/BodyCreator.jsx ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _FreetextForm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FreetextForm */ \"./src/components/annotation/FreetextForm.jsx\");\n/* harmony import */ var _ClassifyingForm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ClassifyingForm */ \"./src/components/annotation/ClassifyingForm.jsx\");\n/* harmony import */ var _LinkingForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LinkingForm */ \"./src/components/annotation/LinkingForm.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\nvar BodyCreator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BodyCreator, _React$Component);\n\n  function BodyCreator(props) {\n    var _this;\n\n    _classCallCheck(this, BodyCreator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BodyCreator).call(this, props));\n    var activeTab = null;\n\n    for (var i = 0; i < Object.keys(_this.props.annotationTasks).length; i++) {\n      if (Object.keys(_this.props.annotationTasks)[i] != 'bookmark') {\n        activeTab = Object.keys(_this.props.annotationTasks)[i];\n        break;\n      }\n    }\n\n    _this.state = {\n      activeTab: activeTab,\n      bodies: _this.props.createdBodies,\n      defaultCollection: null\n    };\n    return _this;\n  }\n\n  _createClass(BodyCreator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"closeSelectorModal\",\n    value: function closeSelectorModal() {\n      this.setState({\n        showSelectorModal: false\n      });\n    }\n  }, {\n    key: \"updateAnnotationBody\",\n    value: function updateAnnotationBody(annotationMode, value) {\n      var bodies = this.state.bodies;\n      bodies[annotationMode] = value;\n      this.setState({\n        bodies: bodies\n      });\n      this.props.setBodies(bodies);\n    }\n  }, {\n    key: \"addTargets\",\n    value: function addTargets() {\n      this.props.addTargets();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //generate the tabs from the configured modes\n      var tabs = Object.keys(this.props.annotationTasks).map(function (mode) {\n        if (mode == 'bookmark') {\n          return null;\n        }\n\n        ;\n        return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"li\", {\n          key: mode + '__tab_option',\n          className: \"nav-tab\"\n        }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"a\", {\n          \"data-toggle\": \"tab\",\n          href: '#' + mode,\n          className: this.state.activeTab == mode ? 'nav-link active' : 'nav-link'\n        }, mode));\n      }, this); //generate the content of each tab (a form based on a annotation mode/motivation)\n\n      var tabContents = Object.keys(this.props.annotationTasks).map(function (mode) {\n        if (mode == 'bookmark') {\n          return null;\n        }\n\n        ;\n        var form = '';\n\n        switch (mode) {\n          case 'classify':\n            form = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_ClassifyingForm__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n              data: this.state.bodies.classification,\n              config: this.props.annotationTasks[mode],\n              onOutput: this.updateAnnotationBody.bind(this),\n              services: this.props.services\n            });\n            break;\n\n          case 'link':\n            form = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_LinkingForm__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n              data: this.state.bodies.link,\n              config: this.props.annotationTasks[mode],\n              onOutput: this.updateAnnotationBody.bind(this),\n              services: this.props.services\n            });\n            break;\n\n          default:\n            form = react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_FreetextForm__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n              data: this.state.bodies[this.props.annotationTasks[mode].type],\n              config: this.props.annotationTasks[mode],\n              onOutput: this.updateAnnotationBody.bind(this)\n            });\n            break;\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n          key: mode + '__tab_content',\n          id: mode,\n          className: this.state.activeTab == mode ? 'tab-pane active' : 'tab-pane'\n        }, form);\n      }, this);\n      return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n        className: \"container-fluid\"\n      }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"ul\", {\n        className: \"nav nav-tabs\"\n      }, tabs), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", {\n        className: \"tab-content\"\n      }, tabContents), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"div\", null));\n    }\n  }]);\n\n  return BodyCreator;\n}(react__WEBPACK_IMPORTED_MODULE_3___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (BodyCreator);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/BodyCreator.jsx?");

/***/ }),

/***/ "./src/components/annotation/CandidateList.jsx":
/*!*****************************************************!*\
  !*** ./src/components/annotation/CandidateList.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CandidateList; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CandidateTarget.jsx */ \"./src/components/annotation/CandidateTarget.jsx\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\nvar CandidateList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CandidateList, _React$Component);\n\n  function CandidateList(props) {\n    var _this;\n\n    _classCallCheck(this, CandidateList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CandidateList).call(this, props));\n    _this.selectTarget = _this.selectTarget.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      selected: []\n    };\n    return _this;\n  }\n\n  _createClass(CandidateList, [{\n    key: \"selectTarget\",\n    value: function selectTarget(candidate) {\n      var selected = this.state.selected;\n\n      if (selected.indexOf(candidate) === -1) {\n        selected.push(candidate);\n        this.setState({\n          selected: selected\n        });\n      }\n\n      this.props.addToSelected(candidate);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var candidateList = this;\n\n      var makeAnnotationCandidate = function makeAnnotationCandidate(candidate) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          onClick: candidateList.selectTarget,\n          key: candidate.source,\n          candidate: candidate\n        });\n      };\n\n      var makeResourceCandidate = function makeResourceCandidate(candidate) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          onClick: candidateList.selectTarget,\n          key: candidate.source,\n          candidate: candidate\n        });\n      };\n\n      var makeExternalCandidate = function makeExternalCandidate(candidate) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          onClick: candidateList.selectTarget,\n          key: candidate.resource,\n          candidate: candidate\n        });\n      };\n\n      if (this.props.candidateType === \"annotation\") {\n        var candidateNodes = this.props.candidates.map(function (candidate) {\n          return makeAnnotationCandidate(candidate);\n        });\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateList\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n          className: \"list-group candidate-scroll-list\"\n        }, candidateNodes));\n      }\n\n      if (this.props.candidateType === \"resource\") {\n        var candidateWholeNodes = this.props.candidates.wholeNodes.map(function (candidate) {\n          return makeResourceCandidate(candidate);\n        });\n        var candidateHighlighted = false;\n\n        if (this.props.candidates.highlighted) {\n          var highlighted = this.props.candidates.highlighted;\n          candidateHighlighted = makeResourceCandidate(this.props.candidates.highlighted);\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateList candidate-scroll-list\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateHighlighted\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Highlighted fragment:\"), candidateHighlighted), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateWholeList\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Whole elements:\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n          className: \"list-group\"\n        }, candidateWholeNodes)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null));\n      }\n\n      if (this.props.candidateType === \"external\") {\n        var candidateWholeNodes = this.props.candidates.wholeNodes.map(function (candidate) {\n          return makeExternalCandidate(candidate);\n        });\n        var candidateHighlighted = false;\n\n        if (this.props.candidates.highlighted) {\n          var _highlighted = this.props.candidates.highlighted;\n          candidateHighlighted = makeExternalCandidate(this.props.candidates.highlighted);\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateList\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateHighlighted\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Highlighted fragment:\"), candidateHighlighted), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"candidateWholeList\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Whole elements:\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n          className: \"list-group\"\n        }, candidateWholeNodes)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null));\n      }\n    }\n  }]);\n\n  return CandidateList;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/CandidateList.jsx?");

/***/ }),

/***/ "./src/components/annotation/CandidateTarget.jsx":
/*!*******************************************************!*\
  !*** ./src/components/annotation/CandidateTarget.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\nvar CandidateTarget =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CandidateTarget, _React$Component);\n\n  function CandidateTarget(props) {\n    var _this;\n\n    _classCallCheck(this, CandidateTarget);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CandidateTarget).call(this, props));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CandidateTarget, [{\n    key: \"handleClick\",\n    value: function handleClick() {\n      this.props.onClick(this.props.candidate);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //console.log(this.props.candidate);\n      var badgeType = \"badge badge-info\";\n      var targetType = \"Resource\";\n\n      if (this.props.candidate.type === \"external\") {\n        badgeType = \"badge badge-secondary\";\n      } // TO DO: deal with elements that have multiple types\n\n\n      var text = \"\";\n\n      if (this.props.candidate.type === \"annotation\") {\n        text = this.props.candidate.params.text;\n        badgeType = \"badge badge-success\";\n        targetType = \"Annotation\";\n      } else if (this.props.candidate.mimeType === \"text\") {\n        if (this.props.candidate.params.quote) {\n          text = this.props.candidate.params.quote.exact;\n        } else if (this.props.candidate.params.text) {\n          text = this.props.candidate.params.text;\n        }\n      } else if (this.props.candidate.mimeType === \"image\") {\n        text = \"Image selection\";\n      }\n\n      if (text.length > 100) {\n        text = text.substr(0, 100) + \"...\";\n      }\n\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n        onClick: this.handleClick,\n        className: \"list-group-item candidate-target\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"table\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tbody\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"annotation-text\"\n      }, targetType, \":\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"annotation-text\"\n      }, this.props.candidate.source))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"annotation-text\"\n      }, \"Type:\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: badgeType\n      }, this.props.candidate.label))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"annotation-text\"\n      }, \"Content:\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"annotation-text\"\n      }, text))))));\n    }\n  }]);\n\n  return CandidateTarget;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (CandidateTarget);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/CandidateTarget.jsx?");

/***/ }),

/***/ "./src/components/annotation/ClassifyingForm.jsx":
/*!*******************************************************!*\
  !*** ./src/components/annotation/ClassifyingForm.jsx ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_autosuggest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-autosuggest */ \"./node_modules/react-autosuggest/dist/index.js\");\n/* harmony import */ var react_autosuggest__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_autosuggest__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../flux/AnnotationActions */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n //See: https://github.com/moroshko/react-autosuggest\n\n\n\n/*\nInput:\n    - list of classifications (props.data)\n    - a annotation config (props.config)\n    - onOutput (what to do after adding/removing a classification) --> should be changed to Flux?\n\nOutput/emits:\n    - a list of classifications\n*/\n\nvar ClassifyingForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ClassifyingForm, _React$Component);\n\n  function ClassifyingForm(props) {\n    var _this;\n\n    _classCallCheck(this, ClassifyingForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ClassifyingForm).call(this, props));\n    var vocabulary = _this.props.config.vocabularies ? _this.props.config.vocabularies[0] : null;\n    _this.state = {\n      data: _this.props.data ? _this.props.data : [],\n      value: '',\n      //the label of the selected classification (autocomplete)\n      suggestionId: null,\n      //stores the id/uri of the selected classification (e.g. GTAA URI)\n      suggestions: [],\n      //current list of suggestions shown\n      isLoading: false,\n      //loading the suggestions from the server\n      vocabulary: vocabulary\n    };\n    _this.xhrs = [];\n    return _this;\n  }\n  /* ------------------- CRUD / loading of classifications ------------------- */\n\n\n  _createClass(ClassifyingForm, [{\n    key: \"addClassification\",\n    value: function addClassification(e) {\n      if (this.state.value != '') {\n        e.preventDefault();\n        var cs = this.state.data;\n\n        if (cs) {\n          cs.push({\n            id: this.state.suggestionId,\n            value: this.state.value,\n            vocabulary: this.state.vocabulary,\n            purpose: this.props.config.purpose,\n            type: this.props.config.type\n          });\n          this.setState({\n            value: '',\n            data: cs\n          }, this.onOutput.bind(this));\n        }\n      }\n    }\n  }, {\n    key: \"toggleDefault\",\n    value: function toggleDefault(index) {// not yet implemented\n      //AnnotationActions.toggleDefault(cs[index]);\n    }\n  }, {\n    key: \"removeClassification\",\n    value: function removeClassification(index) {\n      var cs = this.state.data;\n\n      if (cs) {\n        cs.splice(index, 1);\n        this.setState({\n          data: cs\n        }, this.onOutput.bind(this));\n      }\n    }\n  }, {\n    key: \"onOutput\",\n    value: function onOutput() {\n      if (this.props.onOutput) {\n        this.props.onOutput(this.props.config.type, this.state.data);\n      }\n    }\n  }, {\n    key: \"setVocabulary\",\n    value: function setVocabulary(event) {\n      this.setState({\n        vocabulary: event.target.value\n      });\n    }\n  }, {\n    key: \"getSuggestions\",\n    value: function getSuggestions(value, callback) {\n      //cancel all previous outgoing requests\n      for (var x = this.xhrs.length; x > 0; x--) {\n        this.xhrs[x - 1].abort();\n        this.xhrs.pop();\n      }\n\n      if (this.props.services[this.state.vocabulary].addWildcard) {\n        value = value + \"*\";\n      }\n\n      var url = this.props.services[this.state.vocabulary].api + value;\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", url); // ensure service can return JSON\n\n      xhr.setRequestHeader(\"Accept\", \"application/json\");\n      xhr.send();\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\n          var data = JSON.parse(xhr.responseText); //console.log(\"results:\", data.results);\n\n          callback(data.results);\n        }\n      }; //let url = '/autocomplete?vocab=' + this.state.vocabulary + '&term=' + value;\n\n\n      this.xhrs.push(xhr);\n    }\n    /* ------------------- functions specifically needed for react-autosuggest ------------------- */\n\n  }, {\n    key: \"loadSuggestions\",\n    value: function loadSuggestions(value) {\n      var _this2 = this;\n\n      this.setState({\n        isLoading: true,\n        suggestions: []\n      });\n\n      if (value.value === this.state.chosenValue) {\n        this.setState({\n          isLoading: false\n        });\n      } else {\n        this.getSuggestions(value.value, function (data) {\n          if (data.error) {\n            _this2.setState({\n              isLoading: false,\n              suggestions: []\n            });\n          } else {\n            _this2.setState({\n              isLoading: false,\n              suggestions: data\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"getSuggestionValue\",\n    value: function getSuggestionValue(suggestion) {\n      this.setState({\n        suggestionId: suggestion.uri\n      });\n      var entry = _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parseVocabularySuggestion(suggestion, this.state.vocabulary);\n      return entry.value;\n    } //TODO the rendering should be adapted for different vocabularies\n\n  }, {\n    key: \"renderSuggestion\",\n    value: function renderSuggestion(suggestion) {\n      var entry = _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parseVocabularySuggestion(suggestion, this.state.vocabulary);\n      return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"span\", null, entry.value, \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"span\", {\n        className: entry.label.className\n      }, entry.label.value), \"\\xA0\", entry.scopeNote);\n    }\n  }, {\n    key: \"onSuggestionsFetchRequested\",\n    value: function onSuggestionsFetchRequested(value) {\n      this.loadSuggestions(value);\n    }\n  }, {\n    key: \"onSuggestionsClearRequested\",\n    value: function onSuggestionsClearRequested() {\n      this.setState({\n        suggestions: []\n      });\n    }\n  }, {\n    key: \"onSuggestionsUpdateRequested\",\n    value: function onSuggestionsUpdateRequested(value) {\n      this.loadSuggestions(value);\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(event, _ref) {\n      var newValue = _ref.newValue;\n      this.setState({\n        chosenValue: newValue,\n        value: newValue\n      });\n    }\n    /* ------------------- end of specific react-autosuggest functions ------------------- */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var classificationList = null;\n      var classifications = this.state.data.map(function (c, index) {\n        var csClass = 'badge badge-success tag';\n\n        if (c.vocabulary == 'DBpedia') {\n          csClass = 'badge badge-danger tag';\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"span\", {\n          key: 'cl__' + index,\n          className: csClass\n        }, c.value, \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"i\", {\n          className: \"badge badge-light\",\n          onClick: _this3.removeClassification.bind(_this3, index)\n        }, \"x\"), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"i\", {\n          className: \"badge badge-light\",\n          onClick: _this3.toggleDefault.bind(_this3, index)\n        }, \"o\"), \"\\xA0\");\n      }, this);\n\n      if (classifications.length > 0) {\n        classificationList = react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"h4\", null, \"Added classifications\"), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n          className: \"well\"\n        }, classifications));\n      }\n\n      var inputProps = {\n        placeholder: \"Search term\",\n        value: this.state.value,\n        onChange: this.onChange.bind(this)\n      }; //generate the options from the config and add a default one\n\n      var vocabularyOptions = this.props.config.vocabularies.map(function (v, index) {\n        return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"label\", {\n          className: \"vocabulary-option radio-inline\",\n          key: index\n        }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"input\", {\n          type: \"radio\",\n          name: \"vocabularyOptions\",\n          id: v,\n          value: v,\n          checked: v == _this3.state.vocabulary,\n          onChange: _this3.setVocabulary.bind(_this3)\n        }), ' ' + v);\n      }, this);\n      vocabularyOptions.push(react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"label\", {\n        className: \"vocabulary-option radio-inline\",\n        key: vocabularyOptions.length\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"input\", {\n        type: \"radio\",\n        name: \"vocabularyOptions\",\n        id: \"custom\",\n        value: \"custom\",\n        checked: this.state.vocabulary === 'custom',\n        onChange: this.setVocabulary.bind(this)\n      }), ' ', \"Custom (no external lookup)\"));\n      return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        key: 'form__classify'\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, classificationList)), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"form\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"form-group\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"h4\", null, \"Add classifications\"), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"text-left\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"label\", null, \"Vocabulary:\\xA0\"), vocabularyOptions), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_autosuggest__WEBPACK_IMPORTED_MODULE_0___default.a, {\n        ref: this.props.config.type,\n        suggestions: this.state.suggestions,\n        onSuggestionsFetchRequested: this.onSuggestionsFetchRequested.bind(this),\n        onSuggestionsClearRequested: this.onSuggestionsClearRequested.bind(this),\n        getSuggestionValue: this.getSuggestionValue.bind(this),\n        renderSuggestion: this.renderSuggestion.bind(this),\n        inputProps: inputProps\n      })), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: this.addClassification.bind(this)\n      }, \"Add\")))));\n    }\n  }]);\n\n  return ClassifyingForm;\n}(react__WEBPACK_IMPORTED_MODULE_2___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ClassifyingForm);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/ClassifyingForm.jsx?");

/***/ }),

/***/ "./src/components/annotation/FreetextForm.jsx":
/*!****************************************************!*\
  !*** ./src/components/annotation/FreetextForm.jsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/*\nGoal:\n    -\n\nInput:\n    - list of free text bodies (props.data)\n        - annotation ID\n        - the free text statement (string value)\n    - a annotation config (props.config)\n    - onOutput (what to do after adding/removing a free text statement) --> should be changed to Flux?\n\nOutput/emits:\n    - 'on change' (whenever adding/removing a free text statement)\n        - data:\n            - event type ('add', 'delete')\n            - the item that was added/deleted (ID + value)\n            - the list of statements\n*/\n\n\nvar FreetextForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FreetextForm, _React$Component);\n\n  function FreetextForm(props) {\n    var _this;\n\n    _classCallCheck(this, FreetextForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FreetextForm).call(this, props));\n    _this.state = {\n      data: _this.props.data ? _this.props.data : []\n    };\n    return _this;\n  }\n\n  _createClass(FreetextForm, [{\n    key: \"addStatement\",\n    value: function addStatement(e) {\n      e.preventDefault();\n      var cs = this.state.data;\n\n      if (cs) {\n        var annotation = {\n          value: this.refs.statement.value,\n          purpose: this.props.config.purpose,\n          type: this.props.config.type,\n          format: this.props.config.format\n        };\n        cs.push(annotation);\n        this.setState({\n          data: cs\n        }, this.onOutput.bind(this));\n        this.refs.statement.value = '';\n      }\n    }\n  }, {\n    key: \"removeStatement\",\n    value: function removeStatement(index) {\n      var cs = this.state.data;\n\n      if (cs) {\n        cs.splice(index, 1);\n        this.setState({\n          data: cs\n        }, this.onOutput.bind(this));\n      }\n    }\n  }, {\n    key: \"onOutput\",\n    value: function onOutput() {\n      if (this.props.onOutput) {\n        this.props.onOutput(this.props.config.type, this.state.data);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var statementList = null;\n      var elementKey = \"form__\" + this.props.config.purpose;\n      var placeholder = \"Add \" + this.props.config.type;\n      var statements = this.state.data.map(function (statement, index) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n          key: 'com__' + index,\n          className: \"list-group-item\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n          className: \"badge badge-light\",\n          onClick: _this2.removeStatement.bind(_this2, index)\n        }, \"x\"), \"\\xA0\", statement.value);\n      }, this);\n\n      if (statements.length > 0) {\n        statementList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Added statements\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n          className: \"list-group\"\n        }, statements));\n      }\n\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: elementKey\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, statementList)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"form\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"form-group\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, this.props.config.type), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        ref: \"statement\",\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: placeholder\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: this.addStatement.bind(this)\n      }, \"Add\"))))));\n    }\n  }]);\n\n  return FreetextForm;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FreetextForm);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/FreetextForm.jsx?");

/***/ }),

/***/ "./src/components/annotation/LinkingForm.jsx":
/*!***************************************************!*\
  !*** ./src/components/annotation/LinkingForm.jsx ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/*\nInput:\n    - list of links (props.data)\n    - a annotation config (props.config)\n    - onOutput (what to do after adding/removing a link) --> should be changed to Flux?\n\nOutput/emits:\n    - a list of links\n*/\n\n\nvar LinkingForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LinkingForm, _React$Component);\n\n  function LinkingForm(props) {\n    var _this;\n\n    _classCallCheck(this, LinkingForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LinkingForm).call(this, props));\n    var api = _this.props.config.apis ? _this.props.config.apis[0].name : null;\n    _this.state = {\n      data: _this.props.data ? _this.props.data : [],\n      api: api,\n      results: []\n    };\n    return _this;\n  }\n  /* ------------------- CRUD / loading of links ------------------- */\n\n\n  _createClass(LinkingForm, [{\n    key: \"setAPI\",\n    value: function setAPI(event) {\n      this.setState({\n        api: event.target.value\n      });\n    } //TODO make sure that at least one common property is present in the linkData (when hooking up different APIs)\n\n  }, {\n    key: \"addLink\",\n    value: function addLink(linkData) {\n      var annotations = this.state.data;\n\n      if (annotations && linkData) {\n        var annotation = {\n          purpose: \"linking\",\n          type: \"Linking\",\n          value: linkData\n        };\n        annotations.push(annottion);\n        this.setState({\n          data: annotations\n        }, this.onOutput.bind(this));\n      }\n    }\n  }, {\n    key: \"removeLink\",\n    value: function removeLink(index) {\n      var annotations = this.state.data;\n\n      if (annotations) {\n        annotations.splice(index, 1);\n        this.setState({\n          data: annotations\n        }, this.onOutput.bind(this));\n      }\n    }\n  }, {\n    key: \"onOutput\",\n    value: function onOutput() {\n      if (this.props.onOutput) {\n        this.props.onOutput('links', this.state.data);\n      }\n    }\n  }, {\n    key: \"search\",\n    value: function search(event) {\n      event.preventDefault();\n      var url = '/link/' + this.state.api + '/search?q=' + this.refs.search.value;\n      fetch(url, {\n        method: \"GET\",\n        cache: 'no-cache',\n        mode: 'cors'\n      }).then(function (response) {\n        this.onSearch(response.json());\n      }.bind(this)).catch(function (err) {\n        console.error(url, err.toString());\n      });\n    }\n  }, {\n    key: \"onSearch\",\n    value: function onSearch(data) {\n      this.setState({\n        results: data\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var linkList = null;\n      var links = null;\n\n      if (this.state.data) {\n        links = this.state.data.map(function (link, index) {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n            key: 'com__' + index,\n            className: \"list-group-item\"\n          }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n            className: \"badge badge-light\",\n            onClick: _this2.removeLink.bind(_this2, index)\n          }), \"\\xA0\", link.label);\n        }, this);\n\n        if (links.length > 0) {\n          linkList = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Added links\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n            className: \"list-group\"\n          }, links));\n        }\n      } //generate the options from the config and add a default one\n\n\n      var apiOptions = this.props.config.apis.map(function (api, index) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n          className: \"radio-inline\",\n          key: index\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n          type: \"radio\",\n          name: \"apiOptions\",\n          id: api.name,\n          value: api.name,\n          checked: api.name == _this2.state.api,\n          onChange: _this2.setAPI.bind(_this2)\n        }), api.name);\n      }, this);\n      var results = this.state.results.map(function (res, index) {\n        var poster = '';\n\n        if (res.poster) {\n          poster = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"img\", {\n            src: res.poster,\n            style: {\n              maxWidth: '100px'\n            }\n          });\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", {\n          key: 'result__' + index,\n          onDoubleClick: _this2.addLink.bind(_this2, res)\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, poster), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n          className: \"media-heading\"\n        }, res.label ? res.label : res.title)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", null, res.description));\n      }, this);\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        key: 'form__link'\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, linkList)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"form\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"form-group\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Add links\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"text-left\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", null, \"API:\\xA0\"), apiOptions), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        type: \"text\",\n        ref: \"search\",\n        className: \"form-control\"\n      })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: this.search.bind(this)\n      }, \"Search\")), this.state.results.length > 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Gevonden resultaten \", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"small\", null, \"Dubbelklik een gevonden resultaat om deze toe te voegen\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"well\",\n        style: {\n          height: '400px',\n          overflow: 'auto'\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"table\", {\n        className: \"table table-bordered\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tbody\", null, results)))) : null)));\n    }\n  }]);\n\n  return LinkingForm;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (LinkingForm);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/LinkingForm.jsx?");

/***/ }),

/***/ "./src/components/annotation/SelectedList.jsx":
/*!****************************************************!*\
  !*** ./src/components/annotation/SelectedList.jsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SelectedList; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CandidateTarget.jsx */ \"./src/components/annotation/CandidateTarget.jsx\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\nvar SelectedList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SelectedList, _React$Component);\n\n  function SelectedList(props) {\n    var _this;\n\n    _classCallCheck(this, SelectedList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SelectedList).call(this, props));\n    _this.removeTarget = _this.removeTarget.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      selected: []\n    };\n    return _this;\n  }\n\n  _createClass(SelectedList, [{\n    key: \"removeTarget\",\n    value: function removeTarget(candidate) {\n      this.props.removeFromSelected(candidate);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var selectedList = this;\n      var selectedTargets = this.props.candidates.map(function (candidate) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CandidateTarget_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          onClick: selectedList.removeTarget,\n          key: candidate.source,\n          candidate: candidate\n        });\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"selectedList\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"list-group candidate-scroll-list\"\n      }, selectedTargets));\n    }\n  }]);\n\n  return SelectedList;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/SelectedList.jsx?");

/***/ }),

/***/ "./src/components/annotation/TargetCreator.jsx":
/*!*****************************************************!*\
  !*** ./src/components/annotation/TargetCreator.jsx ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return TargetCreator; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CandidateList_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CandidateList.jsx */ \"./src/components/annotation/CandidateList.jsx\");\n/* harmony import */ var _SelectedList_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SelectedList.jsx */ \"./src/components/annotation/SelectedList.jsx\");\n/* harmony import */ var _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../util/RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\n\n\nvar TargetCreator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TargetCreator, _React$Component);\n\n  function TargetCreator(props) {\n    var _this;\n\n    _classCallCheck(this, TargetCreator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TargetCreator).call(this, props));\n    _this.addToSelected = _this.addToSelected.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.removeFromSelected = _this.removeFromSelected.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      selected: _this.props.selectedTargets,\n      annotations: [],\n      activeType: \"resource\",\n      candidateTypes: [\"resource\", \"external\", \"annotation\"]\n    };\n    return _this;\n  }\n\n  _createClass(TargetCreator, [{\n    key: \"addToSelected\",\n    value: function addToSelected(candidate) {\n      var selected = this.state.selected;\n\n      if (selected.indexOf(candidate) === -1) {\n        selected.push(candidate);\n        this.setState({\n          selected: selected\n        });\n        this.props.setTargets(selected);\n      }\n    }\n  }, {\n    key: \"removeFromSelected\",\n    value: function removeFromSelected(candidate) {\n      var selected = this.state.selected;\n      var index = selected.indexOf(candidate);\n\n      if (index !== -1) {\n        selected.splice(index, 1);\n        this.setState({\n          selected: selected\n        });\n        this.props.setTargets(selected);\n      }\n    }\n  }, {\n    key: \"addMotivations\",\n    value: function addMotivations() {\n      this.props.addMotivations();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      //generate the tabs from the configured modes\n      var component = this;\n      var tabs = this.state.candidateTypes.map(function (candidateType) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n          key: candidateType + '__tab_option',\n          className: \"nav-item\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n          \"data-toggle\": \"tab\",\n          href: '#' + candidateType,\n          className: component.state.activeType === candidateType ? 'nav-link active' : 'nav-link'\n        }, candidateType));\n      }, this);\n      var tabContents = this.state.candidateTypes.map(function (candidateType) {\n        var candidates = _this2.props.candidates[candidateType];\n        var tabActive = _this2.state.activeType === candidateType ? 'tab-pane active' : 'tab-pane';\n        var className = \"candidate-target-list \" + tabActive;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          key: candidateType + '__tab_content',\n          id: candidateType,\n          className: className\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CandidateList_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          candidates: candidates,\n          addToSelected: _this2.addToSelected.bind(_this2),\n          candidateType: candidateType\n        }));\n      }, this);\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"container-fluid\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, \"Available Targets\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, \"Click on a target to select it.\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"nav nav-tabs\"\n      }, tabs), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"tab-content\"\n      }, tabContents)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, \"Selected Targets\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, \"Click on a selected target to deselect it.\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SelectedList_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        candidates: this.state.selected,\n        removeFromSelected: this.removeFromSelected.bind(this)\n      }))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null));\n    }\n  }]);\n\n  return TargetCreator;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/annotation/TargetCreator.jsx?");

/***/ }),

/***/ "./src/components/collection/Collection.jsx":
/*!**************************************************!*\
  !*** ./src/components/collection/Collection.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Collection; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../flux/CollectionActions.js */ \"./src/flux/CollectionActions.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\nvar Collection =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Collection, _React$Component);\n\n  function Collection(props) {\n    _classCallCheck(this, Collection);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Collection).call(this, props));\n  }\n\n  _createClass(Collection, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"canEdit\",\n    value: function canEdit() {\n      return this.props.currentUser && this.props.currentUser.username === this.props.collection.creator ? true : false;\n    }\n  }, {\n    key: \"canCopy\",\n    value: function canCopy() {\n      return this.props.currentUser ? true : false;\n      var allowed = true; // TODO: implement permission check (what should permission check be?)\n\n      return allowed;\n    }\n  }, {\n    key: \"editCollection\",\n    value: function editCollection() {\n      _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].editCollection(this.props.collection, \"label\");\n    }\n  }, {\n    key: \"editContent\",\n    value: function editContent() {\n      _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].editCollection(this.props.collection, \"content\");\n    }\n  }, {\n    key: \"copyCollection\",\n    value: function copyCollection() {\n      var confirm = window.confirm(\"Are you sure you want to copy this collection?\");\n\n      if (confirm) {\n        _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].copy(this.props.collection); // TODO: implement copying of collection\n      }\n    }\n  }, {\n    key: \"deleteCollection\",\n    value: function deleteCollection() {\n      var confirm = window.confirm(\"Are you sure you want to delete this collection?\");\n\n      if (confirm) {\n        _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].delete(this.props.collection);\n      }\n    }\n  }, {\n    key: \"isDefault\",\n    value: function isDefault() {\n      return this.props.defaultCollection === this.props.collection.id;\n    }\n  }, {\n    key: \"toggleDefaultCollection\",\n    value: function toggleDefaultCollection() {\n      var newDefault = this.isDefault() ? null : this.props.collection.id;\n      _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setDefault(newDefault);\n    }\n  }, {\n    key: \"computeClass\",\n    value: function computeClass() {\n      var className = 'list-group-item';\n      if (this.isDefault()) className += ' active';\n      return className;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var component = this;\n      var collection = this.props.collection;\n      var timestamp = new Date(collection.created).toLocaleString();\n      var editLabels = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"badge badge-info\",\n        onClick: this.editCollection.bind(this)\n      }, \"edit label\"), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"badge badge-warning\",\n        onClick: this.editContent.bind(this)\n      }, \"edit content\"), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"badge badge-danger\",\n        onClick: this.deleteCollection.bind(this)\n      }, \"delete\"));\n      var copyLabel = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"badge badge-success\",\n        onClick: this.toggleDefaultCollection.bind(this)\n      }, \"toggle default\");\n      var options = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, component.canEdit() ? editLabels : \"\", \" \", component.canCopy() ? copyLabel : \"\");\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n        className: component.computeClass(),\n        title: collection.id\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"Collection\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"abbr\", null, timestamp, \"\\xA0 (created by: \", collection.creator, \")\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"strong\", null, collection.label), \"\\xA0\\xA0\\xA0\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, \"(\", collection.total, \")\"))), options);\n    }\n  }]);\n\n  return Collection;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/collection/Collection.jsx?");

/***/ }),

/***/ "./src/components/collection/CollectionContentEditor.jsx":
/*!***************************************************************!*\
  !*** ./src/components/collection/CollectionContentEditor.jsx ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollectionLabelEditor; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../flux/CollectionActions */ \"./src/flux/CollectionActions.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\nvar CollectionLabelEditor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionLabelEditor, _React$Component);\n\n  function CollectionLabelEditor(props) {\n    _classCallCheck(this, CollectionLabelEditor);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CollectionLabelEditor).call(this, props));\n  }\n\n  _createClass(CollectionLabelEditor, [{\n    key: \"addToCollection\",\n    value: function addToCollection(annotation) {\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_1__[\"default\"].addAnnotation(this.props.collection.id, annotation);\n    }\n  }, {\n    key: \"removeFromCollection\",\n    value: function removeFromCollection(annotation) {\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_1__[\"default\"].removeAnnotation(this.props.collection.id, annotation.id);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"collection-content-editor row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-1\"\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-5\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Select annotations to remove\"), this.props.removeCandidates), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-5\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h4\", null, \"Select annotations to add\"), this.props.addCandidates), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-1\"\n      })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-default\",\n        onClick: this.removeFromCollection.bind(this)\n      }, \"Remove\")), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"col-md-6\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-default\",\n        onClick: this.addToCollection.bind(this)\n      }, \"Add\"))));\n    }\n  }]);\n\n  return CollectionLabelEditor;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/collection/CollectionContentEditor.jsx?");

/***/ }),

/***/ "./src/components/collection/CollectionCreator.jsx":
/*!*********************************************************!*\
  !*** ./src/components/collection/CollectionCreator.jsx ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollectionCreator; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _FlexModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../FlexModal */ \"./src/components/FlexModal.jsx\");\n/* harmony import */ var _annotation_Annotation_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../annotation/Annotation.jsx */ \"./src/components/annotation/Annotation.jsx\");\n/* harmony import */ var _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../flux/CollectionStore */ \"./src/flux/CollectionStore.js\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../flux/CollectionActions */ \"./src/flux/CollectionActions.js\");\n/* harmony import */ var _CollectionLabelEditor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CollectionLabelEditor */ \"./src/components/collection/CollectionLabelEditor.jsx\");\n/* harmony import */ var _CollectionContentEditor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CollectionContentEditor */ \"./src/components/collection/CollectionContentEditor.jsx\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_8__);\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\n\n\n\n\n\n\n\n\nvar CollectionCreator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionCreator, _React$Component);\n\n  function CollectionCreator(props) {\n    var _this;\n\n    _classCallCheck(this, CollectionCreator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CollectionCreator).call(this, props));\n    _this.handleLabelChange = _this.handleLabelChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      annotations: [],\n      collectionLabel: \"\",\n      page: [],\n      showModal: false,\n      toAdd: [],\n      toRemove: [],\n      view: \"label\"\n    };\n    _this.collectionLabel = \"\";\n    return _this;\n  }\n\n  _createClass(CollectionCreator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('edit-collection', this.editCollection.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('updated-collection', this.fetchPage.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('loaded-collection', this.setCollection.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_4__[\"default\"].bind('loaded-annotations', this.setAnnotations.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('loaded-page', this.setPage.bind(this));\n    }\n  }, {\n    key: \"setCollection\",\n    value: function setCollection(collection) {\n      this.setState({\n        collection: collection\n      });\n    }\n  }, {\n    key: \"setAnnotations\",\n    value: function setAnnotations(annotations) {\n      this.setState({\n        annotations: annotations\n      });\n    }\n  }, {\n    key: \"setPage\",\n    value: function setPage(page) {\n      this.setState({\n        page: page\n      });\n    }\n  }, {\n    key: \"fetchPage\",\n    value: function fetchPage(collection) {\n      console.log(\"fetching collection page\");\n      console.log(collection);\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getCollectionPage(collection.last);\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        collectionLabel: event.target.value\n      });\n    }\n  }, {\n    key: \"makeCollection\",\n    value: function makeCollection() {\n      var collection = {\n        creator: this.props.currentUser.username\n      };\n      this.editCollection(collection);\n    }\n  }, {\n    key: \"editCollection\",\n    value: function editCollection(collection, view) {\n      if (!view) {\n        view = \"label\";\n      } //console.log(\"editCollection - collection:\", collection);\n\n\n      var page = [];\n      if (collection.label !== undefined) this.collectionLabel = collection.label; //this.setState({collectionLabel: collection.label});\n\n      if (collection.last !== undefined && collection.last !== null) {\n        //page = collection.last;\n        console.log(\"getting collection page\");\n        _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getCollectionPage(collection.last);\n      }\n\n      this.setState({\n        collection: collection,\n        page: page,\n        view: view,\n        showModal: true\n      });\n    }\n  }, {\n    key: \"hideCollectionForm\",\n    value: function hideCollectionForm() {\n      this.setState({\n        showModal: false\n      });\n    }\n  }, {\n    key: \"saveCollection\",\n    value: function saveCollection() {\n      jquery__WEBPACK_IMPORTED_MODULE_8___default()('#collection__modal').modal('hide'); //TODO ugly, but without this the static backdrop won't disappear!\n\n      var collection = this.state.collection;\n      collection.label = this.collectionLabel; //console.log(\"saveCollection - collection:\", collection);\n\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"].save(collection);\n      this.collectionLabel = \"\";\n      this.setState({\n        showModal: false,\n        collectionLabel: \"\",\n        collection: null,\n        page: [],\n        annotations: []\n      });\n    }\n  }, {\n    key: \"addToCollection\",\n    value: function addToCollection(annotation) {\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"].addAnnotation(this.state.collection.id, annotation);\n    }\n  }, {\n    key: \"removeFromCollection\",\n    value: function removeFromCollection(annotation) {\n      _flux_CollectionActions__WEBPACK_IMPORTED_MODULE_5__[\"default\"].removeAnnotation(this.state.collection.id, annotation.id);\n    }\n  }, {\n    key: \"handleLabelChange\",\n    value: function handleLabelChange(label) {\n      this.collectionLabel = label;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var component = this;\n      var addCandidates = [];\n      var removeCandidates = []; //let pageItems = (this.state.page && this.state.page.items !== undefined) ? this.state.page.items : [];\n\n      var pageItems = this.state.page; //console.log(pageItems);\n\n      var pageIds = pageItems.map(function (annotation) {\n        return annotation.id;\n      }); //let pageIds = this.state.page;\n\n      addCandidates = this.state.annotations.filter(function (annotation) {\n        return pageIds.includes(annotation.id) === false;\n      }).map(function (annotation) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          onClick: function onClick() {\n            component.addToCollection(annotation);\n          },\n          key: annotation.id\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_annotation_Annotation_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n          annotation: annotation,\n          currentUser: null\n        }));\n      });\n      removeCandidates = pageItems.map(function (annotation) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          onClick: function onClick() {\n            component.removeFromCollection(annotation);\n          },\n          key: annotation.id\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_annotation_Annotation_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n          annotation: annotation,\n          currentUser: null\n        }));\n      });\n      var editor = null;\n      var editViews = [\"label\", \"content\"];\n      var editorTabs = editViews.map(function (editView) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n          key: editView + '__tab_option',\n          className: \"nav-item\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n          key: editView + \"-editor-tab\",\n          className: _this2.state.view === editView ? 'nav-link active' : 'nav-link',\n          \"data-toggle\": \"tab\",\n          href: '#' + editView\n        }, editView));\n      });\n      var editorTabContents = editViews.map(function (editView) {\n        //console.log(\"render - state.view:\", this.state.view);\n        //console.log(\"render - editView:\", editView);\n        if (editView === \"label\") {\n          editor = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CollectionLabelEditor__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n            onChange: _this2.handleLabelChange,\n            collectionLabel: _this2.collectionLabel\n          });\n        } else if (editView === \"content\") {\n          editor = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CollectionContentEditor__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n            collection: _this2.state.collection,\n            addCandidates: addCandidates,\n            removeCandidates: removeCandidates\n          });\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          key: editView + '__tab_content',\n          id: editView,\n          className: _this2.state.view === editView ? 'tab-pane active' : 'tab-pane'\n        }, editor);\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"CollectionCreator\",\n        key: \"collection-creator\"\n      }, this.props.currentUser ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"btn btn-light\",\n        onClick: this.makeCollection.bind(this)\n      }, \"Make collection\") : null, this.state.showModal ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FlexModal__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        key: \"collection-flex-modal\",\n        elementId: \"collection__modal\",\n        handleHideModal: this.hideCollectionForm.bind(this),\n        confirmLabel: \"Save\",\n        confirmAction: this.saveCollection.bind(this),\n        title: 'Provide a label for your collection'\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"nav nav-tabs\"\n      }, editorTabs), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"tab-content\"\n      }, editorTabContents))) : null);\n    }\n  }]);\n\n  return CollectionCreator;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/collection/CollectionCreator.jsx?");

/***/ }),

/***/ "./src/components/collection/CollectionLabelEditor.jsx":
/*!*************************************************************!*\
  !*** ./src/components/collection/CollectionLabelEditor.jsx ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollectionLabelEditor; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n\n\nvar CollectionLabelEditor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionLabelEditor, _React$Component);\n\n  function CollectionLabelEditor(props) {\n    var _this;\n\n    _classCallCheck(this, CollectionLabelEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CollectionLabelEditor).call(this, props));\n    _this.state = {\n      collectionLabel: _this.props.collectionLabel\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CollectionLabelEditor, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        collectionLabel: event.target.value\n      });\n      this.props.onChange(event.target.value);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"collection-label-editor\",\n        key: \"collection-label-editor\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", null, \"Collection label: \"), \"\\xA0\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n        key: \"collection-label-input\",\n        ref: \"label\",\n        type: \"text\",\n        value: this.state.collectionLabel,\n        onChange: this.handleChange.bind(this)\n      }));\n    }\n  }]);\n\n  return CollectionLabelEditor;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/collection/CollectionLabelEditor.jsx?");

/***/ }),

/***/ "./src/components/collection/CollectionList.jsx":
/*!******************************************************!*\
  !*** ./src/components/collection/CollectionList.jsx ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollectionViewer; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Collection_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Collection.jsx */ \"./src/components/collection/Collection.jsx\");\n/* harmony import */ var _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../util/AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/* harmony import */ var _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../flux/CollectionStore */ \"./src/flux/CollectionStore.js\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../flux/CollectionActions.js */ \"./src/flux/CollectionActions.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\nvar CollectionViewer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionViewer, _React$Component);\n\n  function CollectionViewer(props) {\n    var _this;\n\n    _classCallCheck(this, CollectionViewer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CollectionViewer).call(this, props));\n    _this.state = {\n      collections: [],\n      default: null\n    };\n    return _this;\n  }\n\n  _createClass(CollectionViewer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('loaded-collections', this.listCollections.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('saved-collection', this.getCollections.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('updated-collection', this.getCollections.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_4__[\"default\"].bind('saved-annotation', this.addAnnotation.bind(this));\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_4__[\"default\"].bind('deleted-annotation', this.getCollections.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('deleted-collection', this.getCollections.bind(this));\n      _flux_CollectionStore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].bind('default-collection', this.setDefaultCollection.bind(this));\n      _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getCollections();\n    }\n  }, {\n    key: \"setDefaultCollection\",\n    value: function setDefaultCollection(collectionId) {\n      this.setState({\n        default: collectionId\n      });\n    }\n  }, {\n    key: \"addAnnotation\",\n    value: function addAnnotation(annotation) {\n      if (this.state.default) _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].addAnnotation(this.state.default, annotation);\n    }\n  }, {\n    key: \"getCollections\",\n    value: function getCollections() {\n      _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getCollections();\n    }\n  }, {\n    key: \"listCollections\",\n    value: function listCollections(collections) {\n      this.setState({\n        collections: collections\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var component = this;\n      var collections = component.state.collections.map(function (collection, index) {\n        var key = \"collection-\" + index;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Collection_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n          collection: collection,\n          currentUser: component.props.currentUser,\n          key: key,\n          defaultCollection: _this2.state.default\n        });\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"CollectionList\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, \"Saved collections\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"list-group annotation-scroll-list\"\n      }, collections));\n    }\n  }]);\n\n  return CollectionViewer;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/collection/CollectionList.jsx?");

/***/ }),

/***/ "./src/components/collection/CollectionViewer.jsx":
/*!********************************************************!*\
  !*** ./src/components/collection/CollectionViewer.jsx ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollectionViewer; });\n/* harmony import */ var _CollectionCreator_jsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CollectionCreator.jsx */ \"./src/components/collection/CollectionCreator.jsx\");\n/* harmony import */ var _CollectionList_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CollectionList.jsx */ \"./src/components/collection/CollectionList.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../util/AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/*\n * annotate-rdfa.js allows user to select RDFA-labeled text fragments\n * in RDFa enriched HTML documents.\n *\n */\n// TO DO: deal with elements that have multiple types\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\nvar CollectionViewer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CollectionViewer, _React$Component);\n\n  function CollectionViewer(props) {\n    var _this;\n\n    _classCallCheck(this, CollectionViewer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CollectionViewer).call(this, props));\n    _this.state = {\n      collections: []\n    };\n    return _this;\n  }\n\n  _createClass(CollectionViewer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"collectionViewer\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_CollectionCreator_jsx__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n        currentUser: this.props.currentUser,\n        config: this.props.config\n      }), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_CollectionList_jsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        currentUser: this.props.currentUser,\n        config: this.props.config\n      }));\n    }\n  }]);\n\n  return CollectionViewer;\n}(react__WEBPACK_IMPORTED_MODULE_2___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/collection/CollectionViewer.jsx?");

/***/ }),

/***/ "./src/components/resource/Resource.jsx":
/*!**********************************************!*\
  !*** ./src/components/resource/Resource.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Resource; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../flux/AnnotationActions */ \"./src/flux/AnnotationActions.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\nvar Resource =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Resource, _React$Component);\n\n  function Resource(props) {\n    var _this;\n\n    _classCallCheck(this, Resource);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Resource).call(this, props));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(Resource, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"onMouseOverHandler\",\n    value: function onMouseOverHandler() {\n      if (this.props.data.domNode) {\n        this.props.data.domNode.style.border = \"1px solid red\";\n      }\n    }\n  }, {\n    key: \"onMouseOutHandler\",\n    value: function onMouseOutHandler() {\n      if (this.props.data.domNode) {\n        this.props.data.domNode.style.border = \"\";\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var component = this; //console.log(this.props.data.type);\n\n      var labels = this.props;\n      var typeLabels = this.props.data.rdfTypeLabel.map(function (label) {\n        if (!_this2.props.data.rdfTypeLabel) {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n            key: _this2.props.data.resource\n          });\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          key: \"rdfa-label-\" + label\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          className: \"badge badge-info\"\n        }, label), \"\\xA0\");\n      });\n      var resource = this.props.data.resource ? this.props.data.resource : this.props.data.rdfaResource;\n      var parentResource = this.props.data.parentResource;\n      var parent = parentResource ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, \"Parent: \\xA0 \", parentResource) : \"\";\n      var rdfaProperty = this.props.data.rdfaProperty ? this.props.data.rdfaProperty.split(\"#\")[1] : null;\n\n      if (this.props.data.relation) {\n        rdfaProperty = this.props.data.relation.split(\"#\")[1];\n      }\n\n      var relation = rdfaProperty ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, \"Relation: \\xA0 \", rdfaProperty) : \"\";\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"resource list-group-item\",\n        onMouseOver: component.onMouseOverHandler.bind(this),\n        onMouseOut: component.onMouseOutHandler.bind(this)\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, \"Type: \\xA0 \", typeLabels), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, \"Identifier: \", resource), parent, relation);\n    }\n  }]);\n\n  return Resource;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/resource/Resource.jsx?");

/***/ }),

/***/ "./src/components/resource/ResourceList.jsx":
/*!**************************************************!*\
  !*** ./src/components/resource/ResourceList.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _Resource_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Resource.jsx */ \"./src/components/resource/Resource.jsx\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\nvar ResourceList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ResourceList, _React$Component);\n\n  function ResourceList(props) {\n    var _this;\n\n    _classCallCheck(this, ResourceList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResourceList).call(this, props));\n    _this.state = {\n      resourceIds: [],\n      externalIds: [],\n      view: \"resources\"\n    };\n    return _this;\n  }\n\n  _createClass(ResourceList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bind('loaded-resources', this.listResources.bind(this));\n    }\n  }, {\n    key: \"changeView\",\n    value: function changeView(e) {\n      this.setState({\n        view: e.target.name\n      });\n    }\n  }, {\n    key: \"listResources\",\n    value: function listResources(topResources, resourceMaps) {\n      var resourceIds = Object.keys(_flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].resourceIndex);\n      var externalIds = Object.keys(_flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].externalResourceIndex).filter(function (resourceId) {\n        return !_flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].resourceIndex.hasOwnProperty(resourceId);\n      }); //console.log(\"resourceIds:\", resourceIds);\n      //console.log(\"externalIds:\", externalIds);\n\n      this.setState({\n        resourceIds: resourceIds,\n        externalIds: externalIds\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      //console.log(AnnotationStore.resourceIndex);\n      var component = this;\n      var resourceItems = null;\n      var externalItems = null; //console.log(this.state.resourceIds);\n\n      resourceItems = this.state.resourceIds.map(function (resourceId) {\n        //console.log(\"mapping resource item:\", resourceId);\n        var resource = _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].resourceIndex[resourceId]; //console.log(\"mapping resource:\", resource);\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Resource_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n          data: resource,\n          key: resourceId\n        });\n      }); //console.log(\"resourceItems:\", resourceItems);\n\n      externalItems = this.state.externalIds.map(function (resourceId) {\n        var resource = _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].externalResourceIndex[resourceId];\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Resource_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n          data: resource,\n          key: resourceId\n        });\n      }); //console.log(\"externalItems:\", externalItems);\n\n      var itemTypes = [\"resources\", \"external\"];\n      var viewerTabContents = itemTypes.map(function (itemType) {\n        var itemList;\n        if (itemType === \"resources\") itemList = resourceItems;\n        if (itemType === \"external\") itemList = externalItems;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          key: itemType + '__tab_content',\n          id: itemType,\n          className: _this2.state.view === itemType ? 'tab-pane active' : 'tab-pane'\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n          className: \"list-group annotation-scroll-list\"\n        }, itemList));\n      });\n      var viewerTabs = itemTypes.map(function (itemType) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"li\", {\n          key: itemType + '__tab_option',\n          className: \"nav-item viewer-tab \"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", {\n          onClick: _this2.changeView.bind(_this2),\n          name: itemType,\n          \"data-toggle\": \"tab\",\n          href: '#' + itemType,\n          className: component.state.view === itemType ? 'nav-link active' : 'nav-link'\n        }, itemType));\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"resourceList\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h3\", null, \"Annotatable Resources\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", {\n        className: \"nav nav-tabs nav-fill viewer-tabs\"\n      }, viewerTabs), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"tab-content\"\n      }, viewerTabContents));\n    }\n  }]);\n\n  return ResourceList;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ResourceList);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/resource/ResourceList.jsx?");

/***/ }),

/***/ "./src/components/resource/ResourceViewer.jsx":
/*!****************************************************!*\
  !*** ./src/components/resource/ResourceViewer.jsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ResourceViewer; });\n/* harmony import */ var _ResourceList_jsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ResourceList.jsx */ \"./src/components/resource/ResourceList.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _util_AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../util/AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/* harmony import */ var _flux_AnnotationStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../flux/AnnotationStore */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/*\n * annotate-rdfa.js allows user to select RDFA-labeled text fragments\n * in RDFa enriched HTML documents.\n *\n */\n// TO DO: deal with elements that have multiple types\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar ResourceViewer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ResourceViewer, _React$Component);\n\n  function ResourceViewer(props) {\n    var _this;\n\n    _classCallCheck(this, ResourceViewer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResourceViewer).call(this, props));\n    _this.state = {\n      resources: []\n    };\n    return _this;\n  }\n\n  _createClass(ResourceViewer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n        className: \"resourceViewer\"\n      }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ResourceList_jsx__WEBPACK_IMPORTED_MODULE_0__[\"default\"], {\n        currentUser: this.props.currentUser,\n        config: this.props.config\n      }));\n    }\n  }]);\n\n  return ResourceViewer;\n}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component);\n\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/components/resource/ResourceViewer.jsx?");

/***/ }),

/***/ "./src/flux/AnnotationActions.js":
/*!***************************************!*\
  !*** ./src/flux/AnnotationActions.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AppDispatcher */ \"./src/flux/AppDispatcher.js\");\n/* harmony import */ var _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/AnnotationAPI */ \"./src/api/AnnotationAPI.js\");\n/* harmony import */ var _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flux/AnnotationStore.js */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _util_FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/FRBRooUtil.js */ \"./src/util/FRBRooUtil.js\");\n\n\n\n\n\n\nvar restorePermission = function restorePermission() {\n  var permission = {\n    accessStatus: [\"private\", \"public\"],\n    permission: \"private\"\n  };\n\n  if (window.localStorage && window.localStorage.hasOwnProperty(\"swac-permission\")) {\n    permission = JSON.parse(window.localStorage.getItem(\"swac-permission\"));\n  }\n\n  console.log(\"restoring permissions:\", permission);\n  return permission;\n};\n\nvar permission = restorePermission();\n\nvar storePermission = function storePermission(permission) {\n  console.log(\"storing permissions:\", permission);\n\n  if (!window.localStorage) {} else {\n    window.localStorage.setItem(\"swac-permission\", JSON.stringify(permission));\n  }\n};\n\nvar AnnotationActions = {\n  serverAvailable: false,\n  accessStatus: permission.accessStatus,\n  // for retrieving annotations from the server\n  permission: permission.permission,\n  // for submitting or updating annotations in the server\n  //accessStatus : [\"private\", \"public\"], // for retrieving annotations from the server\n  //permission : \"private\", // for submitting or updating annotations in the server\n  annotationIndex: {},\n  resourceIndex: {},\n  relationIndex: {},\n  topResources: [],\n  annotationListener: [],\n  getServerAddress: function getServerAddress() {\n    return _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getServerAddress();\n  },\n  setServerAddress: function setServerAddress(apiURL) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setServerAddress(apiURL);\n    AnnotationActions.pollServer();\n  },\n  pollServer: function pollServer() {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].checkServerAvailable(function (serverAvailable) {\n      if (serverAvailable !== AnnotationActions.serverAvailable) {\n        AnnotationActions.serverAvailable = serverAvailable;\n      }\n\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"server-status-change\",\n        serverAvailable: serverAvailable\n      }); //if (!serverAvailable) {\n      //    console.error(\"Annotation server not reachable\");\n      //}\n    });\n    setTimeout(AnnotationActions.pollServer, 60000);\n  },\n  getAccessStatus: function getAccessStatus() {\n    return AnnotationActions.accessStatus;\n  },\n  setAccessStatus: function setAccessStatus(accessStatus) {\n    AnnotationActions.accessStatus = accessStatus;\n    storePermission({\n      permission: AnnotationActions.permission,\n      accessStatus: accessStatus\n    });\n\n    if (AnnotationActions.accessStatus.length === 0) {\n      AnnotationActions.dispatchAnnotations([]); // when no access levels are selected\n    } else {\n      AnnotationActions.loadAnnotations(_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].topResources);\n    }\n  },\n  getPermission: function getPermission() {\n    return AnnotationActions.permission;\n  },\n  setPermission: function setPermission(permission) {\n    storePermission({\n      permission: permission,\n      accessStatus: AnnotationActions.accessStatus\n    });\n    AnnotationActions.permission = permission;\n  },\n  setBaseAnnotationOntology: function setBaseAnnotationOntology(url) {\n    //console.log(\"AnnotationActions - setBaseAnnotationOntology url:\", url);\n    _util_FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].baseAnnotationOntologyURL = url;\n    _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].baseAnnotationOntologyURL = url;\n    _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setBaseAnnotationOntology(url); //console.log(\"AnnotationActions - baseAnnotationOntologyURL:\", FRBRooUtil.baseAnnotationOntologyURL);\n  },\n  addListenerElement: function addListenerElement(element) {\n    if (!AnnotationActions.annotationListener.includes(element)) AnnotationActions.annotationListener.push(element);\n  },\n  lookupIdentifier: function lookupIdentifier(sourceId) {\n    var source = {\n      type: null,\n      data: null\n    }; // for IDs to external resources\n    //console.log(AnnotationStore.annotationIndex);\n    //console.log(AnnotationStore.resourceIndex);\n    //console.log(AnnotationStore.externalResourceIndex);\n\n    if (_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotationIndex.hasOwnProperty(sourceId)) source = {\n      type: \"annotation\",\n      data: _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotationIndex[sourceId]\n    };else if (_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceIndex.hasOwnProperty(sourceId)) source = {\n      type: \"resource\",\n      data: _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceIndex[sourceId]\n    };else if (_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex.hasOwnProperty(sourceId)) source = {\n      type: \"external\",\n      data: _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex[sourceId]\n    };\n    return source;\n  },\n  lookupAnnotationsByTarget: function lookupAnnotationsByTarget(resourceId) {\n    return Object.values(_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotationIndex).filter(function (annotation) {\n      var match = annotation.target.some(function (target) {\n        if (target.source && target.source === resourceId) {\n          return true;\n        } else if (target.identifier && target.identifier === resourceId) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n      return match ? true : false;\n    });\n  },\n  save: function save(annotation) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].saveAnnotation(annotation, AnnotationActions.permission, function (error, data) {\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"save-annotation\",\n        annotation: data\n      });\n    });\n  },\n  delete: function _delete(annotation) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].deleteAnnotation(annotation, function (error, data) {\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"delete-annotation\",\n        annotation: data\n      });\n    });\n  },\n  activate: function activate(annotation) {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"activate-annotation\",\n      annotation: annotation\n    });\n  },\n  edit: function edit(annotation) {\n    //is the annotation always on the same page?\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"edit-annotation\",\n      annotation: annotation\n    });\n  },\n  createAnnotation: function createAnnotation(annotationTargets) {\n    //is the annotation always on the same page?\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"create-annotation\",\n      annotationTargets: annotationTargets\n    });\n  },\n  set: function set(annotation) {\n    //is the annotation always on the same page?\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"set-annotation\",\n      annotation: annotation\n    });\n  },\n  play: function play(annotation) {\n    //is the annotation always on the same page? (no)\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"play-annotation\",\n      annotation: annotation\n    });\n  },\n  changeTarget: function changeTarget(annotationTarget) {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"change-target\",\n      annotationTarget: annotationTarget\n    });\n  },\n  loadAnnotations: function loadAnnotations(resourceIds) {\n    //console.log(\"loadAnnotations - resourceIds:\", resourceIds);\n    if (resourceIds === undefined) resourceIds = _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].topResources; //console.log(\"loadAnnotations - AnnotationStore.resourceIds:\", AnnotationStore.resourceIds);\n\n    var externalResources = AnnotationActions.getExternalResources(resourceIds); //console.log(\"loadAnnotations - externalResources:\", externalResources);\n\n    var externalIds = externalResources.map(function (res) {\n      return res.parentResource;\n    }).filter(function (externalId) {\n      return typeof externalId === \"string\";\n    }); //console.log(\"loadAnnotations - top externalIds:\", externalIds);\n\n    resourceIds = resourceIds.concat(externalIds); //console.log(\"loadAnnotations - top RDFa resourceIds:\", resourceIds);\n\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getAnnotationsByTargets(resourceIds, AnnotationActions.accessStatus, function (error, annotations) {\n      if (error) {\n        //console.error(resourceIds, error.toString());\n        window.alert(\"Error loading annotations: \" + error.toString());\n      }\n\n      _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotationIndex = {};\n      annotations.forEach(function (annotation) {\n        _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].annotationIndex[annotation.id] = annotation;\n      });\n      AnnotationActions.dispatchAnnotations(annotations);\n    });\n  },\n  copyAnnotation: function copyAnnotation(annotation) {\n    // remove id, creation timestamp, permissions (assume permission of current user setting)\n    delete annotation.id;\n    delete annotation.created;\n    delete annotation.premissions;\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].saveAnnotation(annotation, AnnotationActions.permission, function (error, data) {\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"save-annotation\",\n        annotation: data\n      });\n    });\n  },\n  dispatchAnnotations: function dispatchAnnotations(annotations) {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"load-annotations\",\n      annotations: annotations\n    });\n    AnnotationActions.dispatchLoadEvent();\n  },\n  dispatchLoadEvent: function dispatchLoadEvent() {\n    // for external listeners\n    AnnotationActions.annotationListener.forEach(function (element) {\n      var event = new CustomEvent(\"load-annotations\");\n      element.dispatchEvent(event);\n    });\n  },\n  reload: function reload() {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"reload-annotations\"\n    });\n  },\n  indexResources: function indexResources(callback) {\n    _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].indexRDFa(function (error, index) {\n      if (error) {\n        console.log(\"Error indexing resources\");\n        console.log(error);\n        return callback(error);\n      } else {\n        //console.log(\"indexResources - index:\", index);\n        _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceIndex = index.resources; //console.log(\"indexResources - AnnotationStore.resourceIndex:\", AnnotationStore.resourceIndex);\n\n        _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relationIndex = index.relations;\n        return callback(error);\n      }\n    }); // ... refresh index\n  },\n  indexExternalResources: function indexExternalResources(resources, callback) {\n    var t0 = performance.now();\n    _util_FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loadVocabularies(function (error, store) {\n      if (error) {\n        console.log(error);\n        return callback(error);\n      } else if (store === null) {\n        // no vocabularies, skip reading external resources\n        //console.log(\"indexExternalResources - returning with undefined vocabularyStore\");\n        return callback(null, false, null);\n      }\n\n      var t1 = performance.now();\n      _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].vocabularyStore = store;\n      _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceStore = null;\n      _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].representedResourceMap = {};\n      _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex = {}; //console.log(\"AnnotationActions - vocabularyStore:\", store);\n\n      _util_FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loadExternalResources(_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].vocabularyStore, function (error, doIndexing, store) {\n        if (error) {\n          console.log(\"Error loading external resources using vocabularyStore\");\n          console.log(error);\n          return callback(error);\n        } else if (!doIndexing) {\n          return callback(null);\n        } else {\n          var t2 = performance.now();\n          _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceStore = store; //console.log(\"AnnotationActions - resourceStore:\", store);\n          //console.log(\"AnnotationActions - resources:\", resources);\n\n          var representedResourceMap = _util_FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].mapRepresentedResources(store, resources); //console.log(\"AnnotationActions - representedResourceMap:\", representedResourceMap);\n\n          var t3 = performance.now();\n          _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].representedResourceMap = representedResourceMap;\n          var externalResourceIndex = _util_FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].indexExternalResources(store, resources); //console.log(\"AnnotationActions - externalResourceIndex:\", externalResourceIndex);\n\n          _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex = externalResourceIndex;\n          var t4 = performance.now(); //console.log(\"Call to loadVocabularies took \" + (t1 - t0) + \" milliseconds.\");\n          //console.log(\"Call to loadExternalResources took \" + (t2 - t1) + \" milliseconds.\");\n          //console.log(\"Call to mapRepresentedResources took \" + (t3 - t2) + \" milliseconds.\");\n          //console.log(\"Call to indexExternalResources took \" + (t4 - t3) + \" milliseconds.\");\n\n          return callback(null);\n        }\n      });\n    });\n  },\n  hasExternalResource: function hasExternalResource(resourceId) {\n    //console.log(resourceId);\n    //console.log(AnnotationStore.externalResourceIndex);\n    if (!_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex) {\n      return false;\n    } else {\n      return _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex.hasOwnProperty(resourceId);\n    }\n  },\n  hasRepresentedResource: function hasRepresentedResource(resourceId) {\n    if (!_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].representedResourceIndex) {\n      return false;\n    } else {\n      return _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].representedResourceIndex.hasOwnProperty(resourceId);\n    }\n  },\n  getRepresentedResource: function getRepresentedResource(resourceId) {\n    if (!_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex) {\n      throw Error(\"externalResourceIndex does not exist\");\n    } else if (!_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex.hasOwnProperty(resourceId)) {\n      throw Error(\"resourceId does not have represented resource\");\n    } else {\n      return _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex[resourceId];\n    }\n  },\n  getExternalResources: function getExternalResources(resourceIds) {\n    if (!Array.isArray(resourceIds)) {\n      console.log(\"resourceIds:\", resourceIds);\n      throw Error(\"resourceIds should be an array\");\n    } //console.log(\"resourceIds:\", resourceIds);\n    //resourceIds.filter((resourceId) => { console.log(resourceId); console.log(AnnotationActions.hasExternalResource(resourceId)) ;})\n    //console.log(\"filtered:\", resourceIds.filter(AnnotationActions.hasExternalResource));\n\n\n    return resourceIds.filter(AnnotationActions.hasExternalResource).map(function (resourceId) {\n      return AnnotationActions.getExternalResource(resourceId);\n    });\n  },\n  getExternalResource: function getExternalResource(resourceId) {\n    if (!_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex) {\n      return null;\n    } else if (_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex.hasOwnProperty(resourceId)) {\n      return _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].externalResourceIndex[resourceId];\n    } else {\n      return null;\n    }\n  },\n  loadResources: function loadResources() {\n    //console.log(\"loadResources - getTopRDFaResources\");\n    _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].topResources = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTopRDFaResources(); //console.log(\"loadResources - topResources:\", AnnotationStore.topResources);\n\n    AnnotationActions.indexResources(function (error) {\n      if (error) {\n        //console.error(error);\n        window.alert(\"Error indexing RDFa resources in this page\\n\" + error.toString());\n        return error;\n      } //console.log(\"loadResources - indexResources done\");\n      //console.log(\"loadResources - AnnotationStore.resourceIndex:\", AnnotationStore.resourceIndex);\n\n\n      _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceMaps = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].buildResourcesMaps(); // .. rebuild maps\n      //console.log(\"loadResources - resourceMaps:\", AnnotationStore.resourceMaps);\n\n      var resources = Object.keys(_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceIndex); //console.log(\"loadResources - resources:\", resources);\n\n      AnnotationActions.indexExternalResources(resources, function (error) {\n        if (error) {\n          console.log(\"error indexing external resources\");\n          console.log(error);\n          return error;\n        } else {\n          //console.log(\"external resources indexed\");\n          //console.log(AnnotationStore.externalResourceIndex);\n          _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n            eventName: \"loaded-resources\",\n            topResources: _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].topResources,\n            resourceMaps: _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].resourceMaps\n          });\n          AnnotationActions.loadAnnotations(_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].topResources);\n          return null;\n        }\n      });\n    });\n  },\n  registerUser: function registerUser(userDetails) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerUser(userDetails, function (error) {\n      if (error) {\n        _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n          eventName: \"register-failed\",\n          userDetails: userDetails\n        });\n      } else {\n        _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n          eventName: \"register-succeeded\",\n          userDetails: userDetails\n        });\n      }\n    });\n  },\n  loginUser: function loginUser(userDetails) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].loginUser(userDetails, function (error) {\n      if (error) {\n        _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n          eventName: \"login-failed\",\n          userDetails: error\n        });\n      } else {\n        AnnotationActions.loadResources();\n        _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n          eventName: \"login-succeeded\",\n          userDetails: userDetails\n        });\n      }\n    });\n  },\n  logoutUser: function logoutUser() {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].logoutUser(function (error) {\n      if (error) {\n        window.alert(\"Error logging out!\");\n        return null;\n      }\n\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"logout-user\",\n        userDetails: null\n      });\n    });\n  },\n  registerResources: function registerResources(maps) {\n    if (Object.keys(maps).length === 0) return null;\n    Object.keys(maps).forEach(function (resourceId, index) {\n      // check if server knows about resource\n      _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].checkResource(resourceId, function (error, data) {\n        if (data && index === Object.keys(maps).length - 1) return data;else if (data) return null; // register if server doesn't know resource\n\n        _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerResource(maps[resourceId], function (error, data) {\n          if (error) return null;\n          if (index === Object.keys(maps).length - 1) return data;\n        });\n      });\n    });\n  },\n  parseVocabularySuggestion: function parseVocabularySuggestion(suggestion, vocabulary) {\n    var entry = {\n      value: null,\n      label: {\n        className: \"badge badge-success\",\n        value: \"\"\n      },\n      scopeNote: null\n    };\n\n    if (vocabulary === \"GTAA\") {\n      var arr = suggestion.label.split('|');\n      entry.value = arr[0];\n      entry.scopeNote = arr[2] ? '(' + arr[2] + ')' : '';\n\n      switch (arr[1]) {\n        case 'Persoon':\n          entry.label = {\n            className: \"badge badge-warning\",\n            value: \"Persoon\"\n          };\n          break;\n\n        case 'Maker':\n          entry.label = {\n            className: \"badge badge-warning\",\n            value: \"Maker\"\n          };\n          break;\n\n        case 'Geografisch':\n          entry.label = {\n            className: \"badge badge-success\",\n            value: \"Locatie\"\n          };\n          break;\n\n        case 'Naam':\n          entry.label = {\n            className: \"badge badge-info\",\n            value: \"Naam\"\n          };\n          break;\n\n        case 'Onderwerp':\n          entry.label = {\n            className: \"badge badge-primary\",\n            value: \"Onderwerp\"\n          };\n          break;\n\n        case 'Genre':\n          entry.label = {\n            className: \"badge badge-default\",\n            value: \"Genre\"\n          };\n          break;\n\n        case 'B&G Onderwerp':\n          entry.label = {\n            className: \"badge badge-danger\",\n            value: \"B&G Onderwerp\"\n          };\n          break;\n\n        default:\n          entry.label = {\n            className: \"badge badge-default\",\n            value: \"Concept\"\n          };\n          break;\n      }\n    } else if (vocabulary === \"DBpedia\") {\n      var _arr = suggestion.label.split('|');\n\n      entry.value = _arr[0];\n      entry.scopeNote = _arr[2] ? '(' + _arr[2] + ')' : '';\n      entry.label = {\n        className: \"badge badge-default\",\n        value: \"Concept\"\n      };\n    } else if (vocabulary == 'UNESCO') {\n      var _arr2 = suggestion.prefLabel.split('|');\n\n      entry.value = _arr2[0];\n      entry.label.value = _arr2[1];\n\n      switch (_arr2[1]) {\n        case 'Education':\n          entry.label.className = \"badge badge-warning\";\n          break;\n\n        case 'Science':\n          entry.label.className = \"badge badge-warning\";\n          break;\n\n        case 'Social and human sciences':\n          entry.label.className = \"badge badge-success\";\n          break;\n\n        case 'Information and communication':\n          entry.label.className = \"badge badge-info\";\n          break;\n\n        case 'Politics, law and economics':\n          entry.label.className = \"badge badge-primary\";\n          break;\n\n        case 'Countries and country groupings':\n          entry.label.className = \"badge badge-default\";\n          break;\n\n        default:\n          entry.label.className = \"badge badge-warning\";\n          entry.label.value = \"Concept\";\n          break;\n      }\n    }\n\n    return entry;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnnotationActions);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/flux/AnnotationActions.js?");

/***/ }),

/***/ "./src/flux/AnnotationStore.js":
/*!*************************************!*\
  !*** ./src/flux/AnnotationStore.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var microevent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! microevent */ \"./node_modules/microevent/microevent.js\");\n/* harmony import */ var microevent__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(microevent__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _AppDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AppDispatcher */ \"./src/flux/AppDispatcher.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n //See: https://github.com/jeromeetienne/microevent.js\n\nvar AnnotationStore =\n/*#__PURE__*/\nfunction () {\n  function AnnotationStore() {\n    _classCallCheck(this, AnnotationStore);\n  }\n\n  _createClass(AnnotationStore, [{\n    key: \"setTargetObserverClass\",\n    value: function setTargetObserverClass() {\n      return this.clientConfiguration.targetObserverClass;\n    }\n  }, {\n    key: \"getTargetObserverClass\",\n    value: function getTargetObserverClass() {\n      return this.clientConfiguration.targetObserverClass;\n    }\n  }, {\n    key: \"loadAnnotations\",\n    value: function loadAnnotations(annotations) {\n      this.trigger(\"loaded-annotations\", annotations);\n    }\n  }, {\n    key: \"changeTarget\",\n    value: function changeTarget() {\n      this.trigger(\"changed-target\");\n    } //TODO change the name of the event 'change' --> save-annotation\n\n  }, {\n    key: \"save\",\n    value: function save(annotation) {\n      //console.log(annotation);\n      //notify all components that just listen to a single target\n      this.trigger(annotation.target.source, \"update\", annotation); //then notify all components that are interested in all annotations\n\n      this.trigger(\"load-annotations\"); // then notify components interested in the saved annotation\n\n      this.trigger(\"saved-annotation\", annotation);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(annotation) {\n      //console.log(annotation);\n      //then notify all components that are interested in all annotations\n      this.trigger(\"load-annotations\"); // then notify all components that are interested in the deleted annotation\n\n      this.trigger(\"deleted-annotation\", annotation);\n    }\n  }, {\n    key: \"activate\",\n    value: function activate(annotation) {\n      this.trigger(\"activate-annotation\", annotation);\n    }\n  }, {\n    key: \"edit\",\n    value: function edit(annotation) {\n      this.trigger(\"edit-annotation\", annotation);\n    }\n  }, {\n    key: \"createAnnotation\",\n    value: function createAnnotation(annotationTargets) {\n      this.trigger(\"create-annotation\", annotationTargets);\n    }\n  }, {\n    key: \"set\",\n    value: function set(annotation) {\n      this.trigger(\"set-annotation\", annotation);\n    }\n  }, {\n    key: \"play\",\n    value: function play(annotation) {\n      this.trigger(\"play-annotation\", annotation);\n    }\n  }, {\n    key: \"reloadAnnotations\",\n    value: function reloadAnnotations() {\n      this.trigger(\"reload-annotations\");\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(topResources, resourceMaps) {\n      this.trigger(\"loaded-resources\", topResources, resourceMaps);\n    }\n  }, {\n    key: \"loadCollections\",\n    value: function loadCollections(collections) {\n      this.trigger(\"load-collections\", collections);\n    }\n  }, {\n    key: \"login\",\n    value: function login(userDetails, triggerMessage) {\n      this.trigger(triggerMessage, userDetails);\n    }\n  }, {\n    key: \"logout\",\n    value: function logout(userDetails) {\n      this.trigger(\"logout-user\", userDetails);\n    }\n  }, {\n    key: \"changeServerStatus\",\n    value: function changeServerStatus(serverAvailable) {\n      this.trigger(\"server-status-change\", serverAvailable);\n    }\n  }]);\n\n  return AnnotationStore;\n}();\n\nvar AppAnnotationStore = new AnnotationStore(); //add support for emitting events\n\nmicroevent__WEBPACK_IMPORTED_MODULE_0___default.a.mixin(AnnotationStore);\n_AppDispatcher__WEBPACK_IMPORTED_MODULE_1__[\"default\"].register(function (action) {\n  switch (action.eventName) {\n    case \"save-annotation\":\n      AppAnnotationStore.save(action.annotation);\n      break;\n\n    case \"delete-annotation\":\n      AppAnnotationStore.delete(action.annotation);\n      break;\n\n    case \"activate-annotation\":\n      AppAnnotationStore.activate(action.annotation, action.callback);\n      break;\n\n    case \"edit-annotation\":\n      AppAnnotationStore.edit(action.annotation, action.callback);\n      break;\n\n    case \"create-annotation\":\n      AppAnnotationStore.createAnnotation(action.annotationTargets, action.callback);\n      break;\n\n    case \"set-annotation\":\n      AppAnnotationStore.set(action.annotation, action.callback);\n      break;\n\n    case \"play-annotation\":\n      AppAnnotationStore.play(action.annotation, action.callback);\n      break;\n\n    case \"change-target\":\n      AppAnnotationStore.changeTarget(action.annotationTarget);\n      break;\n\n    case \"load-annotations\":\n      AppAnnotationStore.loadAnnotations(action.annotations, action.callback);\n      break;\n\n    case \"reload-annotations\":\n      AppAnnotationStore.reloadAnnotations();\n      break;\n\n    case \"loaded-resources\":\n      AppAnnotationStore.loadResources(action.topResources, action.resourceMaps);\n      break;\n\n    case \"load-collections\":\n      AppAnnotationStore.loadCollections(action.collections, action.callback);\n      break;\n\n    case \"login-succeeded\":\n      AppAnnotationStore.login(action.userDetails, \"login-succeeded\");\n      break;\n\n    case \"login-failed\":\n      AppAnnotationStore.login(action.userDetails, \"login-failed\");\n      break;\n\n    case \"logout-user\":\n      AppAnnotationStore.logout(action.userDetails);\n      break;\n\n    case \"register-succeeded\":\n      AppAnnotationStore.login(action.userDetails, \"register-succeeded\");\n      break;\n\n    case \"register-failed\":\n      AppAnnotationStore.logout(action.userDetails, \"register-failed\");\n      break;\n\n    case \"get-server-address\":\n      AppAnnotationStore.getServerAddress();\n      break;\n\n    case \"set-server-address\":\n      AppAnnotationStore.setServerAddress(action.apiURL);\n      break;\n\n    case \"register-resources\":\n      AppAnnotationStore.registerResources(action.maps);\n      break;\n\n    case \"server-status-change\":\n      AppAnnotationStore.changeServerStatus(action.serverAvailable);\n      break;\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (AppAnnotationStore);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/flux/AnnotationStore.js?");

/***/ }),

/***/ "./src/flux/AppDispatcher.js":
/*!***********************************!*\
  !*** ./src/flux/AppDispatcher.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var flux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! flux */ \"./node_modules/flux/index.js\");\n/* harmony import */ var flux__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(flux__WEBPACK_IMPORTED_MODULE_0__);\n\nvar AppDispatcher = new flux__WEBPACK_IMPORTED_MODULE_0__[\"Dispatcher\"]();\n/* harmony default export */ __webpack_exports__[\"default\"] = (AppDispatcher);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/flux/AppDispatcher.js?");

/***/ }),

/***/ "./src/flux/CollectionActions.js":
/*!***************************************!*\
  !*** ./src/flux/CollectionActions.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AppDispatcher */ \"./src/flux/AppDispatcher.js\");\n/* harmony import */ var _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/AnnotationAPI */ \"./src/api/AnnotationAPI.js\");\n\n\nvar CollectionActions = {\n  getServerAddress: function getServerAddress() {\n    return _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getServerAddress();\n  },\n  setServerAddress: function setServerAddress(apiURL) {\n    return _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setServerAddress(apiURL);\n  },\n  save: function save(collection) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].saveCollection(collection, function (error, data) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"saved-collection\",\n        collection: data\n      });\n    });\n  },\n  delete: function _delete(collection) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].deleteCollection(collection, function (error, data) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"deleted-collection\",\n        collection: data\n      });\n    });\n  },\n  update: function update(collection) {\n    //console.log(collection);\n    // TO DO!\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"update-collection\",\n      collection: collection\n    });\n  },\n  editCollection: function editCollection(collection, view) {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"edit-collection\",\n      collection: collection,\n      view: view\n    });\n  },\n  setDefault: function setDefault(collection) {\n    _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n      eventName: \"default-collection\",\n      collection: collection\n    });\n  },\n  getCollections: function getCollections() {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCollections(function (error, collections) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"loaded-collections\",\n        collections: collections\n      });\n    });\n  },\n  getCollection: function getCollection(collectionId) {\n    //console.log(collectionId);\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCollection(collectionId, function (error, collection) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"loaded-collection\",\n        collection: collection\n      });\n    });\n  },\n  getCollectionPage: function getCollectionPage(collectionPageURL) {\n    collectionPageURL = collectionPageURL.replace(\"iris=1\", \"iris=0\");\n    console.log(collectionPageURL);\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCollectionPage(collectionPageURL, function (error, page) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"loaded-page\",\n        page: page\n      });\n    });\n  },\n  addAnnotation: function addAnnotation(collectionId, annotation) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].addAnnotation(collectionId, annotation, function (error, collection) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"updated-collection\",\n        collection: collection\n      });\n    });\n  },\n  removeAnnotation: function removeAnnotation(collectionId, annotationId) {\n    _api_AnnotationAPI__WEBPACK_IMPORTED_MODULE_1__[\"default\"].removeAnnotation(collectionId, annotationId, function (error, pageId) {\n      if (error) return null;\n      _AppDispatcher__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dispatch({\n        eventName: \"updated-collection\",\n        page: pageId\n      });\n    });\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (CollectionActions);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/flux/CollectionActions.js?");

/***/ }),

/***/ "./src/flux/CollectionStore.js":
/*!*************************************!*\
  !*** ./src/flux/CollectionStore.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var microevent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! microevent */ \"./node_modules/microevent/microevent.js\");\n/* harmony import */ var microevent__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(microevent__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _AppDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AppDispatcher */ \"./src/flux/AppDispatcher.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n //See: https://github.com/jeromeetienne/microevent.js\n\nvar CollectionStore =\n/*#__PURE__*/\nfunction () {\n  function CollectionStore() {\n    _classCallCheck(this, CollectionStore);\n  }\n\n  _createClass(CollectionStore, [{\n    key: \"editCollection\",\n    value: function editCollection(message, collection, view) {\n      this.trigger(message, collection, view);\n    }\n  }, {\n    key: \"defaultTrigger\",\n    value: function defaultTrigger(message, data) {\n      this.trigger(message, data);\n    }\n  }]);\n\n  return CollectionStore;\n}();\n\nvar AppCollectionStore = new CollectionStore(); //add support for emitting events\n\nmicroevent__WEBPACK_IMPORTED_MODULE_0___default.a.mixin(CollectionStore);\n_AppDispatcher__WEBPACK_IMPORTED_MODULE_1__[\"default\"].register(function (action) {\n  switch (action.eventName) {\n    case \"loaded-collections\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collections);\n      break;\n\n    case \"loaded-collection\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collection);\n      break;\n\n    case \"loaded-page\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.page);\n      break;\n\n    case \"saved-collection\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collection);\n      break;\n\n    case \"deleted-collection\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collection);\n      break;\n\n    case \"updated-collection\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collection);\n      break;\n\n    case \"default-collection\":\n      AppCollectionStore.defaultTrigger(action.eventName, action.collection);\n      break;\n\n    case \"edit-collection\":\n      AppCollectionStore.editCollection(action.eventName, action.collection, action.view);\n      break;\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (AppCollectionStore);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/flux/CollectionStore.js?");

/***/ }),

/***/ "./src/rdfa-annotation-config.js":
/*!***************************************!*\
  !*** ./src/rdfa-annotation-config.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar config = {\n  \"baseAnnotationOntologyURL\": \"http://boot.huygens.knaw.nl/vgdemo/editionannotationontology.ttl\",\n  \"targetObserver\": {\n    \"targetObserverClass\": \"annotation-target-observer\",\n    \"observeMutations\": true,\n    \"observerConfig\": {\n      \"childList\": true,\n      \"attributes\": false,\n      \"subtree\": true\n    }\n  },\n  \"services\": {\n    \"AnnotationServer\": {\n      \"api\": \"http://localhost:3000/api\"\n    },\n    \"GTAA\": {\n      \"api\": \"http://openskos.beeldengeluid.nl/api/autocomplete/?q=\",\n      \"params\": {\n        \"lang\": \"nl\"\n      },\n      \"lookupParameter\": \"q\"\n    },\n    \"DBpedia\": {\n      \"api\": \"http://lookup.dbpedia.org/api/search.asmx/PrefixSearch?QueryClass=&MaxHits=10&QueryString=\"\n    },\n    \"UNESCO\": {\n      \"api\": \"http://vocabularies.unesco.org/browser/rest/v1/search?vocab=thesaurus&lang=en&labellang=en&query=\",\n      \"addWildcard\": true\n    },\n    \"Wikipedia\": {\n      \"api\": \"https://en.wikipedia.org/w/api.php?action=opensearch&limit=20&namespace=0&format=json&search=\"\n    }\n  },\n  \"annotationSupport\": {\n    \"currentQuery\": {\n      \"modes\": [\"bookmark\"]\n    },\n    \"singleItem\": {\n      \"modes\": [\"bookmark\"]\n    },\n    \"mediaObject\": {\n      \"modes\": [\"classify\", \"comment\", \"link\"]\n    },\n    \"mediaSegment\": {\n      \"modes\": [\"classify\", \"comment\", \"link\"]\n    },\n    \"annotation\": {\n      \"modes\": [\"comment\"]\n    }\n  },\n  \"annotationTasks\": {\n    \"classify\": {\n      \"vocabularies\": [\"DBpedia\", \"GTAA\"],\n      \"type\": \"classification\",\n      \"purpose\": \"classifying\",\n      \"format\": \"text/plain\"\n    },\n    \"link\": {\n      \"apis\": [{\n        \"name\": \"wikidata\"\n      }, {\n        \"name\": \"europeana\"\n      }],\n      \"type\": \"link\",\n      \"purpose\": \"linking\",\n      \"format\": \"text/plain\"\n    },\n    \"bookmark\": {\n      \"type\": \"bookmark\",\n      \"purpose\": \"bookmarking\"\n    },\n    \"comment\": {\n      \"type\": \"comment\",\n      \"purpose\": \"commenting\",\n      \"format\": \"text/plain\"\n    },\n    \"correct\": {\n      \"type\": \"correction\",\n      \"purpose\": \"correcting\",\n      \"format\": \"text/plain\"\n    },\n    \"transcribe\": {\n      \"type\": \"transcription\",\n      \"purpose\": \"transcribing\",\n      \"format\": \"text/plain\"\n    }\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (config);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/rdfa-annotation-config.js?");

/***/ }),

/***/ "./src/swac.jsx":
/*!**********************!*\
  !*** ./src/swac.jsx ***!
  \**********************/
/*! exports provided: ScholarlyWebAnnotator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ScholarlyWebAnnotator\", function() { return ScholarlyWebAnnotator; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_AnnotationClient_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/AnnotationClient.jsx */ \"./src/components/AnnotationClient.jsx\");\n/* harmony import */ var _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util/RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util/TargetUtil.js */ \"./src/util/TargetUtil.js\");\n/* harmony import */ var _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./util/SelectionUtil.js */ \"./src/util/SelectionUtil.js\");\n/* harmony import */ var _util_DOMUtil_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./util/DOMUtil.js */ \"./src/util/DOMUtil.js\");\n/* harmony import */ var _rdfa_annotation_config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./rdfa-annotation-config.js */ \"./src/rdfa-annotation-config.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var _flux_CollectionActions_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./flux/CollectionActions.js */ \"./src/flux/CollectionActions.js\");\n/* harmony import */ var _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./flux/AnnotationStore.js */ \"./src/flux/AnnotationStore.js\");\n/* harmony import */ var _api_AnnotationAPI_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./api/AnnotationAPI.js */ \"./src/api/AnnotationAPI.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! bootstrap */ \"./node_modules/bootstrap/dist/js/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_12__);\n/*\n *\n * Creators:\n *   - Marijn Koolen (Huygens ING, Royal Netherlands Academy of Arts and Sciences)\n *   - Jaap Blom (Netherlands Institute for Sound and Vision)\n *\n */\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar ScholarlyWebAnnotator =\n/*#__PURE__*/\nfunction () {\n  function ScholarlyWebAnnotator(configuration) {\n    _classCallCheck(this, ScholarlyWebAnnotator);\n\n    this.clientConfig = _rdfa_annotation_config_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"];\n    this.configureClient(configuration);\n  }\n\n  _createClass(ScholarlyWebAnnotator, [{\n    key: \"addAnnotationClient\",\n    value: function addAnnotationClient(element) {\n      react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_AnnotationClient_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        config: this.clientConfig\n      }), element);\n    }\n  }, {\n    key: \"overrideDefaultConfiguration\",\n    value: function overrideDefaultConfiguration(configuration) {\n      var _this = this;\n\n      Object.keys(configuration).forEach(function (property) {\n        _this.clientConfig[property] = configuration[property];\n      });\n    }\n  }, {\n    key: \"configureClient\",\n    value: function configureClient(configuration) {\n      if (configuration) this.overrideDefaultConfiguration(configuration);\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].setServerAddress(this.clientConfig.services.AnnotationServer.api);\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].setBaseAnnotationOntology(this.clientConfig.baseAnnotationOntologyURL);\n      this.configureObservers();\n      this.topResources = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTopRDFaResources();\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].pollServer();\n\n      if (localStorage.userDetails) {\n        _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].loginUser(JSON.parse(localStorage.userDetails));\n      } else {\n        console.log(\"configureClient - loadResources\");\n        _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].loadResources();\n      }\n    }\n  }, {\n    key: \"configureObservers\",\n    value: function configureObservers() {\n      _util_DOMUtil_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].setObserverNodeClass(this.clientConfig.targetObserver.targetObserverClass);\n      this.observerNodes = _util_DOMUtil_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getObserverNodes();\n      _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setObserverNodes(this.observerNodes);\n      this.setSelectionListener(); //console.log(\"configureObservers - setAnnotationAttributes\");\n\n      this.setAnnotationAttributes();\n\n      if (this.clientConfig.targetObserver.observeMutations) {\n        this.startObserver();\n      }\n    }\n  }, {\n    key: \"setAnnotationAttributes\",\n    value: function setAnnotationAttributes() {\n      for (var index = 0; index < this.observerNodes.length; index++) {\n        this.setSelectWholeElement(this.observerNodes[index]); //console.log(\"setAnnotationAttributes - setUnselectable\");\n\n        this.setUnselectable(this.observerNodes[index]);\n      }\n    }\n  }, {\n    key: \"setSelectWholeElement\",\n    value: function setSelectWholeElement(node) {\n      var selectWholeNodes = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getSelectWholeNodes(node);\n      selectWholeNodes.forEach(function (selectWholeNode) {\n        selectWholeNode.addEventListener('mouseup', _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].checkSelectionRange, false);\n      });\n    }\n  }, {\n    key: \"setUnselectable\",\n    value: function setUnselectable(node) {\n      //console.log(\"setUnselectable - resetIgnoreNodes\");\n      _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].resetIgnoreNodes();\n      var ignoreNodes = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRDFaIgnoreNodes(node);\n      ignoreNodes.forEach(function (ignoreNode) {\n        ignoreNode.style.webkitUserSelect = \"none\";\n        ignoreNode.style.cursor = \"not-allowed\";\n      });\n    }\n  }, {\n    key: \"startObserver\",\n    value: function startObserver() {\n      var _this2 = this;\n\n      var observer = new MutationObserver(function (mutations) {\n        // if something in the observer nodes changes,\n        // set unselectable and whole element attributes\n        _this2.setAnnotationAttributes(_this2.observerNodes); // check if there are new resources\n\n\n        if (_this2.resourcesChanged()) //console.log(\"startObserver - loadResources\");\n          _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].loadResources(); // trigger reload of annotations\n      });\n\n      if (!this.clientConfig.targetObserver.observerConfig) {\n        // if observer config is missing, set default observer config\n        this.clientConfig.targetObserver.observerConfig = {\n          childList: true,\n          attributes: false,\n          subtree: true\n        };\n      }\n\n      for (var index = 0; index < this.observerNodes.length; index++) {\n        observer.observe(this.observerNodes[index], this.clientConfig.targetObserver.observerConfig);\n      }\n    }\n  }, {\n    key: \"setSelectionListener\",\n    value: function setSelectionListener() {\n      document.addEventListener(\"selectionchange\", function () {\n        _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setDOMSelection();\n      });\n    }\n  }, {\n    key: \"setAnnotationListener\",\n    value: function setAnnotationListener(element) {\n      _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].addListenerElement(element);\n    }\n  }, {\n    key: \"setSelection\",\n    value: function setSelection(element, selection, mimeType) {\n      _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setSelection(element, selection, mimeType);\n    }\n  }, {\n    key: \"annotateSelection\",\n    value: function annotateSelection(data) {\n      try {\n        _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setSelection(data.element, data.selection, data.mimeType);\n        var candidateTargets = _util_TargetUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getCandidateRDFaTargets();\n\n        if (candidateTargets.highlighted) {\n          _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].createAnnotation([candidateTargets.highlighted]);\n        } else {\n          _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].createAnnotation(candidateTargets.wholeNodes);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }, {\n    key: \"setImageSelection\",\n    value: function setImageSelection(element, coords) {\n      _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setImageSelection(element, coords);\n    }\n  }, {\n    key: \"setAudioselection\",\n    value: function setAudioselection(element, interval) {\n      _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setAudioSelection(element, interval);\n    }\n  }, {\n    key: \"setVideoselection\",\n    value: function setVideoselection(element, interval) {\n      _util_SelectionUtil_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setVideoSelection(element, interval);\n    }\n  }, {\n    key: \"getAnnotations\",\n    value: function getAnnotations(resourceId) {\n      return _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].lookupAnnotationsByTarget(resourceId);\n    }\n  }, {\n    key: \"resourcesChanged\",\n    value: function resourcesChanged() {\n      var topResources = _util_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTopRDFaResources();\n      if (this.listsAreEqual(topResources, this.topResources)) return false;\n      this.topResources = topResources; // update register resources list\n\n      return true;\n    }\n  }, {\n    key: \"listsAreEqual\",\n    value: function listsAreEqual(list1, list2) {\n      if (list1.every(function (id) {\n        return list2.includes(id);\n      }) && list2.every(function (id) {\n        return list1.includes(id);\n      })) return true;\n      return false;\n    }\n  }]);\n\n  return ScholarlyWebAnnotator;\n}();\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/swac.jsx?");

/***/ }),

/***/ "./src/util/AnnotationUtil.js":
/*!************************************!*\
  !*** ./src/util/AnnotationUtil.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SelectionUtil.js */ \"./src/util/SelectionUtil.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n//aims to implement https://www.w3.org/TR/annotation-model\n\nvar AnnotationUtil = {\n  /*************************************************************************************\n   ************************************* W3C BUSINESS LOGIC HERE ********************\n  *************************************************************************************/\n  //called from components that want to create a new annotation with a proper target\n  generateW3CAnnotation: function generateW3CAnnotation(annotationTargets, creator) {\n    if (!AnnotationUtil.hasTargets(annotationTargets)) throw new Error(\"Annotation requires a non-empty array of annotation targets.\");\n    if (creator === undefined) throw new Error(\"Annotation requires a creator object.\");\n    var targetList = annotationTargets.map(function (annotationTarget) {\n      return AnnotationUtil.makeAnnotationTarget(annotationTarget);\n    });\n    return {\n      \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n      type: \"Annotation\",\n      motivation: null,\n      creator: creator,\n      //TODO map to W3C\n      target: targetList\n    };\n  },\n  hasTargets: function hasTargets(targets) {\n    if (targets === undefined) return false;\n    if (!Array.isArray(targets)) return false;\n    if (targets.length === 0) return false;\n    return true;\n  },\n  makeAnnotationTarget: function makeAnnotationTarget(target) {\n    if (target.source === undefined) throw Error(\"annotation target requires a source\");\n    var selector = null;\n    var targetType = AnnotationUtil.determineTargetType(target);\n\n    if (target.params !== undefined) {\n      selector = AnnotationUtil.makeSelector(target.params, targetType);\n    }\n\n    return {\n      source: target.source,\n      selector: selector,\n      scope: window.location.href,\n      type: targetType\n    };\n  },\n  determineTargetType: function determineTargetType(target) {\n    if (target.type === \"annotation\") return \"Annotation\";\n    if (target.mimeType === undefined) throw Error(\"annotation target requires a mimetype\");\n\n    if (target.mimeType.startsWith(\"video\")) {\n      return \"Video\";\n    } else if (target.mimeType.startsWith(\"audio\")) {\n      return \"Audio\";\n    } else if (target.mimeType.startsWith(\"image\")) {\n      return \"Image\";\n    } else if (target.mimeType.startsWith(\"text\")) {\n      return \"Text\";\n    } else {\n      return null;\n    }\n  },\n\n  /*************************************************************************************\n   ************************************* W3C Subresource HELPERS ***************\n  *************************************************************************************/\n  makeNestedPIDSelector: function makeNestedPIDSelector(breadcrumbTrail) {\n    if (!AnnotationUtil.hasSubresources(breadcrumbTrail)) {\n      throw new Error(\"makeNestedPIDSelector requires a breadcrumb trail\");\n    }\n\n    var nestedPIDList = breadcrumbTrail.map(function (breadcrumb) {\n      return {\n        id: breadcrumb.id,\n        property: breadcrumb.property,\n        type: breadcrumb.type\n      };\n    });\n    return {\n      \"@context\": \"http://boot.huygens.knaw.nl/annotate/swao.jsonld\",\n      type: \"NestedPIDSelector\",\n      value: nestedPIDList\n    };\n  },\n  makeSubresourceSelector: function makeSubresourceSelector(breadcrumbTrail) {\n    if (!AnnotationUtil.hasSubresources(breadcrumbTrail)) {\n      throw new Error(\"makeSubresourceSelector requires a breadcrumb trail\");\n    }\n\n    return {\n      \"@context\": \"http://boot.huygens.knaw.nl/annotate/swao.jsonld\",\n      type: \"SubresourceSelector\",\n      value: AnnotationUtil.makeSubresourceBranch(breadcrumbTrail)\n    };\n  },\n  makeSubresourceBranch: function makeSubresourceBranch(breadcrumbTrail) {\n    var top = breadcrumbTrail.shift();\n    var branch = {\n      id: top.id,\n      type: top.type\n    };\n    if (top.property) branch.property = top.property;\n    if (breadcrumbTrail.length) branch.subresource = AnnotationUtil.makeSubresourceBranch(breadcrumbTrail);\n    return branch;\n  },\n  hasSubresources: function hasSubresources(breadcrumbTrail) {\n    if (breadcrumbTrail === undefined) return false;\n    if (!Array.isArray(breadcrumbTrail)) return false;\n    if (breadcrumbTrail.length === 0) return false;\n    return breadcrumbTrail.every(function (breadcrumb) {\n      if (_typeof(breadcrumb) !== \"object\") return false;\n      var requiredProperties = [\"id\", \"type\", \"property\"];\n      return requiredProperties.every(function (property) {\n        return Object.keys(breadcrumb).includes(property);\n      });\n    });\n  },\n\n  /*************************************************************************************\n   ************************************* W3C MEDIA FRAGMENTS HELPERS ***************\n  *************************************************************************************/\n  makeSelector: function makeSelector(params, targetType) {\n    if (params.breadcrumbs !== undefined) {\n      var selector = AnnotationUtil.makeNestedPIDSelector(params.breadcrumbs);\n      if (targetType) selector.refinedBy = AnnotationUtil.makeMimeSelector(params, targetType);\n      return selector;\n    } else {\n      return AnnotationUtil.makeMimeSelector(params, targetType);\n    }\n  },\n  makeMimeSelector: function makeMimeSelector(params, targetType) {\n    if (targetType === \"Text\") {\n      return AnnotationUtil.makeTextSelector(params);\n    } else if ([\"Audio\", \"Image\", \"Video\"].includes(targetType)) {\n      return AnnotationUtil.makeMediaFragmentSelector(params);\n    } else {\n      return null;\n    }\n  },\n  makeMediaFragmentSelector: function makeMediaFragmentSelector(params) {\n    if (params === undefined) return null;\n\n    if (params.interval !== undefined) {\n      _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].checkInterval(params.interval);\n      return {\n        type: \"FragmentSelector\",\n        conformsTo: \"http://www.w3.org/TR/media-frags/\",\n        value: \"#t=\" + params.interval.start + \",\" + params.interval.end,\n        interval: params.interval\n      };\n    } else if (params.rect !== undefined) {\n      _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].checkRectangle(params.rect);\n      return {\n        type: \"FragmentSelector\",\n        conformsTo: \"http://www.w3.org/TR/media-frags/\",\n        value: \"#xywh=\" + params.rect.x + \",\" + params.rect.y + \",\" + params.rect.w + \",\" + params.rect.h,\n        rect: params.rect\n      };\n    } else {\n      return null;\n    }\n  },\n  makeTextSelector: function makeTextSelector(params) {\n    if (params === undefined || !params.position && !params.quote) return null;\n    var textPositionSelector = AnnotationUtil.makeTextPositionSelector(params.position);\n    var textQuoteSelector = AnnotationUtil.makeTextQuoteSelector(params.quote);\n\n    if (textPositionSelector && textQuoteSelector) {\n      return [textPositionSelector, textQuoteSelector];\n    } else if (textPositionSelector) {\n      return textPositionSelector;\n    } else if (textQuoteSelector) {\n      return textQuoteSelector;\n    }\n\n    return null;\n  },\n  makeTextQuoteSelector: function makeTextQuoteSelector(quote) {\n    if (quote === undefined) return null;\n    if (quote.exact === undefined) throw new Error(\"text quote parameters should contain property exact\");\n    if (quote.suffix === undefined) throw new Error(\"text quote parameters should contain property suffix\");\n    if (quote.prefix === undefined) throw new Error(\"text quote parameters should contain property prefix\");\n\n    if (quote.prefix !== undefined && quote.suffix !== undefined && quote.exact !== undefined) {\n      return {\n        \"type\": \"TextQuoteSelector\",\n        \"prefix\": quote.prefix,\n        \"suffix\": quote.suffix,\n        \"exact\": quote.exact\n      };\n    }\n\n    return null;\n  },\n  makeTextPositionSelector: function makeTextPositionSelector(position) {\n    if (!position) return null;\n    if (position.start === undefined) throw new Error(\"text position parameters should contain property start\");\n    if (position.end === undefined) throw new Error(\"text position parameters should contain property end\");\n\n    if (position.start !== undefined && position.end !== undefined) {\n      return {\n        \"type\": \"TextPositionSelector\",\n        \"start\": position.start,\n        \"end\": position.end\n      };\n    }\n\n    return null;\n  },\n  extractTemporalFragmentFromURI: function extractTemporalFragmentFromURI(uri) {\n    var i = uri.indexOf(\"#t=\");\n\n    if (i != -1) {\n      return uri.substring(i + 3).split(\",\");\n    }\n\n    return null;\n  },\n  extractSpatialFragmentFromURI: function extractSpatialFragmentFromURI(uri) {\n    var i = uri.indexOf(\"#xywh=\");\n\n    if (i != -1) {\n      var arr = uri.substring(i + 6).split(\",\");\n      return {\n        \"x\": arr[0],\n        \"y\": arr[1],\n        \"w\": arr[2],\n        \"h\": arr[3]\n      };\n    }\n\n    return null;\n  },\n  extractBodies: function extractBodies(annotation) {\n    return Array.isArray(annotation.body) ? annotation.body : [annotation.body];\n  },\n  extractTargets: function extractTargets(annotation) {\n    return Array.isArray(annotation.target) ? annotation.target : [annotation.target];\n  },\n  extractTargetIdentifier: function extractTargetIdentifier(annotationTarget) {\n    if (typeof annotationTarget === \"string\") return annotationTarget;\n    if (annotationTarget.id) return annotationTarget.id;\n    if (annotationTarget.source) // the target is a selection in a source\n      return annotationTarget.source;\n    return null;\n  },\n  extractTargetIdentifiers: function extractTargetIdentifiers(annotation) {\n    return AnnotationUtil.extractTargets(annotation).map(function (target) {\n      return AnnotationUtil.extractTargetIdentifier(target);\n    });\n  },\n\n  /*************************************************************************************\n   ************************************* UUID FUNCTIONS ****************************\n  *************************************************************************************/\n  guid: function guid() {\n    return AnnotationUtil.s4() + AnnotationUtil.s4() + \"-\" + AnnotationUtil.s4() + \"-\" + AnnotationUtil.s4() + \"-\" + AnnotationUtil.s4() + \"-\" + AnnotationUtil.s4() + AnnotationUtil.s4() + AnnotationUtil.s4();\n  },\n  s4: function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (AnnotationUtil);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/util/AnnotationUtil.js?");

/***/ }),

/***/ "./src/util/DOMUtil.js":
/*!*****************************!*\
  !*** ./src/util/DOMUtil.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _StringUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StringUtil.js */ \"./src/util/StringUtil.js\");\n\n\n\nvar DOMUtil = {\n  setObserverNodeClass: function setObserverNodeClass(observerNodeClass) {\n    this.observerNodeClass = observerNodeClass;\n  },\n  getObserverNodes: function getObserverNodes() {\n    return document.getElementsByClassName(this.observerNodeClass);\n  },\n\n  /*\n  *****************************************\n  * functions to trim whitespace usage in *\n  * text elements to align the HTML DOM   *\n  * with the browser view layer           *\n  *****************************************\n  */\n  getDisplayType: function getDisplayType(node) {\n    var cStyle = node.currentStyle || window.getComputedStyle(node, \"\");\n    return cStyle.display;\n  },\n  getTextNodeDisplayOffset: function getTextNodeDisplayOffset(textNode) {\n    var displayText = textNode.textContent;\n    var parentDisplayType = DOMUtil.getDisplayType(textNode.parentNode);\n\n    if (parentDisplayType === \"inline\") {\n      // if parent is inline element,\n      // multiple leading whitespace characters are collapsed to a single whitespace\n      if (displayText.length === 0 || !displayText.match(/^\\s+/)) {\n        return 0;\n      }\n\n      var leadingSpaces = displayText.match(/^\\s+/)[0];\n\n      if (leadingSpaces.length > 1) {\n        return leadingSpaces.length - 1;\n      } else {\n        return leadingSpaces.length;\n      }\n      /*\n      return 0;\n      */\n\n    } else {\n      if (textNode === textNode.parentNode.firstChild) {\n        displayText = displayText.trimLeft();\n      } else {\n        displayText = _StringUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].collapseLeftWhitespace(displayText);\n      }\n\n      return textNode.textContent.length - displayText.length;\n    }\n  },\n  getTextNodeDisplayText: function getTextNodeDisplayText(textNode) {\n    var displayText = textNode.textContent;\n    var parentDisplayType = DOMUtil.getDisplayType(textNode.parentNode); //console.log(\"getTextNodeDisplayText - parentDisplayType:\", parentDisplayType);\n\n    if (parentDisplayType === \"block\") {\n      if (textNode === textNode.parentNode.firstChild) {\n        displayText = displayText.trimLeft();\n      } else {\n        displayText = _StringUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].collapseLeftWhitespace(displayText);\n      }\n\n      if (textNode === textNode.parentNode.lastChild) {\n        displayText = displayText.trimRight();\n      } else {\n        displayText = _StringUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].collapseRightWhitespace(displayText);\n      } //console.log(\"displayText: #\" + displayText + \"#\");\n\n    } else {\n      displayText = _StringUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].collapseWhitespace(displayText); //console.log(\"displayText: #\" + displayText + \"#\");\n    }\n\n    return displayText;\n  },\n\n  /*\n  ***********************************\n  * DOM element selection functions *\n  ***********************************\n  */\n  getPreviousTextNode: function getPreviousTextNode(textNode) {\n    //var previousTextNode = null;\n    var parentNode = textNode.parentNode;\n    var parentTextNodes = DOMUtil.getTextNodes(parentNode);\n\n    while (parentNode !== document && parentTextNodes.indexOf(textNode) === 0) {\n      parentNode = parentNode.parentNode;\n      parentTextNodes = DOMUtil.getTextNodes(parentNode);\n    }\n\n    if (parentTextNodes.indexOf(textNode) === 0) return null;\n    return parentTextNodes[parentTextNodes.indexOf(textNode) - 1];\n  },\n  // return all text nodes contained within a node\n  getTextNodes: function getTextNodes(node) {\n    return DOMUtil.getDescendants(node).filter(function (node) {\n      return node.nodeType === window.Node.TEXT_NODE;\n    });\n  },\n  // return all text nodes in a list of nodes\n  filterTextNodes: function filterTextNodes(nodes) {\n    return nodes.filter(function (node) {\n      return node.nodeType === window.Node.TEXT_NODE;\n    });\n  },\n  // return all ELEMENT_NODE nodes in a list of nodes\n  getElementNodes: function getElementNodes(nodes) {\n    return nodes.filter(function (node) {\n      return node.nodeType === window.Node.ELEMENT_NODE;\n    });\n  },\n  // return all non-text nodes in a list of nodes\n  getNonTextNodes: function getNonTextNodes(nodes) {\n    return nodes.filter(function (node) {\n      return node.nodeType !== window.Node.TEXT_NODE;\n    });\n  },\n  // return all ancestor nodes of a node\n  getAncestors: function getAncestors(node) {\n    var parentNode = node.parentNode;\n    var ancestors = [];\n\n    if (parentNode && parentNode.nodeType !== window.Node.DOCUMENT_NODE) {\n      ancestors = DOMUtil.getAncestors(parentNode);\n      ancestors.push(parentNode);\n    }\n\n    return ancestors;\n  },\n  // return all descendant nodes of a node\n  // using depth-first traversal\n  getDescendants: function getDescendants(node) {\n    var descendants = [];\n\n    if (!node.hasChildNodes()) {\n      return descendants;\n    }\n\n    node.childNodes.forEach(function (childNode) {\n      // only consider element and text nodes, i.e. types 1 and 3\n      if (childNode.nodeType <= 3) {\n        descendants.push(childNode);\n        descendants = descendants.concat(DOMUtil.getDescendants(childNode));\n      }\n    });\n    return descendants;\n  },\n  // select all larger elements (excluding document)\n  findCommonAncestors: function findCommonAncestors(startNode, endNode) {\n    var startAncestors = DOMUtil.getAncestors(startNode);\n    startAncestors.push(startNode);\n    var currNode = endNode; // find lowest common ancestor\n\n    while (!startAncestors.includes(currNode)) {\n      currNode = currNode.parentNode;\n    } // return elements from lowest common ancestor upwards\n\n\n    return startAncestors.slice(0, startAncestors.indexOf(currNode) + 1);\n  },\n  determineNodeMimeType: function determineNodeMimeType(node) {\n    var mimetype = null; // 1. ignore non-element, non-text nodes\n\n    if (node.nodeType !== 3 && node.nodeType !== 1) return null; // 2. check if node has children\n\n    if (!node.hasChildren()) {\n      // options:\n      switch (node.nodeName) {\n        case \"#text\":\n          mimetype = \"text\";\n          break;\n\n        case \"CANVAS\":\n          mimetype = \"image\";\n          break;\n\n        case \"IMG\":\n          mimetype = \"image\";\n          break;\n\n        case \"VIDEO\":\n          mimetype = \"video\";\n          break;\n\n        default:\n          mimetype = \"text\";\n          break;\n      }\n\n      return {\n        node: node,\n        mimetype: mimetype\n      };\n    } else {\n      var childMimeTypes = node.forEach(function (childNode) {\n        return DOMUtil.determineNodeMimeType(childNode);\n      });\n      mimetype = childMimeTypes[0];\n      var singleType = childMimeTypes.every(function (childMimeType) {\n        childMimeType === mimetype;\n      });\n\n      if (singleType) {\n        return mimetype;\n      } else {\n        return \"mixed\";\n      }\n    } // 2a. if has children, determine mimetype of children\n    // 2\n\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (DOMUtil);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/util/DOMUtil.js?");

/***/ }),

/***/ "./src/util/FRBRooUtil.js":
/*!********************************!*\
  !*** ./src/util/FRBRooUtil.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rdflib/lib/parse */ \"./node_modules/rdflib/lib/parse.js\");\n/* harmony import */ var rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rdflib/lib/namespace */ \"./node_modules/rdflib/lib/namespace.js\");\n/* harmony import */ var rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rdflib/lib/data-factory */ \"./node_modules/rdflib/lib/data-factory.js\");\n/* harmony import */ var rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var rdflib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rdflib */ \"./node_modules/rdflib/lib/index.js\");\n/* harmony import */ var rdflib__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(rdflib__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _DOMUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DOMUtil.js */ \"./src/util/DOMUtil.js\");\n/* harmony import */ var _StringUtil_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StringUtil.js */ \"./src/util/StringUtil.js\");\n/* harmony import */ var _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./VocabularyUtil.js */ \"./src/util/VocabularyUtil.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\n\n\n\n\n\n\n\nvar FRBRooUtil = {\n  store: null,\n  RDF: rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default()(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"),\n  RDFS: rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default()(\"http://www.w3.org/2000/01/rdf-schema#\"),\n  importPredicate: \"http://www.w3.org/2002/07/owl#imports\",\n  baseAnnotationOntologyURL: null,\n  newStore: function newStore() {\n    return rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2___default.a.graph();\n  },\n  getAlternateLinkRefs: function getAlternateLinkRefs() {\n    var alternateLinks = FRBRooUtil.getAlternateLinks();\n    return alternateLinks.map(function (link) {\n      return {\n        url: link.href,\n        mimeType: link.type\n      };\n    });\n  },\n  getAlternateLinks: function getAlternateLinks() {\n    var linkElements = document.getElementsByTagName(\"link\");\n    return Array.from(linkElements).filter(FRBRooUtil.isAlternateLink);\n  },\n  isAlternateLink: function isAlternateLink(node) {\n    if (node.tagName !== \"LINK\") {\n      return false;\n    } else if (!node.getAttribute(\"rel\") || node.getAttribute(\"rel\") !== \"alternate\") {\n      return false;\n    } else if (!node.getAttribute(\"href\")) {\n      return false;\n    } else {\n      return true;\n    }\n  },\n  loadExternalResources: function loadExternalResources(vocabularyStore, callback) {\n    //console.log(vocabularyStore);\n    var resourceStore = {};\n    resourceStore.relations = FRBRooUtil.getRelations(vocabularyStore); //console.log(\"FRBRooUtil - loadExternalResources resourceStore:\", resourceStore);\n\n    FRBRooUtil.checkExternalResources(function (error, doIndexing, triples) {\n      if (error) {\n        console.log(error);\n        return callback(error, doIndexing, null);\n      } else if (!doIndexing) {\n        return callback(null, doIndexing, null);\n      } else {\n        resourceStore.triples = triples;\n        return callback(null, doIndexing, resourceStore);\n      }\n    });\n  },\n  checkExternalResources: function checkExternalResources(callback) {\n    var externalResourcesRefs = FRBRooUtil.getAlternateLinkRefs();\n    var doIndexing = false;\n\n    if (externalResourcesRefs.length === 0) {\n      return callback(null, doIndexing, null);\n    }\n\n    externalResourcesRefs.forEach(function (ref) {\n      doIndexing = true;\n      var store = FRBRooUtil.newStore();\n      FRBRooUtil.readExternalResources(ref.url, function (error, externalRelations) {\n        if (error) {\n          console.log(\"Error reading external resources for URL\", ref);\n          console.log(error);\n          return callback(error, doIndexing, store);\n        } else {\n          try {\n            FRBRooUtil.storeExternalResources(store, externalRelations, ref.url, ref.mimeType);\n          } catch (error) {\n            console.log(\"Error storing external resources:\", externalRelations);\n            return callback(error, false, null);\n          }\n\n          return callback(null, doIndexing, store);\n        }\n      });\n    });\n  },\n  readExternalResources: function readExternalResources(url, callback) {\n    fetch(url, {\n      method: \"GET\"\n    }).then(function (response) {\n      return response.text();\n    }).then(function (relationsData) {\n      return callback(null, relationsData);\n    }).catch(function (error) {\n      console.log(\"Error reading specified vocabulary:\", url);\n      console.log(error);\n      return callback(error, null);\n    });\n  },\n  storeExternalResources: function storeExternalResources(store, frbrooRelationsString, baseURI, mimeType) {\n    if (!store) {\n      throw Error(\"Invalid store given\");\n    }\n\n    rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0___default()(frbrooRelationsString, store, baseURI, mimeType);\n  },\n  findExternalObjectRelations: function findExternalObjectRelations(resourceStore, resource, relationType) {\n    var objectNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var relationNode = undefined;\n\n    if (relationType) {\n      relationNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(relationType);\n    }\n\n    return resourceStore.triples.statementsMatching(undefined, relationNode, objectNode);\n  },\n  findExternalSubjectRelations: function findExternalSubjectRelations(resourceStore, resource, relationType) {\n    var subjectNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var relationNode = undefined;\n\n    if (relationType) {\n      relationNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(relationType);\n    }\n\n    return resourceStore.triples.statementsMatching(subjectNode, relationNode, undefined);\n  },\n  findExternalResources: function findExternalResources(resourceStore, resources, relationType) {\n    var relationNode = undefined;\n\n    if (relationType) {\n      relationNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(relationType);\n    }\n\n    try {\n      var resourceList = ensureList(resources);\n      var relations = [];\n      resourceList.forEach(function (resource) {\n        var node = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n        var subjectRelations = resourceStore.triples.statementsMatching(node, relationNode, undefined);\n        var objectRelations = resourceStore.triples.statementsMatching(undefined, relationNode, node);\n        relations = relations.concat(subjectRelations, objectRelations);\n      });\n      return relations;\n    } catch (error) {\n      console.log(error);\n      return null;\n    }\n  },\n  gatherResourceProperties: function gatherResourceProperties(store, resource) {\n    var properties = {\n      rdfaResource: resource\n    };\n    var node = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var subjectRelations = store.statementsMatching(node, undefined, undefined);\n    var objectRelations = store.statementsMatching(undefined, undefined, node);\n    subjectRelations.forEach(function (relation) {\n      //console.log(\"resource:\", resource);\n      //console.log(\"\\tpredicate:\", relation.predicate.value);\n      //console.log(\"\\tobject:\", relation.object.value);\n      if (relation.predicate.value === FRBRooUtil.RDF('type').value) {\n        FRBRooUtil.addRDFTypeProperty(properties, relation.object.value);\n      }\n    });\n\n    if (subjectRelations.length + objectRelations.length === 0) {\n      return null;\n    } else {\n      return properties;\n    }\n  },\n  getRDFTypeLabels: function getRDFTypeLabels(typeList) {\n    if (!Array.isArray(typeList)) {\n      return null; //console.log(\"typeList:\", typeList);\n      //throw Error(\"typeList should be an array of RDF type strings\");\n    }\n\n    return typeList.map(function (rdfType) {\n      var index = rdfType.indexOf(\"#\");\n      return rdfType.substr(index);\n    });\n  },\n  getRDFType: function getRDFType(resourceStore, resource) {\n    var node = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var triples = resourceStore.triples.statementsMatching(node, FRBRooUtil.RDF('type'), undefined);\n\n    if (triples.length > 0) {\n      return triples.map(function (triple) {\n        return triple.object.value;\n      });\n    }\n\n    return null;\n  },\n  addRDFTypeProperty: function addRDFTypeProperty(properties, rdfType) {\n    if (!rdfType) {\n      return true;\n    } else if (properties.hasOwnProperty(\"rdfType\") === false) {\n      properties.rdfType = rdfType;\n      return true;\n    } else if (typeof properties.rdfType === \"string\") {\n      properties.rdfType = [properties.rdfType, rdfType];\n    } else if (Array.isArray(properties.rdfType)) {\n      properties.rdfType.push(rdfType);\n    } else {\n      throw Error(\"properties.rdfType should be string or array\");\n    }\n  },\n  indexExternalResources: function indexExternalResources(resourceStore, resources) {\n    var externalResourceIndex = {};\n    resources.forEach(function (resource) {\n      var relation = FRBRooUtil.resourceGetParentRelation(resourceStore, resource); //console.log(resource, relation);\n\n      if (relation) {\n        externalResourceIndex[resource] = relation;\n        var rdfType = FRBRooUtil.getRDFType(resourceStore, resource);\n        externalResourceIndex[resource].type = \"external\";\n        externalResourceIndex[resource].rdfType = rdfType;\n        externalResourceIndex[resource].rdfTypeLabel = FRBRooUtil.getRDFTypeLabels(rdfType);\n\n        if (!externalResourceIndex.hasOwnProperty(relation.parentResource)) {\n          FRBRooUtil.indexExternalParentResource(resourceStore, externalResourceIndex, relation.parentResource);\n        }\n      }\n    });\n    return externalResourceIndex;\n  },\n  indexExternalParentResource: function indexExternalParentResource(resourceStore, index, resource) {\n    //console.log(\"FRBRooUtil - indexExternalParentResource:\", resource);\n    if (!FRBRooUtil.isKnownResource(resourceStore, resource)) {\n      throw Error(\"parentResource does not exist: \" + resource);\n    }\n\n    var resourceInfo = {\n      resource: resource,\n      type: \"external\"\n    };\n    resourceInfo.rdfType = FRBRooUtil.getRDFType(resourceStore, resource);\n    resourceInfo.rdfTypeLabel = FRBRooUtil.getRDFTypeLabels(resourceInfo.rdfType);\n    index[resource];\n    var relation = FRBRooUtil.resourceGetParentRelation(resourceStore, resource);\n\n    if (relation) {\n      resourceInfo.parentResource = relation.parentResource;\n      resourceInfo.relation = relation.relation;\n\n      if (!index.hasOwnProperty(relation.parentResource)) {\n        FRBRooUtil.indexExternalParentResource(resourceStore, index, relation.parentResource);\n      }\n    } //console.log(\"FRBRooUtil - indexExternalParentResource:\", resource, resourceInfo);\n\n\n    index[resource] = resourceInfo;\n  },\n  mapRepresentedResources: function mapRepresentedResources(resourceStore, resources) {\n    if (!resources || !Array.isArray(resources)) {\n      throw Error(\"resources should be an array of resource IDs\");\n    }\n\n    var representedResourceIndex = {}; //console.log(hasRepresentation);\n\n    resources.forEach(function (resource) {\n      //console.log(\"FRBRooUtil - resource:\", resource);\n      FRBRooUtil.mapRepresentedObjectResources(resourceStore, resource, representedResourceIndex);\n      FRBRooUtil.mapRepresentedSubjectResources(resourceStore, resource, representedResourceIndex);\n      FRBRooUtil.mapFragmentObjectResources(resourceStore, resource, representedResourceIndex);\n      FRBRooUtil.mapFragmentSubjectResources(resourceStore, resource, representedResourceIndex);\n    });\n    return representedResourceIndex;\n  },\n  mapFragmentObjectResources: function mapFragmentObjectResources(resourceStore, resource, representedResourceIndex) {\n    var hasFragmentIn = FRBRooUtil.baseAnnotationOntologyURL + \"#hasFragmentIn\";\n    var hasFragmentOf = FRBRooUtil.baseAnnotationOntologyURL + \"#hasFragmentOf\";\n    var objectRelations = FRBRooUtil.findExternalObjectRelations(resourceStore, resource, hasFragmentIn);\n    var objectRelations = objectRelations.concat(FRBRooUtil.findExternalObjectRelations(resourceStore, resource, hasFragmentOf));\n\n    if (objectRelations.length > 0) {\n      FRBRooUtil.addIndexEntry(representedResourceIndex, resource, objectRelations[0]);\n    }\n  },\n  mapFragmentSubjectResources: function mapFragmentSubjectResources(resourceStore, resource, representedResourceIndex) {\n    var isFragmentIn = FRBRooUtil.baseAnnotationOntologyURL + \"#isFragmentIn\";\n    var isFragmentOf = FRBRooUtil.baseAnnotationOntologyURL + \"#isFragmentOf\";\n    var subjectRelations = FRBRooUtil.findExternalSubjectRelations(resourceStore, resource, isFragmentIn);\n    var subjectRelations = subjectRelations.concat(FRBRooUtil.findExternalSubjectRelations(resourceStore, resource, isFragmentOf));\n\n    if (subjectRelations.length > 0) {\n      FRBRooUtil.addIndexEntry(representedResourceIndex, resource, subjectRelations[0]);\n    }\n  },\n  mapRepresentedObjectResources: function mapRepresentedObjectResources(resourceStore, resource, representedResourceIndex) {\n    var hasRepresentation = FRBRooUtil.baseAnnotationOntologyURL + \"#hasRepresentation\";\n    var objectRelations = FRBRooUtil.findExternalObjectRelations(resourceStore, resource, hasRepresentation);\n\n    if (objectRelations.length > 0) {\n      FRBRooUtil.addIndexEntry(representedResourceIndex, resource, objectRelations[0]);\n    }\n  },\n  mapRepresentedSubjectResources: function mapRepresentedSubjectResources(resourceStore, resource, representedResourceIndex) {\n    var isRepresentationOf = FRBRooUtil.baseAnnotationOntologyURL + \"#isRepresentationOf\";\n    var subjectRelations = FRBRooUtil.findExternalSubjectRelations(resourceStore, resource, isRepresentationOf);\n\n    if (subjectRelations.length > 0) {\n      FRBRooUtil.addIndexEntry(representedResourceIndex, resource, subjectRelations[0]);\n    }\n  },\n  addIndexEntry: function addIndexEntry(index, resource, relation) {\n    if (typeof resource !== \"string\") {\n      throw Error(\"resource must be a string\");\n    } else if (!FRBRooUtil.isRDFTriple(relation)) {\n      throw Error(\"relation must be RDF triple\");\n    }\n\n    var entry = null;\n\n    if (relation.subject.value === resource) {\n      entry = {\n        resource: resource,\n        relation: relation.predicate.value,\n        parentResource: relation.object.value\n      };\n    } else if (relation.object.value === resource) {\n      entry = {\n        resource: resource,\n        relation: relation.predicate.value,\n        parentResource: relation.subject.value\n      };\n    } else {\n      throw Error(\"relation must contain resource as subject or object\");\n    }\n\n    index[resource] = entry;\n    return true;\n  },\n  isRDFTriple: function isRDFTriple(triple) {\n    if (!triple || _typeof(triple) !== \"object\") {\n      return false;\n    } else if (!triple.hasOwnProperty(\"subject\") || !triple.subject.hasOwnProperty(\"value\")) {\n      return false;\n    } else if (!triple.hasOwnProperty(\"predicate\") || !triple.subject.hasOwnProperty(\"value\")) {\n      return false;\n    } else if (!triple.hasOwnProperty(\"object\") || !triple.subject.hasOwnProperty(\"value\")) {\n      return false;\n    } else {\n      return true;\n    }\n  },\n  readVocabularies: function readVocabularies(vocabularyURLs, callback) {\n    var vocabularies = [];\n\n    if (vocabularyURLs.length === 0) {\n      return callback(null, vocabularies);\n    }\n\n    var lastURL = vocabularyURLs[vocabularyURLs.length - 1];\n    vocabularyURLs.forEach(function (vocabularyURL) {\n      FRBRooUtil.readVocabulary(vocabularyURL, function (error, vocabulary) {\n        if (error) {\n          return callback(error, null);\n        } else {\n          vocabularies.push(vocabulary);\n\n          if (vocabularyURL === lastURL) {\n            return callback(null, vocabularies);\n          }\n        }\n      });\n    });\n  },\n  readVocabulary: function readVocabulary(vocabularyURL, callback) {\n    if (vocabularyURL.endsWith(\"#\")) {\n      vocabularyURL = vocabularyURL.substring(0, vocabularyURL.length - 1);\n    }\n\n    var vocab = {\n      url: vocabularyURL,\n      data: null\n    };\n    FRBRooUtil.readExternalResources(vocabularyURL, function (error, data) {\n      if (error) {\n        return callback(error, null);\n      } else {\n        vocab.data = data;\n        return callback(null, vocab);\n      }\n    });\n  },\n  makeVocabularyStore: function makeVocabularyStore(vocabularies) {\n    if (!Array.isArray(vocabularies)) {\n      throw Error(\"cannot make store if no vocabulary data is given\");\n    }\n\n    var store = {\n      vocabularies: [],\n      triples: rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2___default.a.graph()\n    };\n    vocabularies.forEach(function (vocabulary) {\n      if (!FRBRooUtil.isValidVocabulary(vocabulary)) {\n        throw Error(\"Invalid vocabulary data! vocabulary should have properties 'url' and 'data'\");\n      }\n\n      store.vocabularies.push(vocabulary.url);\n      rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0___default()(vocabulary.data, store.triples, vocabulary.url, undefined);\n    });\n    return store;\n  },\n  isValidVocabulary: function isValidVocabulary(vocabulary) {\n    if (!vocabulary || _typeof(vocabulary) !== \"object\") {\n      return false;\n    } else if (!vocabulary.hasOwnProperty(\"url\")) {\n      return false;\n    } else if (!vocabulary.hasOwnProperty(\"data\")) {\n      return false;\n    } else {\n      return true;\n    }\n  },\n  isValidVocabularyStore: function isValidVocabularyStore(vocabularyStore) {\n    if (!vocabularyStore || _typeof(vocabularyStore) !== \"object\") {\n      return false;\n    } else if (!vocabularyStore.hasOwnProperty(\"vocabularies\")) {\n      return false;\n    } else if (!vocabularyStore.hasOwnProperty(\"triples\")) {\n      return false;\n    } else {\n      return true;\n    }\n  },\n  getHierarchicalRelations: function getHierarchicalRelations(vocabularyStore) {\n    var relations = {\n      includes: [],\n      isIncludedIn: []\n    };\n    var includesProperty = _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getLabelClass(vocabularyStore.triples, 'includes');\n\n    if (!includesProperty) {\n      //console.log(\"FRBRooUtil - vocabularyStore\", vocabularyStore);\n      throw Error(\"Cannot read base includes property\");\n    }\n\n    var includesSubProperties = _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getDescendantProperties(vocabularyStore.triples, includesProperty);\n    relations.includes.push(includesProperty);\n    relations.includes = relations.includes.concat(includesSubProperties);\n    relations.includes.forEach(function (includeProperty) {\n      var inverse = _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getInverseOfRelation(vocabularyStore.triples, includeProperty);\n\n      if (inverse) {\n        relations.isIncludedIn.push(inverse);\n      }\n    }); //console.log(\"includesProperty:\", includesProperty);\n    //console.log(\"includesSubProperties:\", includesSubProperties);\n    //console.log(\"relations:\", relations);\n\n    return relations;\n  },\n  getRepresentationRelations: function getRepresentationRelations(vocabularyStore) {\n    var relations = {\n      hasRepresentation: [],\n      isRepresentationOf: []\n    };\n    var hasRepresentationProperty = _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getLabelClass(vocabularyStore.triples, 'hasRepresentation');\n    var hasRepresentationSubProperties = _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getDescendantProperties(vocabularyStore.triples, hasRepresentationProperty);\n    relations.hasRepresentation.push(hasRepresentationProperty);\n    relations.hasRepresentation = relations.hasRepresentation.concat(hasRepresentationSubProperties);\n    relations.isRepresentationOf = relations.hasRepresentation.map(function (includeProperty) {\n      return _VocabularyUtil_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getInverseOfRelation(vocabularyStore.triples, includeProperty);\n    }); //console.log(\"includesProperty:\", includesProperty);\n    //console.log(\"includesSubProperties:\", includesSubProperties);\n    //console.log(\"relations:\", relations);\n\n    return relations;\n  },\n  getRelations: function getRelations(vocabularyStore) {\n    var relations = {};\n    var hierarchicalRelations = FRBRooUtil.getHierarchicalRelations(vocabularyStore);\n    var representationRelations = FRBRooUtil.getRepresentationRelations(vocabularyStore);\n    relations.includes = hierarchicalRelations.includes;\n    relations.isIncludedIn = hierarchicalRelations.isIncludedIn;\n    relations.hasRepresentation = representationRelations.hasRepresentation;\n    relations.isRepresentationOf = representationRelations.isRepresentationOf;\n    return relations;\n  },\n  getImports: function getImports(vocabularyStore) {\n    if (!FRBRooUtil.isValidVocabularyStore(vocabularyStore)) {\n      throw Error(\"Invalid vocabularyStore given\");\n    }\n\n    if (!FRBRooUtil.baseAnnotationOntologyURL) {\n      console.log(\"No baseAnnotationOntologyURL set!\");\n    }\n\n    var imports = [];\n    vocabularyStore.vocabularies.forEach(function (vocabularyURL) {\n      var vocabularyNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(vocabularyURL);\n      var importNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(FRBRooUtil.importPredicate); //console.log(\"vocabularyNode:\", vocabularyNode);\n      //console.log(\"importNode:\", importNode);\n\n      var triples = vocabularyStore.triples.each(vocabularyNode, importNode, undefined); //console.log(\"triples:\", triples);\n\n      if (vocabularyURL === FRBRooUtil.baseAnnotationOntologyURL) {\n        // don't import beyond the base annotation ontology\n        return;\n      }\n\n      triples.forEach(function (triple) {\n        if (!vocabularyStore.vocabularies.includes(triple.value)) {\n          imports.push(triple.value);\n        }\n      });\n    });\n    return imports;\n  },\n  updateVocabularyStore: function updateVocabularyStore(vocabularyStore, vocabularies) {\n    if (!FRBRooUtil.isValidVocabularyStore(vocabularyStore)) {\n      throw Error(\"Invalid vocabularyStore given\");\n    } else if (!vocabularies || !Array.isArray(vocabularies)) {\n      throw Error(\"vocabularies must be an Array of vocabulary objects\");\n    } else {\n      vocabularies.forEach(function (vocabulary) {\n        if (!FRBRooUtil.isValidVocabulary(vocabulary)) {\n          throw Error(\"Invalid vocabulary data! vocabulary should have properties 'url' and 'data'\");\n        }\n      });\n    }\n\n    vocabularies.forEach(function (vocabulary) {\n      vocabularyStore.vocabularies.push(vocabulary.url);\n      rdflib_lib_parse__WEBPACK_IMPORTED_MODULE_0___default()(vocabulary.data, vocabularyStore.triples, vocabulary.url, undefined);\n    });\n  },\n  importAndUpdate: function importAndUpdate(vocabularyStore, callback) {\n    if (!FRBRooUtil.isValidVocabularyStore(vocabularyStore)) {\n      throw Error(\"Invalid vocabularyStore given\");\n    }\n\n    var t0 = performance.now();\n    var imports = FRBRooUtil.getImports(vocabularyStore);\n    var t1 = performance.now(); //console.log(\"imports:\", imports);\n\n    if (imports.length > 0) {\n      FRBRooUtil.readVocabularies(imports, function (error, vocabularies) {\n        if (error) {\n          return callback(error, false);\n        }\n\n        var t2 = performance.now();\n        FRBRooUtil.updateVocabularyStore(vocabularyStore, vocabularies);\n        var t3 = performance.now();\n        FRBRooUtil.importAndUpdate(vocabularyStore, function (error, done) {\n          if (error) {\n            console.log(error);\n            return callback(error, false);\n          } else {\n            var t4 = performance.now(); //console.log(\"Call to getImports took \" + (t1 - t0) + \" milliseconds.\");\n            //console.log(\"Call to readVocabularies took \" + (t2 - t1) + \" milliseconds.\");\n            //console.log(\"Call to updateVocabularyStore took \" + (t3 - t2) + \" milliseconds.\");\n            //console.log(\"Call to importAndUpdate took \" + (t4 - t3) + \" milliseconds.\");\n\n            return callback(null, done);\n          }\n        });\n      });\n    } else {\n      return callback(null, true);\n    }\n  },\n  loadVocabularies: function loadVocabularies(callback) {\n    var vocabularyURLs = [];\n    var vocabData = [];\n    var t0 = performance.now();\n    _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].listVocabularyURLs(document, vocabularyURLs); // read initial vocabularies\n    //console.log(\"vocabularyURLs:\", vocabularyURLs);\n\n    var t1 = performance.now();\n\n    if (vocabularyURLs.length === 0) {\n      // make an empty store if there are no vocabularies\n      var vocabularyStore = FRBRooUtil.makeVocabularyStore([]);\n      return callback(null, null);\n    }\n\n    FRBRooUtil.readVocabularies(vocabularyURLs, function (error, vocabularies) {\n      if (error) {\n        return callback(error, null);\n      } else {\n        var t2 = performance.now(); // make vocabulary store\n        //console.log(\"vocabularies:\", vocabularies);\n\n        var _vocabularyStore = FRBRooUtil.makeVocabularyStore(vocabularies);\n\n        var t3 = performance.now(); //console.log(\"vocabularyStore:\", vocabularyStore);\n        // iterate: 1) get imports, 2) update store\n\n        FRBRooUtil.importAndUpdate(_vocabularyStore, function (error, updatesDone) {\n          if (error) {\n            return callback(error, _vocabularyStore);\n          } else {\n            var t4 = performance.now(); //console.log(\"Call to listVocabularyURLs took \" + (t1 - t0) + \" milliseconds.\");\n            //console.log(\"Call to readVocabularies took \" + (t2 - t1) + \" milliseconds.\");\n            //console.log(\"Call to makeVocabularyStore took \" + (t3 - t2) + \" milliseconds.\");\n            //console.log(\"Call to importAndUpdate took \" + (t4 - t3) + \" milliseconds.\");\n\n            return callback(null, _vocabularyStore);\n          }\n        });\n      }\n    });\n  },\n  determineResourceHierarchy: function determineResourceHierarchy(resourceStore, resource) {\n    if (!resourceStore) {\n      throw Error(\"Invalid resourceStore\");\n    } else if (!FRBRooUtil.isKnownResource(resourceStore, resource)) {\n      throw Error(\"Unknown resource\");\n    }\n\n    var parentRelation = FRBRooUtil.resourceGetParentRelation(resourceStore, resource);\n\n    if (parentRelation) {\n      return parentRelation;\n    } else {\n      return {\n        resource: resource\n      };\n    }\n  },\n  resourceGetParentRelation: function resourceGetParentRelation(resourceStore, resource) {\n    // assumption is that in external resources store, each resource has a single parent.\n    var relation = null;\n    relation = FRBRooUtil.resourceGetParentSubjectRelation(resourceStore, resource);\n\n    if (relation) {\n      return relation;\n    }\n\n    relation = FRBRooUtil.resourceGetParentObjectRelation(resourceStore, resource);\n    return relation;\n  },\n  resourceHasParent: function resourceHasParent(resourceStore, resource) {\n    if (!FRBRooUtil.isKnownResource(resourceStore, resource)) {\n      throw Error(\"Unknown resource\");\n    }\n\n    var relation = FRBRooUtil.resourceGetParentRelation(resourceStore, resource);\n\n    if (relation) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  resourceGetParentSubjectRelation: function resourceGetParentSubjectRelation(resourceStore, resource) {\n    var resourceNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var parentRelation = null;\n    resourceStore.relations.includes.some(function (relation) {\n      var relationNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(relation);\n      var subject = resourceStore.triples.any(undefined, relationNode, resourceNode);\n\n      if (subject) {\n        parentRelation = {\n          resource: resource,\n          parentResource: subject.value,\n          relation: relation\n        };\n      }\n    });\n    return parentRelation;\n  },\n  resourceGetParentObjectRelation: function resourceGetParentObjectRelation(resourceStore, resource) {\n    var resourceNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var parentRelation = null;\n    resourceStore.relations.isIncludedIn.some(function (relation) {\n      var relationNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(relation);\n      var object = resourceStore.triples.any(resourceNode, relationNode, undefined);\n\n      if (object) {\n        parentRelation = {\n          resource: resource,\n          parentResource: object.value,\n          relation: relation\n        };\n      }\n    });\n    return parentRelation;\n  },\n  isKnownResource: function isKnownResource(resourceStore, resource) {\n    if (!resourceStore) {\n      throw Error(\"Invalid resourceStore\");\n    } else if (!resource) {\n      throw Error(\"Invalid resource\");\n    }\n\n    var resourceNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(resource);\n    var triple = resourceStore.triples.any(resourceNode, undefined, undefined);\n\n    if (!triple) {\n      triple = resourceStore.triples.any(undefined, undefined, resourceNode);\n    }\n\n    return triple !== undefined;\n  },\n  addBreadcrumb: function addBreadcrumb(labelTrail, source) {\n    labelTrail.unshift({\n      id: source.data.rdfaResource,\n      property: source.data.rdfaProperty,\n      type: source.data.rdfTypeLabel\n    });\n  },\n  createBreadcrumbTrail: function createBreadcrumbTrail(externalResourceIndex, resourceId) {\n    var rootFound = false;\n    var labelTrail = [];\n\n    while (!rootFound) {\n      if (!externalResourceIndex.hasOwnProperty(resourceId)) {\n        throw Error(\"Invalid resource\");\n      }\n\n      var data = externalResourceIndex[resourceId];\n      var breadcrumb = {};\n      breadcrumb.type = data.rdfType;\n      breadcrumb.id = resourceId;\n      breadcrumb.property = data.relation;\n      labelTrail.unshift(breadcrumb);\n\n      if (resourceId !== undefined && data.hasOwnProperty(\"parentResource\")) {\n        resourceId = data.parentResource;\n      } else {\n        rootFound = true;\n      }\n    }\n\n    return labelTrail;\n  }\n};\n\nvar ensureList = function ensureList(resources) {\n  if (typeof resources === \"string\" || resources instanceof String) {\n    return [resources];\n  } else if (Array.isArray(resources)) {\n    return resources;\n  } else {\n    throw Error(\"resources should be string or list of strings\");\n  }\n};\n\nvar invalidVocabularyStore = function invalidVocabularyStore(vocabularyStore) {\n  throw Error(\"Invalid vocabularyStore given\");\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FRBRooUtil);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/util/FRBRooUtil.js?");

/***/ }),

/***/ "./src/util/RDFaUtil.js":
/*!******************************!*\
  !*** ./src/util/RDFaUtil.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DOMUtil.js */ \"./src/util/DOMUtil.js\");\n/* harmony import */ var _StringUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StringUtil.js */ \"./src/util/StringUtil.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n\n\n\n\n // RDFa property names\n//let RDFaAttrs = [\"about\", \"content\", \"datatype\", \"href\", \"property\", \"rel\", \"resource\", \"rev\", \"src\", \"typeof\", \"vocab\"];\n\nvar RDFaAttrs = [\"about\", \"prefix\", \"property\", \"resource\", \"typeof\", \"vocab\"];\nvar RDFaUtil = {\n  /*\n  **************************\n  * Configuration functions *\n  **************************\n  */\n  setBaseAnnotationOntology: function setBaseAnnotationOntology(url) {\n    //console.log(\"RDFaUtil - setting base ontology url:\", url);\n    RDFaUtil.baseAnnotationOntologyURL = url;\n  },\n  setObserverNodes: function setObserverNodes(observerNodes) {\n    this.observerNodes = Array.from(observerNodes);\n  },\n  resetIgnoreNodes: function resetIgnoreNodes() {\n    var prefixIndex = {};\n    var vocab = null;\n    RDFaUtil.setIgnoreNodes(document, vocab, prefixIndex);\n    return false;\n  },\n  setIgnoreNodes: function setIgnoreNodes(node, vocab, prefixIndex) {\n    RDFaUtil.indexPrefixes(node, prefixIndex);\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n\n    if (attrs.hasOwnProperty(\"vocab\")) {\n      vocab = attrs.vocab;\n    }\n\n    RDFaUtil.setIgnoreNode(node, vocab, prefixIndex);\n\n    if (node.hasChildNodes()) {\n      node.childNodes.forEach(function (childNode) {\n        RDFaUtil.setIgnoreNodes(childNode, vocab, prefixIndex);\n      });\n    }\n  },\n  setIgnoreNode: function setIgnoreNode(node, vocab, prefixIndex) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n\n    if (attrs.hasOwnProperty(\"typeof\")) {\n      //console.log(\"setIgnoreNode - typeof:\", attrs.typeof);\n      var rdfType = RDFaUtil.expandRDFaTerm(attrs.typeof, vocab, prefixIndex); //console.log(\"setIgnoreNode - rdfType:\", rdfType);\n\n      node.rdfaIgnorable = RDFaUtil.isIgnoreClass(rdfType) ? true : false; //console.log(\"ignore URL:\", RDFaUtil.baseAnnotationOntologyURL + \"#IgnorableElement\");\n    }\n  },\n  isIgnoreClass: function isIgnoreClass(url) {\n    return url === RDFaUtil.baseAnnotationOntologyURL + \"#IgnorableElement\";\n  },\n  isIgnoreNode: function isIgnoreNode(node) {\n    return node.rdfaIgnorable;\n  },\n\n  /*\n  **************************\n  * RDFa related functions *\n  **************************\n  */\n  // Return RDFa attributes of an element.\n  getRDFaAttributes: function getRDFaAttributes(node) {\n    var nodeRDFaAttrs = {};\n\n    if (node.nodeType === window.Node.ELEMENT_NODE) {\n      RDFaAttrs.forEach(function (attr) {\n        if (node.hasAttribute(attr)) {\n          nodeRDFaAttrs[attr] = node.getAttribute(attr);\n        }\n      });\n    }\n\n    return nodeRDFaAttrs;\n  },\n  isRDFaIgnoreNode: function isRDFaIgnoreNode(node) {\n    return node.hasOwnProperty(\"rdfaIgnorable\") && node.rdfaIgnorable;\n  },\n  isSelectWholeNode: function isSelectWholeNode(node) {\n    var nodeRDFaAttrs = RDFaUtil.getRDFaAttributes(node);\n    return nodeRDFaAttrs.property === \"selectWholeElement\" ? true : false;\n  },\n  hasRDFaAttributes: function hasRDFaAttributes(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return Object.keys(attrs).length > 0 && !RDFaUtil.isRDFaIgnoreNode(node) ? true : false;\n  },\n  hasRDFaType: function hasRDFaType(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return attrs.hasOwnProperty(\"typeof\");\n  },\n  hasRDFaPrefix: function hasRDFaPrefix(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return attrs.hasOwnProperty(\"prefix\");\n  },\n  hasRDFaResource: function hasRDFaResource(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return attrs.hasOwnProperty(\"resource\") || attrs.hasOwnProperty(\"about\") ? true : false;\n  },\n  getRDFaPrefix: function getRDFaPrefix(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    var prefix = [];\n\n    if (!attrs.hasOwnProperty(\"prefix\")) {\n      return null;\n    } else {\n      var parts = attrs[\"prefix\"].split(\" \");\n\n      if (parts.length % 2 !== 0) {\n        return null;\n      } else {\n        for (var i = 0; i < parts.length; i = i + 2) {\n          var vocPrefix = parts[i].substring(0, parts[i].length - 1);\n          var vocURL = parts[i + 1];\n          prefix.push({\n            vocabularyPrefix: vocPrefix,\n            vocabularyURL: vocURL\n          });\n        }\n\n        return prefix;\n      }\n    }\n  },\n  getRDFaIgnoreNodes: function getRDFaIgnoreNodes(node) {\n    return _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getDescendants(node).filter(RDFaUtil.isRDFaIgnoreNode);\n  },\n  getSelectWholeNodes: function getSelectWholeNodes(node) {\n    return _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getDescendants(node).filter(RDFaUtil.isSelectWholeNode);\n  },\n  filterIgnoreNodes: function filterIgnoreNodes(nodes) {\n    return nodes.filter(function (node) {\n      return RDFaUtil.isRDFaIgnoreNode(node) === false;\n    });\n  },\n  getNotIgnoreDescendants: function getNotIgnoreDescendants(node) {\n    var descendants = [];\n    node.childNodes.forEach(function (childNode) {\n      if (!RDFaUtil.isRDFaIgnoreNode(childNode)) {\n        descendants.push(childNode);\n        descendants = descendants.concat(RDFaUtil.getNotIgnoreDescendants(childNode));\n      }\n    });\n    return descendants;\n  },\n  selectRDFaNodes: function selectRDFaNodes(nodes) {\n    return nodes.filter(RDFaUtil.hasRDFaResource);\n  },\n  getRDFaTextNodes: function getRDFaTextNodes(node) {\n    var textNodes = [];\n    if (RDFaUtil.isRDFaIgnoreNode(node)) return textNodes;\n    node.childNodes.forEach(function (childNode) {\n      if (childNode.nodeType === window.Node.TEXT_NODE) textNodes.push(childNode);else textNodes = textNodes.concat(RDFaUtil.getRDFaTextNodes(childNode));\n    });\n    return textNodes;\n  },\n  getRDFaTextContent: function getRDFaTextContent(node) {\n    var textContent = \"\";\n    if (RDFaUtil.isRDFaIgnoreNode(node) || node.nodeType === window.Node.COMMENT_NODE) return \"\";\n    node.childNodes.forEach(function (childNode) {\n      var childTextContent = \"\";\n\n      if (RDFaUtil.isIgnoreNode(childNode)) {// skip ignore nodes\n      }\n\n      if (childNode.nodeType === window.Node.TEXT_NODE) {\n        // deal with surrounding whitespace of child nodes\n        // based on browser behaviour\n        childTextContent = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getTextNodeDisplayText(childNode); //console.log(\"getRDFaTextContent - TEXT_NODE - childTextContent: #\" + childTextContent + \"#\");\n\n        /*\n        childTextContent = StringUtil.collapseWhitespace(childNode.textContent);\n        if (textContent === \"\" && DOMUtil.getDisplayType(node) === \"block\")\n            childTextContent = childTextContent.trimLeft();\n        if (childNode === node.lastChild && DOMUtil.getDisplayType(node) === \"block\")\n            childTextContent = childTextContent.trimRight();\n        */\n      } else if (childNode.nodeType === window.Node.ELEMENT_NODE) {\n        childTextContent = RDFaUtil.getRDFaTextContent(childNode);\n        /*\n        if (DOMUtil.getDisplayType(childNode) === \"block\") {\n            if (textContent.length > 0)\n                textContent = textContent.trimRight() + \"\\n\";\n            childTextContent = childTextContent.trim() + \"\\n\";\n        }\n        */\n        //console.log(\"getRDFaTextContent - ELEMENT_NODE - childTextContent: #\" + childTextContent + \"#\");\n      }\n\n      textContent += childTextContent; //console.log(\"getRDFaTextContent - textContent: #\" + textContent + \"#\");\n    });\n    return textContent;\n  },\n  getRDFaResource: function getRDFaResource(node) {\n    return node.hasAttribute(\"resource\") ? node.getAttribute(\"resource\") : node.getAttribute(\"about\");\n  },\n  getTopRDFaNodes: function getTopRDFaNodes(node) {\n    var topRDFaNodes = []; // if node itself has RDFa properties it is the top RDFa node\n\n    if (RDFaUtil.hasRDFaResource(node)) {\n      topRDFaNodes.push(node);\n      return topRDFaNodes;\n    }\n\n    node.childNodes.forEach(function (childNode) {\n      topRDFaNodes = topRDFaNodes.concat(RDFaUtil.getTopRDFaNodes(childNode));\n    });\n    return topRDFaNodes;\n  },\n  getTopRDFaResources: function getTopRDFaResources() {\n    var topResources = [];\n    RDFaUtil.observerNodes.forEach(function (node) {\n      var topRDFaNodes = RDFaUtil.getTopRDFaNodes(node);\n      topRDFaNodes.forEach(function (topRDFaNode) {\n        var attrs = RDFaUtil.getRDFaAttributes(topRDFaNode);\n        topResources.push(attrs.resource || attrs.about);\n      });\n    });\n    return topResources;\n  },\n  addBreadcrumb: function addBreadcrumb(labelTrail, source) {\n    labelTrail.unshift({\n      id: source.data.rdfaResource,\n      node: source.data.domNode,\n      property: source.data.rdfaProperty,\n      type: source.data.rdfTypeLabel\n    });\n  },\n  createBreadcrumbTrail: function createBreadcrumbTrail(resourceId) {\n    var rootFound = false;\n    var breadcrumb = {};\n    var labelTrail = [];\n    breadcrumb[resourceId] = {\n      id: resourceId\n    };\n\n    while (!rootFound) {\n      var source = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].lookupIdentifier(resourceId);\n      breadcrumb[source.data.rdfaResource].type = source.data.rdfTypeLabel;\n      RDFaUtil.addBreadcrumb(labelTrail, source);\n\n      if (source !== undefined && source.data.parentResource) {\n        var val = {\n          id: source.data.parentResource\n        };\n        val[source.data.rdfaProperty] = breadcrumb[source.data.rdfaResource];\n        breadcrumb[source.data.parentResource] = val;\n        delete breadcrumb[source.data.rdfaResource];\n        resourceId = source.data.parentResource;\n      } else {\n        rootFound = true;\n      }\n    }\n\n    return labelTrail;\n  },\n  updateStack: function updateStack(stack, node) {\n    var top = stack[stack.length - 1];\n    var position = top.compareDocumentPosition(node);\n\n    while (!(position & window.Node.DOCUMENT_POSITION_CONTAINED_BY)) {\n      stack.pop();\n      top = stack[stack.length - 1];\n      position = top.compareDocumentPosition(node);\n    }\n  },\n\n  /*\n   **************************\n   * RDFa resource relation *\n   * and index functions    *\n   **************************\n   */\n  labelHasPrefix: function labelHasPrefix(label) {\n    return label.indexOf(\":\") !== -1;\n  },\n  labelParsePrefix: function labelParsePrefix(label, prefixIndex) {\n    var prefix = label.substring(0, label.indexOf(\":\"));\n    var term = label.substring(label.indexOf(\":\") + 1);\n\n    if (prefixIndex.hasOwnProperty(prefix)) {\n      return {\n        url: prefixIndex[prefix] + term,\n        vocabulary: prefixIndex[prefix],\n        term: term\n      };\n    } else {\n      //console.log(\"UNKNOWN PREFIX:\", label, prefix);\n      return null;\n    }\n  },\n  getTypeURLs: function getTypeURLs(rdfTypeLabels, vocabulary, prefixIndex) {\n    if (!rdfTypeLabels) {\n      return null;\n    }\n\n    return rdfTypeLabels.map(function (label) {\n      if (RDFaUtil.labelHasPrefix(label)) {\n        var labelInfo = RDFaUtil.labelParsePrefix(label, prefixIndex);\n        var typeURL = labelInfo.url;\n        return typeURL;\n      } else if (_StringUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isURL(label)) {\n        return label;\n      } else if (vocabulary && label) {\n        return vocabulary + label;\n      } else if (vocabulary) {\n        var message = \"Unknown RDF type, not a valid label: \" + label; //console.log(message);\n\n        return null;\n      } else {\n        var _message = \"Unknown RDF type, not a valid URL: \" + vocabulary; //console.log(message);\n\n\n        return null;\n      }\n    });\n  },\n  getRDFaTypeLabels: function getRDFaTypeLabels(node) {\n    if (RDFaUtil.hasRDFaType(node)) {\n      return node.getAttribute(\"typeof\").split(\" \");\n    } else {\n      return null;\n    }\n  },\n  expandRDFaTerm: function expandRDFaTerm(rdfaTerm, vocabulary, prefixIndex) {\n    if (!rdfaTerm) {\n      return null;\n    } else if (_StringUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isURL(rdfaTerm)) {\n      return rdfaTerm;\n    } else if (RDFaUtil.labelHasPrefix(rdfaTerm)) {\n      var labelInfo = RDFaUtil.labelParsePrefix(rdfaTerm, prefixIndex);\n\n      if (labelInfo) {\n        return labelInfo.url;\n      } else {\n        return null;\n      }\n    } else if (vocabulary && rdfaTerm) {\n      // assume rdfaTerm is defined by vocabulary\n      return vocabulary + rdfaTerm;\n    } else {\n      var message = \"ERROR - Unknown property: \" + rdfaTerm; //console.log(message);\n\n      return null;\n    }\n  },\n  expandProperty: function expandProperty(propertyLabel, vocabulary, prefixIndex) {\n    if (!propertyLabel) {\n      return null;\n    } else if (RDFaUtil.labelHasPrefix(propertyLabel)) {\n      var labelInfo = RDFaUtil.labelParsePrefix(propertyLabel, prefixIndex);\n      return labelInfo.url;\n    } else if (_StringUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isURL(propertyLabel)) {\n      return propertyLabel;\n    } else if (vocabulary && propertyLabel) {\n      // assume propertyLabel is defined by vocabulary\n      return vocabulary + propertyLabel;\n    } else {\n      var message = \"ERROR - Unknown property: \" + propertyLabel; //console.log(message);\n\n      return null;\n    }\n  },\n  makeIndexEntry: function makeIndexEntry(node, vocabulary, prefixIndex) {\n    var rdfTypeLabels;\n    var typeURLs;\n    var vocabularies = [];\n    rdfTypeLabels = RDFaUtil.getRDFaTypeLabels(node);\n    typeURLs = RDFaUtil.getTypeURLs(rdfTypeLabels, vocabulary, prefixIndex);\n    return {\n      rdfaResource: RDFaUtil.getRDFaResource(node),\n      rdfaVocabulary: vocabulary,\n      domNode: node,\n      rdfTypeLabel: rdfTypeLabels,\n      rdfTypeURL: typeURLs,\n      rdfaProperty: RDFaUtil.expandProperty(node.getAttribute(\"property\"), vocabulary, prefixIndex),\n      text: RDFaUtil.getRDFaTextContent(node)\n    };\n  },\n  hasVocabulary: function hasVocabulary(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return attrs.hasOwnProperty(\"vocab\");\n  },\n  getVocabulary: function getVocabulary(node) {\n    var attrs = RDFaUtil.getRDFaAttributes(node);\n    return attrs.vocab;\n  },\n  listVocabularyURLs: function listVocabularyURLs(node, vocabularyURLs) {\n    if (RDFaUtil.hasVocabulary(node)) {\n      var vocabulary = RDFaUtil.getVocabulary(node);\n\n      if (!vocabularyURLs.includes(vocabulary)) {\n        vocabularyURLs.push(vocabulary);\n      }\n    }\n\n    _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getDescendants(node).forEach(function (descendant) {\n      RDFaUtil.listVocabularyURLs(descendant, vocabularyURLs);\n    });\n  },\n  indexRDFa: function indexRDFa(callback) {\n    var index = {\n      resources: {},\n      relations: {}\n    };\n    RDFaUtil.observerNodes.forEach(function (observerNode) {\n      var prefixIndex = {};\n      var vocabulary = null;\n      RDFaUtil.indexRDFaResources(index, observerNode, null, vocabulary, prefixIndex);\n    }); //console.log(index);\n\n    return callback(null, index);\n  },\n  indexRDFaResources: function indexRDFaResources(index, node, parentResource, vocabulary, prefixIndex) {\n    if (RDFaUtil.hasVocabulary(node)) {\n      // update vocabulary if specified\n      vocabulary = RDFaUtil.getVocabulary(node);\n    }\n\n    if (RDFaUtil.hasRDFaResource(node)) {\n      RDFaUtil.indexPrefixes(node, prefixIndex);\n      var indexEntry = RDFaUtil.makeIndexEntry(node, vocabulary, prefixIndex);\n\n      if (parentResource) {\n        indexEntry.parentResource = parentResource;\n      }\n\n      if (!index.resources.hasOwnProperty(indexEntry.rdfaResource)) {\n        // only index resource at highest level.\n        // lower levels mentions specify only relations\n        index.resources[indexEntry.rdfaResource] = indexEntry;\n      }\n\n      RDFaUtil.indexRDFaRelations(index.relations, indexEntry); // only update parent resource if this node is an RDFa resource\n\n      parentResource = indexEntry.rdfaResource;\n    }\n\n    node.childNodes.forEach(function (childNode) {\n      RDFaUtil.indexRDFaResources(index, childNode, parentResource, vocabulary, prefixIndex);\n    });\n  },\n  indexRDFaRelations: function indexRDFaRelations(relationIndex, resourceIndexEntry) {\n    RDFaUtil.indexParentRelation(relationIndex, resourceIndexEntry);\n    RDFaUtil.indexTypeRelation(relationIndex, resourceIndexEntry);\n  },\n  indexTypeRelation: function indexTypeRelation(relationIndex, resourceIndexEntry) {\n    if (!resourceIndexEntry.rdfTypeLabel) {\n      return false;\n    } else {\n      resourceIndexEntry.rdfTypeURL.forEach(function (rdfType) {\n        var relation = {\n          subject: resourceIndexEntry.rdfaResource,\n          predicate: \"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\",\n          object: rdfType\n        };\n        relationIndex[relation.subject].push(relation);\n      });\n    }\n  },\n  indexParentRelation: function indexParentRelation(relationIndex, resourceIndexEntry) {\n    var relation = {\n      subject: resourceIndexEntry.parentResource,\n      predicate: resourceIndexEntry.rdfaProperty,\n      object: resourceIndexEntry.rdfaResource\n    };\n\n    if (!relationIndex.hasOwnProperty(relation.subject)) {\n      relationIndex[relation.subject] = [];\n    }\n\n    if (!relationIndex.hasOwnProperty(relation.object)) {\n      relationIndex[relation.object] = [];\n    }\n\n    relationIndex[relation.subject].push(relation);\n    relationIndex[relation.object].push(relation);\n  },\n  indexPrefixes: function indexPrefixes(rdfaResourceNode, prefixIndex) {\n    if (RDFaUtil.hasRDFaPrefix(rdfaResourceNode)) {\n      RDFaUtil.getRDFaPrefix(rdfaResourceNode).forEach(function (prefix) {\n        prefixIndex[prefix.vocabularyPrefix] = prefix.vocabularyURL;\n      });\n    }\n  },\n  buildResourcesMaps: function buildResourcesMaps() {\n    var maps = {};\n    RDFaUtil.observerNodes.forEach(function (observerNode) {\n      RDFaUtil.getTopRDFaNodes(observerNode).forEach(function (rdfaResourceNode) {\n        var map = RDFaUtil.buildResourceMap(rdfaResourceNode);\n        map.source = {\n          location: window.location.href,\n          origin: window.location.origin,\n          pathname: window.location.pathname\n        };\n        maps[map.id] = map;\n      });\n    });\n    return maps;\n  },\n  buildResourceMap: function buildResourceMap(rdfaResourceNode) {\n    var resourceMap = RDFaUtil.makeRDFaAttributeMap(rdfaResourceNode);\n    RDFaUtil.getRDFaSubresources(rdfaResourceNode).forEach(function (subresourceNode) {\n      var subresourceMap = RDFaUtil.buildResourceMap(subresourceNode);\n      var property = subresourceMap.property;\n      if (!Object.keys(resourceMap).includes(property)) resourceMap[property] = [];\n      resourceMap[property].push(subresourceMap);\n    });\n    return resourceMap;\n  },\n  makeRDFaAttributeMap: function makeRDFaAttributeMap(rdfaResourceNode) {\n    var attrs = RDFaUtil.getRDFaAttributes(rdfaResourceNode);\n    var map = {};\n    Object.keys(attrs).forEach(function (name) {\n      if (name === \"typeof\") {\n        map[\"type\"] = attrs[name];\n        if (attrs[name].indexOf(\" \") >= 0) map[\"type\"] = attrs[name].split(\" \");\n      } else if (name === \"resource\" || name === \"about\") map[\"id\"] = attrs[name];else if (name === \"vocab\" && attrs[name].includes(\"#\")) map[name] = attrs[name].replace(/#$/, \"\");else map[name] = attrs[name];\n    });\n    return map;\n  },\n  getRDFaSubresources: function getRDFaSubresources(node) {\n    var subresourceNodes = [];\n    if (!node.childNodes) return subresourceNodes;\n    node.childNodes.forEach(function (childNode) {\n      if (childNode.nodeType !== window.Node.ELEMENT_NODE) return null;\n      if (RDFaUtil.hasRDFaResource(childNode)) subresourceNodes.push(childNode);else {\n        var subsubresourceNodes = RDFaUtil.getRDFaSubresources(childNode);\n        subresourceNodes = subresourceNodes.concat(subsubresourceNodes);\n      }\n    });\n    return subresourceNodes;\n  },\n  findResourceRelations: function findResourceRelations(resources, resourceIndex) {\n    var hasParent = {};\n    resources.forEach(function (resource) {\n      var parent = resourceIndex[resource].parentResource;\n\n      while (parent) {\n        hasParent[resource] = parent;\n        resource = parent;\n        parent = resourceIndex[resource].parentResource;\n      }\n    });\n    var relations = [];\n\n    for (var resource in hasParent) {\n      relations.push({\n        body: resource,\n        target: hasParent[resource]\n      });\n    }\n\n    return relations;\n  },\n  filterExistingRelationAnnotations: function filterExistingRelationAnnotations(relations, annotations) {\n    return relations.filter(function (relation) {\n      return RDFaUtil.relationAnnotationExists(relation, annotations) === false;\n    });\n  },\n  relationAnnotationExists: function relationAnnotationExists(relation, annotations) {\n    return annotations.some(function (annotation) {\n      if (annotation.target.source !== relation.target) {\n        return false;\n      }\n\n      if (annotation.body.source !== relation.body) {\n        return false;\n      }\n\n      return true;\n    });\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (RDFaUtil);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/util/RDFaUtil.js?");

/***/ }),

/***/ "./src/util/SelectionUtil.js":
/*!***********************************!*\
  !*** ./src/util/SelectionUtil.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DOMUtil.js */ \"./src/util/DOMUtil.js\");\n/*\n * Taken from http://jsfiddle.net/8mdX4/1211/\n * See stackoverflow discussion: http://stackoverflow.com/questions/6240139/highlight-text-range-using-javascript\n * Originally created by Tim Down\n * Contributors:\n *   - Marijn Koolen\n *\n */\n\n\n\n\nvar SelectionUtil = {\n  currentSelection: null,\n  makeEditableAndHighlight: function makeEditableAndHighlight(colour) {\n    var sel = window.getSelection();\n\n    if (sel.rangeCount && sel.getRangeAt) {\n      var range = sel.getRangeAt(0);\n    }\n\n    document.designMode = \"on\";\n\n    if (range) {\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } // Use HiliteColor since some browsers apply BackColor to the whole block\n\n\n    if (!document.execCommand(\"HiliteColor\", false, colour)) {\n      document.execCommand(\"BackColor\", false, colour);\n    }\n\n    document.designMode = \"off\";\n  },\n  addHighlight: function addHighlight(colour) {\n    var range, sel;\n\n    if (window.getSelection) {\n      // IE9 and non-IE\n      try {\n        if (!document.execCommand(\"BackColor\", false, colour)) {\n          SelectionUtil.makeEditableAndHighlight(colour);\n        }\n      } catch (ex) {\n        SelectionUtil.makeEditableAndHighlight(colour);\n      }\n\n      sel = window.getSelection();\n    } else if (document.selection && document.selection.createRange) {\n      // IE <= 8 case\n      range = document.selection.createRange();\n      range.execCommand(\"BackColor\", false, colour);\n    }\n\n    sel.removeAllRanges();\n  },\n  removeHighlight: function removeHighlight() {\n    document.designMode = \"on\";\n    document.execCommand(\"removeFormat\", false, null);\n    document.designMode = \"off\";\n    var sel = window.getSelection();\n    sel.removeAllRanges();\n  },\n  selectAndHighlightRange: function selectAndHighlightRange(node, start, end) {\n    SelectionUtil.setRDFaSelectionRange(node, start, end);\n    SelectionUtil.addHighlight(\"yellow\");\n  },\n  selectAndRemoveRange: function selectAndRemoveRange(node, start, end) {\n    SelectionUtil.setRDFaSelectionRange(node, start, end);\n    SelectionUtil.removeHighlight();\n  },\n  setRDFaSelectionRange: function setRDFaSelectionRange(el, start, end) {\n    if (document.createRange && window.getSelection) {\n      var range = document.createRange();\n      range.selectNodeContents(el);\n      var textNodes = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getRDFaTextNodes(el);\n      var foundStart = false;\n      var charCount = 0,\n          endCharCount;\n\n      for (var i = 0; i < textNodes.length; i++) {\n        var textNode = textNodes[i]; // offset of display text w.r.t underlying text content (e.g. removed leading whitespace)\n\n        var displayOffset = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTextNodeDisplayOffset(textNode);\n        var displayText = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTextNodeDisplayText(textNode);\n        endCharCount = charCount + displayText.length;\n\n        if (!foundStart && start >= charCount && (start < endCharCount || start === endCharCount && i <= textNodes.length)) {\n          range.setStart(textNode, start - charCount + displayOffset);\n          foundStart = true;\n        }\n\n        if (foundStart && end === -1) {\n          var lastTextNode = textNodes[textNodes.length - 1];\n          range.setEnd(lastTextNode, lastTextNode.length);\n          break;\n        } else if (foundStart && end !== -1 && end <= endCharCount) {\n          range.setEnd(textNode, end - charCount + displayOffset);\n          break;\n        }\n\n        charCount = endCharCount;\n      }\n\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } else if (document.selection && document.body.createTextRange) {\n      var textRange = document.body.createTextRange();\n      textRange.moveToElementText(el);\n      textRange.collapse(true);\n      textRange.moveEnd(\"character\", end);\n      textRange.moveStart(\"character\", start);\n      textRange.select();\n    }\n  },\n  checkDOMElement: function checkDOMElement(element) {\n    if (element === undefined) throw Error(\"argument 'element' is required.\");\n    if (!(element instanceof Element) || !document.contains(element)) throw Error(\"element must be a DOM element.\");\n    return true;\n  },\n  checkRectangle: function checkRectangle(rect) {\n    if (rect === undefined) throw Error(\"argument 'rect' is required.\");\n    if (!(rect instanceof Object)) throw Error(\"rect should be an object with properties: x, y, w, h.\");\n    var keys = Object.keys(rect);\n    [\"x\", \"y\", \"w\", \"h\"].forEach(function (prop) {\n      if (!keys.includes(prop)) throw Error(\"rect is missing required property \" + prop + \".\");\n      if (!Number.isInteger(rect[prop])) throw Error(\"rect property \" + prop + \" is not an integer.\");\n    });\n    return true;\n  },\n  checkInterval: function checkInterval(interval) {\n    if (interval === undefined) throw Error(\"argument 'interval' is required.\");\n    if (!(interval instanceof Object)) throw Error(\"interval should be an object with properties: start, end.\");\n    var keys = Object.keys(interval);\n    [\"start\", \"end\"].forEach(function (prop) {\n      if (!keys.includes(prop)) throw Error(\"interval is missing required property \" + prop + \".\");\n      if (Number.isNaN(interval[prop])) throw Error(\"interval property \" + prop + \" is not a number.\"); //if (!Number.isInteger(interval[prop]))\n      //    interval[prop] = parseInt(interval[prop]);\n    });\n    return true;\n  },\n  setSelection: function setSelection(element, selection, mimeType) {\n    SelectionUtil.checkDOMElement(element);\n    SelectionUtil.currentSelection = {\n      startNode: element,\n      endNode: element,\n      mimeType: mimeType\n    };\n\n    if (!selection) {\n      return true;\n    } else if (mimeType.startsWith(\"video\") || mimeType.startsWith(\"audio\")) {\n      SelectionUtil.checkInterval(selection);\n      SelectionUtil.currentSelection.interval = selection;\n    } else if (mimeType.startsWith(\"image\")) {\n      SelectionUtil.checkRectangle(selection);\n      SelectionUtil.currentSelection.rect = selection;\n    }\n  },\n  setImageSelection: function setImageSelection(element, rect) {\n    SelectionUtil.checkDOMElement(element);\n    SelectionUtil.checkRectangle(rect);\n    SelectionUtil.currentSelection = {\n      startNode: element,\n      endNode: element,\n      rect: rect,\n      mimeType: \"image\"\n    };\n  },\n  setAudioSelection: function setAudioSelection(element, interval) {\n    SelectionUtil.checkDOMElement(element);\n    SelectionUtil.checkInterval(interval);\n    SelectionUtil.currentSelection = {\n      startNode: element,\n      endNode: element,\n      interval: interval,\n      mimeType: \"audio\"\n    };\n  },\n  setVideoSelection: function setVideoSelection(element, interval) {\n    SelectionUtil.checkDOMElement(element);\n    SelectionUtil.checkInterval(interval);\n    SelectionUtil.currentSelection = {\n      startNode: element,\n      endNode: element,\n      interval: interval,\n      mimeType: \"video\"\n    };\n  },\n  setDOMSelection: function setDOMSelection() {\n    var selection = null;\n\n    if (document.getSelection) {\n      selection = document.getSelection();\n    }\n\n    if (!selection || selection.isCollapsed) {\n      var observerNodes = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getObserverNodes();\n      SelectionUtil.currentSelection = {\n        startNode: observerNodes[0],\n        endNode: observerNodes[observerNodes.length - 1],\n        mimeType: \"multipart\" // TODO: FIX based on actual content\n\n      };\n    } else {\n      var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n      var backwards = position & Node.DOCUMENT_POSITION_PRECEDING;\n      if (position === 0 && selection.anchorOffset > selection.focusOffset) backwards = 1;\n      var focusOffset = SelectionUtil.getTrimmedOffset(selection.focusNode, selection.focusOffset);\n      var anchorOffset = SelectionUtil.getTrimmedOffset(selection.anchorNode, selection.anchorOffset);\n      SelectionUtil.currentSelection = {\n        startNode: backwards ? selection.focusNode : selection.anchorNode,\n        startOffset: backwards ? focusOffset : anchorOffset,\n        endNode: backwards ? selection.anchorNode : selection.focusNode,\n        endOffset: backwards ? anchorOffset : focusOffset,\n        selectionText: selection.toString(),\n        mimeType: \"text\"\n      };\n    }\n\n    var endParent = SelectionUtil.currentSelection.endNode.parentNode;\n\n    if (_RDFaUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isRDFaIgnoreNode(endParent)) {\n      var prevNode = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getPreviousTextNode(SelectionUtil.currentSelection.endNode);\n      SelectionUtil.currentSelection.endNode = prevNode;\n      SelectionUtil.currentSelection.endOffset = prevNode.length;\n      SelectionUtil.adjustSelection(SelectionUtil.currentSelection);\n      selection = document.getSelection();\n      SelectionUtil.currentSelection.selectionText = selection.toString();\n    }\n  },\n  getTrimmedOffset: function getTrimmedOffset(node, offset) {\n    if (node.nodeType === window.Node.TEXT_NODE && offset > 0) {\n      //let textContent = node.textContent;\n      if (offset > 0) offset -= _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTextNodeDisplayOffset(node); //offset -= textContent.length - textContent.trimLeft().length;\n    }\n\n    return offset;\n  },\n  // Find nodes and offsets corresponding to the selection.\n  // Start node is always before end node in presentation order\n  // regardless of whether selection is done forwards or backwards.\n  getCurrentSelection: function getCurrentSelection() {\n    if (!SelectionUtil.currentSelection) SelectionUtil.setDOMSelection();\n    return SelectionUtil.currentSelection;\n  },\n  checkSelectionRange: function checkSelectionRange() {\n    // 1. do nothing if selection is collapsed (e.g. does not span a range)\n    if (document.getSelection().isCollapsed) {\n      return null;\n    } // 2. get start and end nodes of selection in display order\n\n\n    var selection = SelectionUtil.getCurrentSelection(); // 3. if selection start node has SelectWholeElement property\n\n    var startNode = SelectionUtil.selectWholeElement(selection.startNode);\n    var endNode = SelectionUtil.selectWholeElement(selection.endNode);\n\n    if (selection.startOffset !== undefined && startNode) {\n      // move selection to start of start node\n      selection.startOffset = 0;\n      selection.startNode = startNode;\n    } // 4. if selection end node has SelectWholeElement property\n\n\n    if (selection.endOffset !== undefined && endNode) {\n      // move selection to end of end node\n      var textNodes = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTextNodes(endNode);\n      selection.endNode = textNodes[textNodes.length - 1];\n      selection.endOffset = selection.endNode.length;\n    } // 5. if start and/or end nodes have SelectWholeElement property,\n    // make sure the offsets are set properly\n\n\n    if (startNode || endNode) {\n      SelectionUtil.adjustSelection(selection);\n    }\n  },\n  adjustSelection: function adjustSelection(selection) {\n    var range = document.createRange();\n    range.setStart(selection.startNode, selection.startOffset);\n    range.setEnd(selection.endNode, selection.endOffset);\n    var sel = document.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(range);\n  },\n  selectWholeElement: function selectWholeElement(node) {\n    var ancestors = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getAncestors(node);\n    var nodes = ancestors.concat([node]).reverse();\n\n    for (var index = 0; index < nodes.length; index++) {\n      var checkNode = nodes[index];\n\n      if (checkNode.attributes && checkNode.hasAttribute(\"property\") && checkNode.getAttribute(\"property\") === \"selectWholeElement\") {\n        return checkNode;\n      }\n    }\n\n    return null;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (SelectionUtil);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/util/SelectionUtil.js?");

/***/ }),

/***/ "./src/util/StringUtil.js":
/*!********************************!*\
  !*** ./src/util/StringUtil.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar StringUtil = {\n  // Functions complementing trim, trimLeft and trimRight\n  // for consecutive inline elements\n  collapseRightWhitespace: function collapseRightWhitespace(text) {\n    return text[text.length - 1] === \" \" ? text.replace(/\\s+$/, \" \") : text;\n  },\n  collapseLeftWhitespace: function collapseLeftWhitespace(text) {\n    return /\\s/.test(text[0]) ? text.replace(/^\\s+/, \" \") : text;\n  },\n  collapseWhitespace: function collapseWhitespace(text) {\n    return StringUtil.collapseRightWhitespace(StringUtil.collapseLeftWhitespace(text));\n  },\n  alignRawAndDisplayStrings: function alignRawAndDisplayStrings(rawString, displayString) {\n    var map = {};\n    var rawIndex = 0;\n\n    for (var displayIndex = 0; displayIndex < displayString.length; displayIndex++) {\n      var displayChar = displayString[displayIndex];\n\n      if (displayChar === \"\\n\") {\n        // skip newline added by display block style\n        map[displayIndex] = -1;\n        continue;\n      }\n\n      var rawChar = rawString[rawIndex];\n\n      while (rawChar !== displayChar && rawIndex < rawString.length) {\n        if (displayChar.match(/\\s/) && rawChar.match(/\\S/)) {\n          break;\n        } // rawChar is not represented in displayString\n        // move to next char in rawString\n\n\n        rawIndex++;\n        rawChar = rawString[rawIndex];\n      }\n\n      if (displayChar.match(/\\s/) && rawChar.match(/\\S/)) {\n        // skip whitespace added by display inline style\n        map[displayIndex] = -1;\n        continue;\n      }\n\n      map[displayIndex] = rawIndex;\n      rawIndex++;\n\n      if (rawIndex > rawString.length) {\n        break;\n      }\n    }\n\n    var completeAlignment = Object.keys(map).length === displayString.length ? true : false;\n    return {\n      mapsTo: map,\n      complete: completeAlignment\n    };\n  },\n  isURL: function isURL(string) {\n    var pattern = new RegExp('^(https?:\\\\/\\\\/)' + // protocol\n    '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name and extension\n    'localhost|' + // OR localhost\n    '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\n    '(\\\\:\\\\d+)?' + // port\n    '(\\\\/[-a-z\\\\d%@_.~+&:]*)*' + // path\n    '(\\\\?[;&a-z\\\\d%@_.,~+&:=-]*)?' + // query string\n    '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // fragment locator\n\n    return pattern.test(string);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (StringUtil);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/util/StringUtil.js?");

/***/ }),

/***/ "./src/util/TargetUtil.js":
/*!********************************!*\
  !*** ./src/util/TargetUtil.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DOMUtil.js */ \"./src/util/DOMUtil.js\");\n/* harmony import */ var _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RDFaUtil.js */ \"./src/util/RDFaUtil.js\");\n/* harmony import */ var _FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FRBRooUtil.js */ \"./src/util/FRBRooUtil.js\");\n/* harmony import */ var _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SelectionUtil.js */ \"./src/util/SelectionUtil.js\");\n/* harmony import */ var _AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AnnotationUtil.js */ \"./src/util/AnnotationUtil.js\");\n/* harmony import */ var _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../flux/AnnotationActions.js */ \"./src/flux/AnnotationActions.js\");\n/* harmony import */ var _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../flux/AnnotationStore.js */ \"./src/flux/AnnotationStore.js\");\n/*\n * TargetUtil.js allows user to select text fragments\n * in RDFa enriched HTML documents.\n *\n * This package calculates offsets of selected/highlighted text w.r.t.\n * anchor and focus nodes and their parent nodes. For this, browser\n * interpretation and treatment of whitespaces is relevant.\n * See:\n *   - https://www.w3.org/TR/html401/struct/text.html#h-9.1\n *   - https://www.w3.org/TR/html401/appendix/notes.html#notes-line-breaks\n *   - http://stackoverflow.com/questions/27025877/are-leading-and-trailing-whitespaces-ignored-in-html\n *\n * Detecting wether an element is displayed ineline:\n *   - http://stackoverflow.com/questions/2880957/detect-inline-block-type-of-a-dom-element\n */\n\n\n\n\n\n\n\n\n\nvar TargetUtil = {\n  /*\n   **************************\n   * RDFa annotation target *\n   * selection functions    *\n   **************************\n   */\n  // return all RDFa enriched nodes within range of a text selection\n  findSelectionRDFaNodes: function findSelectionRDFaNodes(selection) {\n    var descendants = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getNotIgnoreDescendants(selection.containerNode);\n    var selectionNodes;\n\n    if (selection.startNode === selection.containerNode) {\n      selectionNodes = descendants;\n    } else {\n      // select all descendants in depth first traversal order\n      // from start node up and including end node\n      var startNodeIndex = descendants.indexOf(selection.startNode);\n      var endNodeIndex = descendants.indexOf(selection.endNode);\n      selectionNodes = descendants.slice(startNodeIndex, endNodeIndex + 1); // ancestors of startnode which are descendants of container node\n      // are also selection nodes\n\n      var startAncestors = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getAncestors(selection.startNode);\n      var containerIndex = startAncestors.indexOf(selection.containerNode);\n      var startAncestorsInSelection = startAncestors.slice(containerIndex + 1);\n      selectionNodes = startAncestorsInSelection.concat(selectionNodes);\n    }\n\n    return selectionNodes;\n  },\n  findNodeOffsetInContainer: function findNodeOffsetInContainer(container, targetNode) {\n    var descendants = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getNotIgnoreDescendants(container);\n    var precedingNodes = descendants.slice(0, descendants.indexOf(targetNode));\n    var textNodes = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].filterTextNodes(precedingNodes);\n    var targetOffset = 0; //console.log(\"findNodeOffsetInContainer - targetOffset:\", targetOffset);\n\n    textNodes.forEach(function (node) {\n      //console.log(\"findNodeOffsetInContainer - node:\", node);\n      var displayText = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getTextNodeDisplayText(node); //console.log(\"finddisplayTextOffsetInContainer - displayText: #\" + displayText + \"#\");\n\n      targetOffset += displayText.length; //console.log(\"findtargetOffsetOffsetInContainer - targetOffset:\", targetOffset);\n    });\n    return targetOffset;\n  },\n  findHighlighted: function findHighlighted(container, selection) {\n    var params = null;\n\n    if (selection.mimeType.startsWith(\"text\")) {\n      if (selection.selectionText.length > 0) {\n        params = TargetUtil.makeTextSelectors(container, selection);\n      }\n    } else if (selection.mimeType.startsWith(\"image\")) {\n      if (selection.rect !== undefined) {\n        params = {\n          rect: selection.rect\n        };\n      }\n    } else if (selection.mimeType.startsWith(\"audio\") || selection.mimeType.startsWith(\"video\")) {\n      if (selection.interval !== undefined) {\n        params = {\n          interval: selection.interval\n        };\n      }\n    } else {//console.error(\"Selection has unknown mimetype:\", selection);\n    }\n\n    params.breadcrumbs = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createBreadcrumbTrail(container.source);\n    return {\n      node: container.node,\n      mimeType: selection.mimeType,\n      params: params,\n      label: container.label,\n      source: container.source,\n      type: \"resource\"\n    };\n  },\n  makeTextSelectors: function makeTextSelectors(container, selection) {\n    //console.log(\"makeTextSelectors - container:\", container);\n    var startNodeOffset = TargetUtil.findNodeOffsetInContainer(container.node, selection.startNode);\n    var endNodeOffset = TargetUtil.findNodeOffsetInContainer(container.node, selection.endNode);\n    selection.startContainerOffset = startNodeOffset + selection.startOffset;\n    selection.endContainerOffset = endNodeOffset + selection.endOffset; //console.log(\"makeTextSelectors - selection:\", selection);\n\n    return {\n      position: this.makeTextPositionParams(container, selection),\n      quote: this.makeTextQuoteParams(container, selection)\n    };\n  },\n  makeTextPositionParams: function makeTextPositionParams(container, selection) {\n    return {\n      start: selection.startContainerOffset,\n      end: selection.endContainerOffset\n    };\n  },\n  makeTextQuoteParams: function makeTextQuoteParams(container, selection) {\n    var textContent = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getRDFaTextContent(container.node); //console.log(\"makeTextQuoteParams - textContent: #\" + textContent + \"#\");\n    //console.log(selection);\n\n    var maxPrefix = selection.startContainerOffset >= 20 ? 20 : selection.startContainerOffset;\n    var selectionLength = selection.endContainerOffset - selection.startContainerOffset;\n    return {\n      exact: selection.selectionText,\n      prefix: textContent.substr(selection.startContainerOffset - maxPrefix, maxPrefix),\n      suffix: textContent.substr(selection.endContainerOffset, 20)\n    };\n  },\n  // given a list of nodes, select all RDFa enriched nodes\n  // and return as candidate annotation targets\n  getRDFaCandidates: function getRDFaCandidates(nodes) {\n    return _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].selectRDFaNodes(nodes).map(function (node) {\n      var resourceId = _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getRDFaResource(node);\n      return {\n        node: node,\n        type: \"resource\",\n        mimeType: \"text\",\n        // TODO - fix based on actual content\n        params: {\n          breadcrumbs: _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createBreadcrumbTrail(resourceId),\n          text: _RDFaUtil_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getRDFaTextContent(node)\n        },\n        label: node.getAttribute(\"typeof\"),\n        source: resourceId\n      };\n    });\n  },\n  // Return all potential annotation targets.\n  getCandidates: function getCandidates(annotations, defaultTargets) {\n    var candidateResources = TargetUtil.getCandidateRDFaTargets(defaultTargets);\n    var candidateExternalResources = TargetUtil.getCandidateExternalResources(candidateResources);\n    var candidateAnnotations = TargetUtil.selectCandidateAnnotations(annotations, candidateResources.highlighted);\n    return {\n      resource: candidateResources,\n      annotation: candidateAnnotations,\n      external: candidateExternalResources\n    };\n  },\n  // Given a set of potential target resources, return a list of all associated external resources\n  getCandidateExternalResources: function getCandidateExternalResources(resources) {\n    var externalResources = {\n      highlighted: null,\n      wholeNodes: []\n    }; //console.log(resources.highlighted);\n\n    if (resources.highlighted && _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hasRepresentedResource(resources.highlighted.source)) {\n      var highlighted = TargetUtil.getCandidateExternalResource(resources.highlighted); //console.log(highlighted);\n\n      externalResources.highlighted = highlighted; //console.log(resources.highlighted);\n    } //console.log(resources.wholeNodes);\n    //let resourceIds = resources.wholeNodes.map((resource) => { return resource.source });\n\n\n    var wholeNodes = resources.wholeNodes.filter(function (resource) {\n      return _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hasRepresentedResource(resource.source);\n    }); //let hasExternalResources = resourceIds.filter(AnnotationActions.hasExternalResource);\n    //console.log(\"resourceIds:\", resourceIds);\n    //console.log(\"hasExternalResources:\", hasExternalResources);\n    //externalResources.wholeNodes = hasExternalResources.map((resourceId) => {\n    //    return TargetUtil.getCandidateExternalResource(resourceId);\n    //});\n\n    externalResources.wholeNodes = wholeNodes.map(function (wholeNode) {\n      return TargetUtil.getCandidateExternalResource(wholeNode);\n    });\n    return externalResources;\n  },\n  getCandidateExternalResource: function getCandidateExternalResource(resource) {\n    //console.log(\"resource:\", resource);\n    //console.log(AnnotationStore.representedResourceMap);\n    if (_flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hasRepresentedResource(resource.source)) {\n      var representationResource = _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].representedResourceMap[resource.source];\n      var externalMap = _flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].externalResourceIndex[representationResource.parentResource];\n      var externalResource = {\n        resource: externalMap.resource,\n        parentResource: externalMap.parentResource,\n        relation: externalMap.relation,\n        rdfType: externalMap.rdfType,\n        type: externalMap.type\n      };\n      externalResource.params = {};\n\n      if (resource.params.hasOwnProperty(\"quote\")) {\n        externalResource.params.quote = resource.params.quote;\n      }\n\n      if (resource.params.hasOwnProperty(\"position\")) {\n        externalResource.params.position = resource.params.position;\n      }\n\n      if (resource.params.hasOwnProperty(\"text\")) {\n        externalResource.params.text = resource.params.text;\n      }\n\n      externalResource.params.position = resource.params.position;\n      externalResource.params.breadcrumbs = _FRBRooUtil_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createBreadcrumbTrail(_flux_AnnotationStore_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].externalResourceIndex, externalResource.resource);\n      externalResource.mimeType = resource.mimeType;\n      externalResource.label = externalResource.rdfType.map(function (rdfType) {\n        return rdfType.substr(rdfType.indexOf(\"#\") + 1);\n      });\n      externalResource.source = externalResource.resource; //console.log(externalResource);\n\n      return externalResource;\n    } else {\n      return null;\n    }\n  },\n  // Annotation targets are elements containing\n  // or contained in the selected passage.\n  getCandidateRDFaTargets: function getCandidateRDFaTargets(defaultTargets) {\n    var selection = _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCurrentSelection(); //console.log(\"getCandidateRDFaTargets - selection:\", selection);\n\n    var ancestors = _DOMUtil_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findCommonAncestors(selection.startNode, selection.endNode);\n    selection.containerNode = ancestors[ancestors.length - 1]; //console.log(\"getCandidateRDFaTargets - containerNode:\", selection.containerNode);\n\n    var biggerNodes = TargetUtil.getRDFaCandidates(ancestors);\n    var selectionNodes = TargetUtil.findSelectionRDFaNodes(selection);\n    var smallerNodes = TargetUtil.getRDFaCandidates(selectionNodes);\n    var wholeNodes = biggerNodes.concat(smallerNodes);\n    var highlighted = null;\n\n    if (selection.startOffset !== undefined || selection.rect !== undefined || selection.interval !== undefined) {\n      var container = biggerNodes[biggerNodes.length - 1];\n      highlighted = TargetUtil.findHighlighted(container, selection);\n    } else if (defaultTargets !== undefined && Array.isArray(defaultTargets)) {\n      wholeNodes = wholeNodes.filter(function (resource) {\n        return defaultTargets.includes(resource.label);\n      });\n    }\n\n    return {\n      wholeNodes: wholeNodes,\n      highlighted: highlighted\n    };\n  },\n  selectCandidateAnnotations: function selectCandidateAnnotations(annotations, highlighted) {\n    //console.log(\"selectCandidateAnnotations - annotations:\", annotations);\n    if (!highlighted) return TargetUtil.addCandidateAnnotations(annotations);\n    var candidates = annotations.filter(function (annotation) {\n      var targets = Array.isArray(annotation.target) ? annotation.target : [annotation.target];\n      return targets.some(function (target) {\n        return TargetUtil.hasOverlap(target, highlighted);\n      });\n    });\n    return TargetUtil.addCandidateAnnotations(candidates);\n  },\n  hasOverlap: function hasOverlap(target, highlighted) {\n    // if annotation target is not highlighted resource\n    // then annotation is not a candidate target\n    if (target.source !== highlighted.source) return false; // double check that annotation target and\n    // selected candidate have same mime type\n\n    if (target.type !== TargetUtil.mapMimeType(highlighted.mimeType)) return false; // if Text target has no selector, it overlaps\n    // with highlighted range\n\n    if (!target.selector) return true; // if selection and annotation target are of type Text\n    // check if text position of annotation target overlaps\n    // with highlighted range\n\n    if (target.type === \"Text\") {\n      var textPosition = TargetUtil.getSelectorByType(target, \"TextPositionSelector\");\n      var highlightPosition = highlighted.params.position; // if a Text target has a selector, it should have a text position selector\n\n      if (textPosition && highlightPosition.start < textPosition.end && highlightPosition.end > textPosition.start) return true; // otherwise, assume target doesn't overlap with highlighted range\n\n      return false;\n    }\n  },\n  addCandidateAnnotations: function addCandidateAnnotations(annotations) {\n    return annotations.map(function (annotation) {\n      var text = \"\";\n      var label = \"\";\n\n      if (annotation.body && annotation.body.length > 0) {\n        text = annotation.body[0].value;\n        label = annotation.body[0].purpose;\n      }\n\n      return {\n        source: annotation.id,\n        type: \"annotation\",\n        params: {\n          text: text\n        },\n        label: label,\n        target: {\n          source: annotation.id\n        }\n      };\n    });\n  },\n\n  /*\n   ********************\n   * RDFa annotation  *\n   * helper functions *\n   ********************\n   */\n  getSelectorTypes: function getSelectorTypes(target) {\n    if (!target.selector) return null;\n    var selectorTypes = [];\n    var selectors = Array.isArray(target.selector) ? target.selector : [target.selector];\n    selectors.forEach(function (selector) {\n      selectorTypes.push(selector.type);\n\n      if (selector.refinedBy) {\n        var refinements = Array.isArray(selector.refinedBy) ? selector.refinedBy : [selector.refinedBy];\n        refinements.forEach(function (refinement) {\n          selectorTypes.push(refinement.type);\n        });\n      }\n    });\n    return selectorTypes;\n  },\n  getSelectorByType: function getSelectorByType(target, selectorType) {\n    if (!target.selector) return null;\n    var typeSelector = null;\n    var selectors = Array.isArray(target.selector) ? target.selector : [target.selector];\n    selectors.forEach(function (selector) {\n      if (selector.type === selectorType) typeSelector = selector;else if (selector.refinedBy) {\n        var refinements = Array.isArray(selector.refinedBy) ? selector.refinedBy : [selector.refinedBy];\n        refinements.forEach(function (refinement) {\n          if (refinement.type === selectorType) typeSelector = refinement;\n        });\n      }\n    });\n    return typeSelector;\n  },\n  mimeTypeMap: {\n    \"text\": \"Text\",\n    \"image\": \"Image\",\n    \"audio\": \"Audio\",\n    \"video\": \"Video\",\n    \"application\": \"Data\"\n  },\n  mapMimeType: function mapMimeType(mimeType) {\n    return TargetUtil.mimeTypeMap[mimeType];\n  },\n  mapTargetsToDOMElements: function mapTargetsToDOMElements(annotation) {\n    var domTargets = [];\n    _AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extractTargets(annotation).forEach(function (target) {\n      var targetId = _AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extractTargetIdentifier(target);\n      if (!targetId) // target is not loaded in browser window\n        return [];\n      var source = _flux_AnnotationActions_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].lookupIdentifier(targetId);\n\n      if (source.type === undefined) {//console.error(\"source information for target \" + targetId + \" should have a type:\", source);\n      } else if (source.type === \"annotation\") {\n        //AnnotationUtil.extractTargets(source.data).forEach((target) => {\n        _AnnotationUtil_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extractTargets(source.data).forEach(function () {\n          domTargets = domTargets.concat(TargetUtil.mapTargetsToDOMElements(source.data));\n          domTargets = domTargets.concat(TargetUtil.mapTargetsToDOMElements(source.data));\n        });\n      } else if (source.type === \"resource\") {\n        if (target.type === undefined) {//console.error(\"Target should have a type property:\", target);\n        } else if (target.type === \"Text\") {\n          domTargets.push(TargetUtil.makeTextRange(target, source.data.domNode));\n        } else if (target.type === \"Image\") {\n          domTargets.push(TargetUtil.makeImageRegion(target, source.data.domNode));\n        } else if (target.type === \"Video\" || target.type === \"Audio\") {\n          domTargets.push(TargetUtil.makeTemporalSegment(target, source.data.domNode));\n        } else {//console.error(\"Unknown target type\", target);\n        }\n      } else {//console.error(\"no source type for source:\", source);\n        }\n    });\n    return domTargets;\n  },\n  makeImageRegion: function makeImageRegion(target, node) {\n    var imageRegion = {\n      type: \"Image\",\n      node: node\n    };\n\n    if (target.selector !== undefined && target.selector !== null) {\n      var mediaFragment = TargetUtil.getTargetMediaFragment(target);\n      imageRegion.rect = mediaFragment.rect;\n    }\n\n    return imageRegion;\n  },\n  makeTextRange: function makeTextRange(target, node) {\n    var targetRange = {\n      type: \"Text\",\n      start: 0,\n      end: -1,\n      node: node\n    };\n    var textPosition = TargetUtil.getSelectorByType(target, \"TextPositionSelector\");\n\n    if (textPosition && textPosition.start !== undefined) {\n      targetRange.start = textPosition.start;\n      targetRange.end = textPosition.end;\n    }\n\n    return targetRange;\n  },\n  makeTemporalSegment: function makeTemporalSegment(target, node) {\n    var segment = {\n      type: target.type,\n      node: node\n    };\n\n    if (target.selector !== undefined && target.selector !== null) {\n      var mediaFragment = TargetUtil.getTargetMediaFragment(target);\n      segment.interval = mediaFragment.interval;\n    }\n\n    return segment;\n  },\n  getTargetText: function getTargetText(target, resource) {\n    // if whole resource is the target,\n    // return the text content of the corresponding node\n    if (!target.selector && !resource.data.text) throw Error(\"Invalid text target! Should have selector or point to DOM element with text content\");\n    if (!target.selector) return resource.data.text;\n    var selector = target.selector;\n    if (target.selector.refinedBy) selector = target.selector.refinedBy; // if there are multiple selectors, pick any selector since they are alternatives\n\n    if (TargetUtil.hasQuoteSelector(selector)) {\n      selector = TargetUtil.getQuoteSelector(selector);\n      return selector.exact;\n    } //console.log(\"getTargetText - selector:\", selector)\n\n\n    selector = Array.isArray(selector) ? selector[0] : selector;\n    if (!selector.type) return null;\n    if (selector.type === \"TextQuoteSelector\") return selector.exact;\n    if (selector.type === \"TextPositionSelector\") return TargetUtil.getTargetRangeText(resource.data.domNode, selector.start, selector.end);\n\n    if (selector.type === \"NestedPIDSelector\") {//console.log(\"getTargetText - NestedPIDSelector\");\n    }\n\n    if (resource.data.text) return resource.data.text;\n    return \"\"; // if no text can is targeted, return empty string\n  },\n  hasQuoteSelector: function hasQuoteSelector(selector) {\n    var quoteSelector = null;\n\n    if (Array.isArray(selector)) {\n      return selector.some(function (s) {\n        return s.type === \"TextQuoteSelector\";\n      });\n    } else if (!selector.hasOwnProperty(\"type\")) {\n      console.log(\"selector:\", selector);\n      throw Error(\"Invalid selector! selector requires a 'type' property\");\n    } else {\n      return selector.type === \"TextQuoteSelector\";\n    }\n  },\n  getQuoteSelector: function getQuoteSelector(selector) {\n    var quoteSelector = null;\n\n    if (Array.isArray(selector)) {\n      selector.forEach(function (s) {\n        if (s.type === \"TextQuoteSelector\") {\n          quoteSelector = s;\n        }\n      });\n      return quoteSelector;\n    } else if (selector.hasOwnProperty(\"type\")) {\n      console.log(\"selector:\", selector);\n      throw Error(\"Invalid selector:\");\n    } else {\n      return selector.type === \"TextQuoteSelector\";\n    }\n  },\n  getTargetRangeText: function getTargetRangeText(node, start, end) {\n    _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setRDFaSelectionRange(node, start, end);\n    var selection = window.document.getSelection();\n    var text = selection.toString();\n    selection.removeAllRanges();\n    return text;\n  },\n  getTargetMediaFragment: function getTargetMediaFragment(target) {\n    if (typeof target === \"string\") return null;\n\n    if (target.selector && target.selector.type === \"FragmentSelector\") {\n      return target.selector;\n    } else if (target.selector.refinedBy && target.selector.refinedBy.type === \"FragmentSelector\") {\n      return target.selector.refinedBy;\n    }\n  },\n  toggleHighlight: function toggleHighlight(targetDOMElements, highlighted) {\n    targetDOMElements.forEach(function (target) {\n      if (target.type === undefined) {//console.error(\"Target should have a type:\", target);\n      } else if (target.type === \"Text\") {\n        TargetUtil.toggleTextHighlight(target, highlighted);\n      } else if (target.type === \"Audio\") {\n        TargetUtil.toggleAudioHighlight(target, highlighted);\n      } else if (target.type === \"Image\") {\n        TargetUtil.toggleImageHighlight(target, highlighted);\n      } else if (target.type === \"Video\") {\n        TargetUtil.toggleVideoHighlight(target, highlighted);\n      } else {//console.error(\"Unknown target type:\", target);\n      }\n    });\n  },\n  toggleTextHighlight: function toggleTextHighlight(target, highlighted) {\n    if (highlighted) _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectAndRemoveRange(target.node, target.start, target.end);else _SelectionUtil_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectAndHighlightRange(target.node, target.start, target.end);\n  },\n  toggleImageHighlight: function toggleImageHighlight(target, highlighted) {\n    // trigger toggleOverlay event with target node and rectangle as detail\n    var toggleOverlay = new CustomEvent(\"toggle-annotation-overlay\", {\n      detail: {\n        rect: target.rect,\n        highlighted: highlighted\n      }\n    });\n    target.node.dispatchEvent(toggleOverlay);\n  },\n  toggleVideoHighlight: function toggleVideoHighlight(target, started) {\n    // trigger toggleOverlay event with target node and rectangle as detail\n    var toggleOverlay = new CustomEvent(\"play-video-segment\", {\n      detail: {\n        interval: target.interval,\n        started: started\n      }\n    });\n    target.node.dispatchEvent(toggleOverlay);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (TargetUtil);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/util/TargetUtil.js?");

/***/ }),

/***/ "./src/util/TimeUtil.js":
/*!******************************!*\
  !*** ./src/util/TimeUtil.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ \"./node_modules/moment/moment.js\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);\n\nvar TimeUtil = {\n  //formats seconds to a neat time string hh:mm:ss\n  formatTime: function formatTime(t) {\n    if (t == -1) {\n      return \"00:00:00\";\n    }\n\n    var pt = moment__WEBPACK_IMPORTED_MODULE_0___default.a.duration(t * 1000);\n    var h = pt.hours() < 10 ? \"0\" + pt.hours() : pt.hours();\n    var m = pt.minutes() < 10 ? \"0\" + pt.minutes() : pt.minutes();\n    var s = pt.seconds() < 10 ? \"0\" + pt.seconds() : pt.seconds();\n    return h + \":\" + m + \":\" + s;\n  },\n  //formats milliseconds to a time string hh:mm:ss\n  formatMillisToTime: function formatMillisToTime(millis) {\n    if (millis == -1) {\n      return \"00:00:00\";\n    }\n\n    var pt = moment__WEBPACK_IMPORTED_MODULE_0___default.a.duration(millis);\n    var h = pt.hours() < 10 ? \"0\" + pt.hours() : pt.hours();\n    var m = pt.minutes() < 10 ? \"0\" + pt.minutes() : pt.minutes();\n    var s = pt.seconds() < 10 ? \"0\" + pt.seconds() : pt.seconds();\n    return h + \":\" + m + \":\" + s;\n  },\n  //TODO not sure anymore why this was useful. It seems bad to round off seconds\n  playerPosToMillis: function playerPosToMillis(sec) {\n    //a double\n    return parseInt(sec) * 1000;\n  },\n  getYearFromDate: function getYearFromDate(dateMillis) {\n    return new Date(dateMillis).getFullYear();\n  },\n  yearToUNIXTime: function yearToUNIXTime(year) {\n    return new Date(year + \"-01-01\").valueOf();\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (TimeUtil);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/util/TimeUtil.js?");

/***/ }),

/***/ "./src/util/VocabularyUtil.js":
/*!************************************!*\
  !*** ./src/util/VocabularyUtil.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var rdflib_lib_fetcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rdflib/lib/fetcher */ \"./node_modules/rdflib/lib/fetcher.js\");\n/* harmony import */ var rdflib_lib_fetcher__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_fetcher__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rdflib/lib/namespace */ \"./node_modules/rdflib/lib/namespace.js\");\n/* harmony import */ var rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rdflib/lib/data-factory */ \"./node_modules/rdflib/lib/data-factory.js\");\n/* harmony import */ var rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var rdflib__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rdflib */ \"./node_modules/rdflib/lib/index.js\");\n/* harmony import */ var rdflib__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(rdflib__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\n\nvar VocabularyUtil = {\n  //rdf : rdf,\n  rdfStore: null,\n  fetcher: null,\n  OWL: rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default()(\"http://www.w3.org/2002/07/owl#\"),\n  RDF: rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default()(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"),\n  RDFS: rdflib_lib_namespace__WEBPACK_IMPORTED_MODULE_1___default()(\"http://www.w3.org/2000/01/rdf-schema#\"),\n  newStore: function newStore() {\n    var store = rdflib_lib_data_factory__WEBPACK_IMPORTED_MODULE_2___default.a.graph();\n    VocabularyUtil.fetcher = new rdflib_lib_fetcher__WEBPACK_IMPORTED_MODULE_0___default.a(store, 500);\n    return store;\n  },\n  prefixes: {\n    // common prefixes for ease of reference\n    rdfs: \"http://www.w3.org/2000/01/rdf-schema#\",\n    owl: \"http://www.w3.org/2002/07/owl#\"\n  },\n  importPredicate: \"http://www.w3.org/2002/07/owl#imports\",\n  readVocabulariesFromURL: function readVocabulariesFromURL(vocabularyURLs, callback) {\n    vocabularyURLs.forEach(function (vocabularyURL, index) {\n      VocabularyUtil.readVocabularyFromURL(vocabularyURL, function (error) {\n        if (error) {\n          window.alert(\"Error reading vocabulary from \" + vocabularyURLi + \"\\n\" + error.toString());\n          return callback(error);\n        }\n\n        if (index + 1 == vocabularyURLs.length) return callback(null);\n      });\n    });\n  },\n  readVocabularyFromURL: function readVocabularyFromURL(vocabularyURL, callback) {\n    VocabularyUtil.fetcher.nowOrWhenFetched(vocabularyURL, undefined, function (ok, body) {\n      if (!ok) {\n        return callback(body, null);\n      } else {\n        return callback(null, body);\n      }\n    });\n  },\n  toString: function toString(literal) {\n    return literal.replace(/['\"]/g, \"\");\n  },\n  toStrings: function toStrings(literals) {\n    return literals.map(function (literal) {\n      return VocabularyUtil.toString(literal);\n    });\n  },\n  getLabelClass: function getLabelClass(store, classLabel) {\n    var predicate = VocabularyUtil.RDFS('label');\n    var subject = store.any(undefined, predicate, classLabel);\n\n    if (!subject) {\n      return null;\n    } else {\n      return subject.value;\n    }\n  },\n  getClassLabel: function getClassLabel(store, classURI) {\n    var classNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(classURI);\n    var predicate = VocabularyUtil.RDFS('label');\n    var object = store.any(classNode, predicate, undefined);\n\n    if (!object) {\n      return null;\n    } else {\n      return object.value;\n    }\n  },\n  getInverseOfRelation: function getInverseOfRelation(rdfStore, propertyURI) {\n    var predicate = VocabularyUtil.OWL('inverseOf');\n    var propertyNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(propertyURI);\n    var object = rdfStore.any(undefined, predicate, propertyNode);\n\n    if (!object) {\n      return null;\n    } else {\n      return object.value;\n    }\n  },\n  getSubProperties: function getSubProperties(rdfStore, propertyURI) {\n    var predicate = VocabularyUtil.RDFS('subPropertyOf');\n    var propertyNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(propertyURI);\n    var objects = rdfStore.each(undefined, predicate, propertyNode);\n    return objects.map(function (object) {\n      return object.value;\n    });\n  },\n  getDescendantProperties: function getDescendantProperties(rdfStore, propertyURI) {\n    if (!propertyURI) {\n      throw Error(\"propertyURI undefined!\");\n    }\n\n    var predicate = VocabularyUtil.RDFS('subPropertyOf');\n    var propertyNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(propertyURI);\n    var objects = rdfStore.each(undefined, predicate, propertyNode);\n    var descendantURIs = objects.map(function (object) {\n      return object.value;\n    });\n    descendantURIs.forEach(function (descendantURI) {\n      var deeperDescendants = VocabularyUtil.getDescendantProperties(rdfStore, descendantURI);\n      descendantURIs = descendantURIs.concat(deeperDescendants);\n    });\n    return descendantURIs;\n  },\n  getSubClasses: function getSubClasses(rdfStore, classURI) {\n    if (!classURI) {\n      throw Error(\"classURI undefined!\");\n    } //let predicate = VocabularyUtil.expand(\"rdfs:subClassOf\");\n\n\n    var predicate = VocabularyUtil.RDFS('subClassOf');\n    var classNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(classURI);\n    var objects = rdfStore.each(undefined, predicate, classNode);\n    return objects.map(function (object) {\n      return object.value;\n    });\n  },\n  getDescendantClasses: function getDescendantClasses(rdfStore, classURI) {\n    if (!classURI) {\n      throw Error(\"classURI undefined!\");\n    } //let predicate = VocabularyUtil.expand(\"rdfs:subClassOf\");\n\n\n    var predicate = VocabularyUtil.RDFS('subClassOf');\n    var classNode = rdflib__WEBPACK_IMPORTED_MODULE_3___default.a.sym(classURI);\n    var objects = rdfStore.each(undefined, predicate, classNode);\n    var descendantURIs = objects.map(function (object) {\n      return object.value;\n    });\n    descendantURIs.forEach(function (descendantURI) {\n      var deeperDescendants = VocabularyUtil.getDescendantClasses(rdfStore, descendantURI);\n      descendantURIs = descendantURIs.concat(deeperDescendants);\n    });\n    return descendantURIs;\n  },\n  getSuperClass: function getSuperClass(classURI) {\n    var predicate = VocabularyUtil.expand(\"rdfs:subClassOf\");\n    var object = VocabularyUtil.rdfStore.any(classURI, predicate, undefined);\n\n    if (!object) {\n      return null;\n    } else {\n      return object.value;\n    }\n  },\n  getSuperClasses: function getSuperClasses(className) {\n    var superClasses = [];\n    var superClass = VocabularyUtil.getSuperClass(className);\n\n    while (superClass) {\n      superClasses.push(superClass);\n      superClass = VocabularyUtil.getSuperClass(className);\n    }\n\n    return superClasses;\n  },\n  expand: function expand(prefixedName) {\n    var prefix = prefixedName.split(\":\")[0];\n    var name = prefixedName.split(\":\")[1];\n    return VocabularyUtil.prefixes[prefix] + name;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (VocabularyUtil);\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/./src/util/VocabularyUtil.js?");

/***/ }),

/***/ 0:
/*!****************************!*\
  !*** multi ./src/swac.jsx ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! /Users/marijnkoolen/Code/Huygens/scholarly-web-annotation-client/src/swac.jsx */\"./src/swac.jsx\");\n\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/multi_./src/swac.jsx?");

/***/ }),

/***/ 1:
/*!***********************!*\
  !*** vertx (ignored) ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/vertx_(ignored)?");

/***/ }),

/***/ 2:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/util_(ignored)?");

/***/ }),

/***/ 3:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://ScholarlyWebAnnotator/util_(ignored)?");

/***/ })

/******/ });